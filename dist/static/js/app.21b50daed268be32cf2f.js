webpackJsonp([1],{"/X/l":function(t,e){},"52Cd":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTk2QkI4RkE3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTk2QkI4Rjk3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzk3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyN0E3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WHowqAAAXNElEQVR42uxda4xd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"},AgfW:function(t,e){},D82C:function(t,e){},DkTm:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("//Fk"),s=i.n(a),n=(i("d8/S"),i("Au9i")),o=i.n(n),r=i("7+uW"),l=i("mtWM"),c=i.n(l),d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var h=i("VU/8")({name:"App"},d,!1,function(t){i("DkTm")},null,null).exports,p=i("/ocq"),u=i("gRE1"),m=i.n(u),v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("mt-header",{staticClass:"header",attrs:{title:this.title}},[e("a",{attrs:{slot:"left"},on:{click:this.back},slot:"left"},[e("mt-button",{attrs:{icon:"back"}})],1)])},staticRenderFns:[]};var f=i("VU/8")({name:"MyHeader",props:["title"],methods:{back:function(){this.$router.back()}}},v,!1,function(t){i("SFlG")},"data-v-3246f62e",null).exports,g=new r.default,y={name:"course",data:function(){return{title:"课程列表",courseList:[],libraryId:this.$route.params.id,docs:[],allDcos:[],library:{},cover:"",createTime:"",action:[],name:"课堂主页"}},created:function(){this.pageInite()},mounted:function(){},methods:{pageInite:function(){var t=this;n.Indicator.open(),this.$http.get("/accounts/docs").then(function(e){t.allDcos=e.data.docs,t.library=e.data.libraries.find(function(e){return e.id===t.libraryId}),t.createTime=t.library.createTime.replace("T"," ").replace(/\.\w+/,""),t.docs=t.library.docs;for(var i=t.allDcos.length,a=0;a<i;a++)-1!=t.docs.indexOf(t.allDcos[a].id)&&"open"==t.allDcos[a].status&&"1"==t.allDcos[a].transformed&&t.allDcos[a].hasAction&&t.courseList.push(t.allDcos[a]);t.courseList=t.courseList.reverse(),n.Indicator.close()})},sendIndex:function(){g.$emit("index",this.index)},score:function(t){for(var e=m()(t),i=e.length,a=0,s=0;s<i;s++)a+=e[s];if(0===a)n="暂无评分";else{var n=(1*e[0]+2*e[1]+3*e[2]+4*e[3]+5*e[4])/a;n=n.toFixed(1)}return n}},components:{MyHeader:f}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"coursePage"},[i("MyHeader",{attrs:{pageName:t.name}}),t._v(" "),i("div",{staticClass:"container"},[i("div",{staticStyle:{height:"200px"}},[i("div",{staticClass:"message"},[i("h2",{staticClass:"coursetitle"},[t._v(t._s(this.library.name))]),t._v(" "),i("span",{staticStyle:{color:"rgb(199, 199, 199)"}},[t._v("共"+t._s(this.courseList.length)+"个可读文档")])]),t._v(" "),i("div",{staticClass:"black"}),t._v(" "),i("img",{attrs:{src:this.library.cover,onerror:"this.style.display='none'",width:"100%",height:"200px;"}})]),t._v(" "),i("hr",{staticClass:"hr1"}),t._v(" "),t._l(t.courseList,function(e,a){return i("div",{key:a,staticClass:"courseCell",on:{click:t.sendIndex}},[i("router-link",{staticClass:"link",attrs:{to:{path:"/player/"+e.id}}},[i("div",{staticClass:"imgcon"},[i("div",{staticClass:"msg"},["暂无评分"!==t.score(e.ratingStatis)?i("i",{staticClass:"fa fa-star",staticStyle:{color:"#fbe359","font-size":"20px",width:"110px","text-align":"center","margin-top":"20px"},attrs:{"aria-hidden":"true"}},[t._v(t._s(t.score(e.ratingStatis)))]):t._e(),t._v(" "),"暂无评分"==t.score(e.ratingStatis)?i("i",{staticClass:"fa",staticStyle:{color:"white","font-size":"20px",width:"110px","text-align":"center","margin-top":"20px"},attrs:{"aria-hidden":"true"}},[t._v(t._s(t.score(e.ratingStatis)))]):t._e()]),t._v(" "),i("div",{staticClass:"blackblock"}),t._v(" "),i("div",{staticClass:"classImg"},[i("img",{staticClass:"classImg",attrs:{src:e.cover,onerror:"this.style.display='none'"}})])]),t._v(" "),i("div",{staticClass:"msgcontainer"},[i("div",{staticStyle:{display:"inline-block"}},[i("span",{staticClass:"className"},[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"icons"},[i("i",{staticClass:"fa fa-caret-square-o-right",attrs:{"aria-hidden":"true"}}),t._v(" "),i("span",{staticStyle:{display:"inline-block","margin-left":"5px"}},[t._v(t._s(e.view))]),t._v(" "),i("i",{staticClass:"fa fa-commenting-o",staticStyle:{"margin-left":"15px"},attrs:{"aria-hidden":"true"}}),t._v(" "),i("span",{staticStyle:{display:"inline-block","margin-left":"5px"}},[t._v(t._s(e.commentNums))])])])]),t._v(" "),i("hr",{staticClass:"hr1"})],1)})],2)],1)},staticRenderFns:[]};var b=i("VU/8")(y,w,!1,function(t){i("VOwn")},"data-v-2173d86b",null).exports,C=(i("/X/l"),i("c/Tr")),x=i.n(C),I=(i("dlmu"),{name:"Comment",props:{docId:{type:String,required:!0},comments:{type:Array,required:!0}},data:function(){return{approveCount:[],approveL:0,approveList:[],change:!1,commentId:"",commentList:this.comments,commentObj:{},files:[],images:[],index:-1,inputImage:"",isShowUploadImageIcon:!1,isShowUploadImagesDialog:!1,myComment:"",preview0:"",preview1:"",preview2:"",replyId:-1,replyIndex:-1,replyList:[],replyText:"",replyVisible:!1,rrVisible:!1,showImgUrl:"",showImgVisible:!1,showIndex:[],uploadFile:[]}},watch:{comments:function(){this.commentList=this.comments}},methods:{confirmComment:function(){var t=this;if(""===this.myComment&&""===this.preview0)Object(n.Toast)("请输入评论");else{var e=new FormData;e.append("text",this.myComment),e.append("docId",this.docId);for(var i=0;i<this.uploadFile.length;i++)e.append("files",this.uploadFile[i]);n.Indicator.open(),this.$http.post("/comments/",e).then(function(e){t.commentList.unshift(e.data)}).then(function(){n.Indicator.close(),Object(n.Toast)({message:"评论成功",iconClass:"fa fa-check"})}).catch(function(){n.Indicator.close(),Object(n.Toast)({message:"评论失败",iconClass:"fa fa-exclamation-triangle"})}),this.myComment="",this.isShowUploadImageIcon=!1,this.cancleImage()}},clickUploadImageInputForComment:function(){this.inputImage="",this.$refs.uploadImageInputForComment.click()},clickUploadImageInputForReply:function(){this.inputImage="",this.$refs.uploadImageInputForReply.click()},handleInputChange:function(t){t.target.files&&(this.files=x()(t.target.files),this.transformToDataUrl(this.files))},transformToDataUrl:function(t){for(var e=0;e<3;e++)t[e]&&(""===this.preview0?this.preview0=URL.createObjectURL(t[e]):""===this.preview1?this.preview1=URL.createObjectURL(t[e]):this.preview2=URL.createObjectURL(t[e]))},comfirmUpload:function(){this.isShowUploadImagesDialog=!1,this.uploadFile=this.files,this.isShowUploadImageIcon=!0},cancleUpload:function(){this.isShowUploadImagesDialog=!1,this.cancleImage()},cancleImage:function(){this.uploadFile=[],this.files=[],this.preview0="",this.preview1="",this.preview2=""},showImg:function(t){this.showImgUrl=t,this.showImgVisible=!0},handleOnReply:function(t,e,i){-1!==t?this.index=t:t=this.index,this.commentObj=this.commentList[t],this.approveL=this.commentObj.approve.length,this.replyList=this.commentList[t].replies,this.replyVisible=!0,this.rrVisible=!0,this.replyFormData=new FormData,this.replyFormData.append("commentId",this.commentList[t].id),1===i?this.replyFormData.append("sourceId",this.commentList[t].accountId):this.replyFormData.append("sourceId",this.commentList[t].replies[e].accountId),this.replyIndex=t},confirmReply:function(){var t=this;this.isShowUploadImageIcon=!1,this.rrVisible=!1,this.comfirmUpload();for(var e=0;e<this.uploadFile.length;e++)this.replyFormData.append("files",this.uploadFile[e]);this.replyFormData.append("text",this.replyText),""===this.replyText&&""===this.preview0?Object(n.Toast)("请输入回复"):(n.Indicator.open({position:"bottom"}),this.preview0="",this.$http.post("/comments/"+this.commentList[this.replyIndex].id+"/reply",this.replyFormData).then(function(e){t.replyList=e.data.replies,t.commentList[t.index].replies=e.data.replies,t.cancleImage(),t.replyText="",n.Indicator.close(),Object(n.Toast)({message:"回复成功",iconClass:"icon icon-success",position:"bottom"}),t.showReply(t.replyIndex)}).catch(function(){n.Indicator.close(),Object(n.Toast)({message:"回复失败",iconClass:"icon icon-success",position:"bottom"})}))},cancleReply:function(){this.cancleImage(),this.rrVisible=!1,this.replyText=""},showReply:function(t){if(-1!==this.showIndex.indexOf(t)){var e=this.showIndex.indexOf(t);this.showIndex.splice(e,1)}else this.showIndex.push(t)},approveHandle:function(t,e,i){if(-1===t&&(t=this.index),1===i?(this.commentId=this.commentList[t].id,this.accountId=this.commentList[t].accountId,this.approveList=this.commentList[t].approve):(this.commentId=this.commentList[t].replies[e].id,this.accountId=this.commentList[t].replies[e].accountId,this.approveList=this.commentList[t].replies[e].approve),-1===this.approveList.indexOf(this.accountId))document.getElementById("approve"+this.commentId).style.color="#2196F3",document.getElementById("approvepop"+this.commentId)&&(document.getElementById("approvepop"+this.commentId).style.color="#2196F3"),this.approveList.push(this.accountId),1===i&&(this.approveL=this.approveList.length),this.$http.put("/comments/"+this.commentId+"/approve",{approve:!0});else{var a=this.approveList.indexOf(this.accountId);this.approveList.splice(a,1),1===i&&(this.approveL=this.approveList.length),document.getElementById("approve"+this.commentId).style.color="black",document.getElementById("approvepop"+this.commentId)&&(document.getElementById("approvepop"+this.commentId).style.color="black"),this.$http.put("/comments/"+this.commentId+"/approve",{approve:!1})}},formatTime:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+this.paddingNumberWithZero(e.getHours())+":"+this.paddingNumberWithZero(e.getMinutes())+":"+this.paddingNumberWithZero(e.getSeconds())},paddingNumberWithZero:function(t){return t>9?String(t):"0"+t}}}),k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commentContainer"},[a("mt-field",{staticClass:"commentInput",attrs:{placeholder:"评论",disableClear:""},model:{value:t.myComment,callback:function(e){t.myComment=e},expression:"myComment"}},[t.isShowUploadImageIcon?t._e():a("i",{staticClass:"fa fa-picture-o",staticStyle:{"font-size":"20px"},on:{click:function(e){t.isShowUploadImagesDialog=!0}}}),t._v(" "),t.isShowUploadImageIcon?a("img",{attrs:{width:"35px",src:this.preview0}}):t._e(),t._v(" "),a("mt-button",{staticStyle:{"margin-left":"10px",height:"35px","background-color":"#418642",color:"#FFF"},on:{click:function(e){t.confirmComment()}}},[t._v("\n      提交\n    ")])],1),t._v(" "),t._l(t.commentList,function(e,i){return a("div",{key:e.id,staticClass:"commentCell"},[a("div",{staticClass:"commentTop"},[a("img",{staticClass:"avatar",attrs:{src:e.avatar}}),t._v(" "),a("span",{staticClass:"userName"},[t._v(t._s(e.userName))]),t._v(" "),a("div",{staticClass:"approve"},[a("i",{staticClass:"fa fa-thumbs-o-up",staticStyle:{"font-size":"20px"},attrs:{id:"approve"+e.id},on:{click:function(e){t.approveHandle(i,0,1)}}}),t._v(" "),a("span",[t._v(t._s(e.approve.length))])])]),t._v(" "),a("p",{staticClass:"text"},[t._v(t._s(e.text))]),t._v(" "),e.images.length?a("div",{staticClass:"imagesBox"},t._l(e.images,function(e){return a("img",{staticClass:"textImg",attrs:{width:"60px",height:"60px",src:e},on:{click:function(i){t.showImg(e)}}})})):t._e(),t._v(" "),a("span",{staticStyle:{color:"gray","font-size":"12px"}},[t._v("\n      "+t._s(t.formatTime(e.createTime))+"\n    ")]),t._v(" "),a("span",{staticClass:"replyBtn",on:{click:function(e){t.handleOnReply(i,0,1)}}},[t._v("\n      回复("+t._s(e.replies.length)+")\n    ")])])}),t._v(" "),t.commentList.length?t._e():a("h3",{staticStyle:{color:"gray"}},[t._v("暂无评论，快来评论吧！")]),t._v(" "),a("mt-popup",{staticClass:"imagesUploadDialog",attrs:{"popup-transition":"popup-fade"},model:{value:t.isShowUploadImagesDialog,callback:function(e){t.isShowUploadImagesDialog=e},expression:"isShowUploadImagesDialog"}},[a("div",[a("p",{staticStyle:{"padding-bottom":"10px",color:"#555"}},[t._v("最多可上传3张图片")]),t._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center"}},[""!==t.preview0?a("img",{staticStyle:{"border-radius":"5px",border:"solid 1px #DDD","margin-right":"10px"},attrs:{src:t.preview0,height:"100px"}}):t._e(),t._v(" "),""!==t.preview1?a("img",{staticStyle:{"border-radius":"5px",border:"solid 1px #DDD","margin-right":"10px"},attrs:{src:t.preview1,height:"100px"}}):t._e(),t._v(" "),""!==t.preview2?a("img",{staticStyle:{"border-radius":"5px",border:"solid 1px #DDD","margin-right":"10px"},attrs:{src:t.preview2,height:"100px"}}):t._e(),t._v(" "),""===t.preview2?a("i",{staticClass:"fa fa-plus-square-o",staticStyle:{"font-size":"100px","padding-left":"10px","padding-right":"10px","border-radius":"5px",border:"solid 1px #DDD"},on:{click:t.clickUploadImageInputForComment}}):t._e(),t._v(" "),a("input",{ref:"uploadImageInputForComment",staticStyle:{display:"none"},attrs:{accept:"image/*",type:"file",multiple:""},domProps:{value:t.inputImage},on:{change:t.handleInputChange}})]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"center","align-self":"center","margin-top":"30px"}},[a("mt-button",{staticStyle:{"margin-right":"10px","padding-left":"30px","padding-right":"30px"},on:{click:t.comfirmUpload}},[t._v("\n          确定\n        ")]),t._v(" "),a("mt-button",{staticStyle:{"margin-left":"10px","padding-left":"30px","padding-right":"30px"},on:{click:t.cancleUpload}},[t._v("\n          取消\n        ")])],1)])]),t._v(" "),a("mt-popup",{staticClass:"replyPop",attrs:{position:"right",modal:"false"},model:{value:t.replyVisible,callback:function(e){t.replyVisible=e},expression:"replyVisible"}},[a("div",[a("i",{staticClass:"fa fa-angle-left",staticStyle:{"font-size":"40px","font-weight":"200",padding:"5px 18px"},attrs:{"aria-hidden":"true"},on:{click:function(e){t.replyVisible=!1}}})]),t._v(" "),a("div",{staticStyle:{margin:"10px 20px 0 20px"}},[a("div",[a("img",{staticClass:"avatar",attrs:{src:i("52Cd")}}),t._v(" "),a("span",{staticClass:"userName"},[t._v("ID:"+t._s(this.commentObj.accountId))]),t._v(" "),a("div",{staticClass:"replyBtnCell"},[a("i",{staticClass:"fa fa-thumbs-o-up",staticStyle:{"font-size":"20px"},attrs:{id:"approvepop"+t.commentObj.id,"aria-hidden":"true"},on:{click:function(e){t.approveHandle(-1,0,1)}}}),t._v(" "),a("span",[t._v(t._s(this.approveL))]),t._v(" "),a("span",{staticClass:"replyBtn",on:{click:function(e){t.handleOnReply(-1,0,1)}}},[t._v("回复")])]),t._v(" "),a("div",{staticStyle:{clear:"both"}})]),t._v(" "),a("p",{staticClass:"text"},[t._v(t._s(this.commentObj.text))]),t._v(" "),a("div",{staticClass:"imgBox"},t._l(t.commentObj.images,function(e,i){return a("img",{staticClass:"textImg",attrs:{src:e,width:"60px",height:"60px"},on:{click:function(i){t.showImg(e)}}})}))]),t._v(" "),a("hr"),t._v(" "),a("p",{staticStyle:{color:"gray",padding:"5px"}},[t._v("共"+t._s(this.replyList.length)+"条回复")]),t._v(" "),t._l(t.replyList,function(e,s){return a("div",{staticStyle:{margin:"10px 20px 0 20px"}},[a("div",[a("img",{staticClass:"avatar",attrs:{src:i("52Cd")}}),t._v(" "),a("span",{staticClass:"userName",staticStyle:{"font-size":"16px"}},[t._v("ID:"+t._s(e.accountId))]),t._v(" "),a("span",{staticStyle:{"font-size":"14px",color:"gray"}},[t._v("@:")]),t._v(" "),a("span",{staticClass:"userName",staticStyle:{"font-size":"16px","padding-left":"0"}},[t._v("ID:"+t._s(e.sourceId))]),t._v(" "),a("div",{staticClass:"replyBtnCell"},[t._v("' + reply.id' class='fa fa-thumbs-o-up' aria-hidden='true'>"),t._v(" "),a("span",[t._v(t._s(e.approve.length))]),t._v(" "),a("span",{staticClass:"replyBtn",on:{click:function(e){t.handleOnReply(-1,s,2)}}},[t._v("回复")])])]),t._v(" "),a("p",{staticClass:"text"},[t._v(t._s(e.text))]),t._v(" "),a("div",{staticClass:"imgBox"},t._l(e.images,function(e,i){return a("img",{staticClass:"textImg",attrs:{src:e,width:"70px",height:"70px"},on:{click:function(i){t.showImg(e)}}})}))])})],2),t._v(" "),a("mt-popup",{staticClass:"reply",attrs:{position:"right"},model:{value:t.rrVisible,callback:function(e){t.rrVisible=e},expression:"rrVisible"}},[a("mt-field",{staticClass:"replyInput",attrs:{placeholder:"请输入回复"},model:{value:t.replyText,callback:function(e){t.replyText=e},expression:"replyText"}}),t._v(" "),a("div",{staticStyle:{"text-align":"left","margin-top":"5px"}},[a("p",{staticStyle:{"font-size":"12px",color:"gray",margin:"0 12px"}},[t._v("至多可提交3张图片")]),t._v(" "),""!==t.preview0?a("img",{staticStyle:{"margin-left":"10px"},attrs:{src:t.preview0,height:"70px"}}):t._e(),t._v(" "),""!==t.preview1?a("img",{attrs:{src:t.preview1,height:"70px"}}):t._e(),t._v(" "),""!==t.preview2?a("img",{attrs:{src:t.preview2,height:"70px"}}):t._e(),t._v(" "),""===t.preview2?a("i",{staticClass:"fa fa-plus-square-o",staticStyle:{"font-size":"70px","margin-left":"5%"},on:{click:t.clickUploadImageInputForReply}}):t._e(),t._v(" "),a("input",{ref:"uploadImageInputForReply",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:""},domProps:{value:t.inputImage},on:{change:t.handleInputChange}})]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"center","align-self":"center","margin-top":"30px"}},[a("mt-button",{staticStyle:{"margin-right":"10px","padding-left":"30px","padding-right":"30px"},on:{click:t.confirmReply}},[t._v("\n        确定\n      ")]),t._v(" "),a("mt-button",{staticStyle:{"margin-left":"10px","padding-left":"30px","padding-right":"30px"},on:{click:t.cancleReply}},[t._v("\n        取消\n      ")])],1)],1),t._v(" "),a("mt-popup",{staticClass:"showImg",attrs:{position:"right"},model:{value:t.showImgVisible,callback:function(e){t.showImgVisible=e},expression:"showImgVisible"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.showImgUrl}})])],2)},staticRenderFns:[]};var S=i("VU/8")(I,k,!1,function(t){i("AgfW")},"data-v-1b44363e",null).exports,P={name:"Score",props:{accountId:{type:Number,required:!0},score:{type:Number,required:!0},teacherInformation:{type:Object,required:!0}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"score"},[i("div",{staticClass:"left"},[i("span",{staticStyle:{"font-size":"16px","font-weight":"800","margin-right":"5px"}},[t._v("\n      评分:\n    ")]),t._v(" "),i("span",{staticStyle:{"font-size":"26px","font-weight":"800"}},[t._v("\n      "+t._s(-1===t.score?"暂无评分":t.score+"/5")+"\n    ")])]),t._v(" "),-1!==t.accountId&&Object.keys(t.teacherInformation).length?i("router-link",{staticClass:"right",attrs:{to:"/teacher/"+t.accountId}},[i("img",{staticStyle:{width:"30px",height:"30px","border-radius":"50%"},attrs:{src:t.teacherInformation.avatar}}),t._v(" "),i("span",{staticStyle:{color:"#000","font-size":"20px"}},[t._v("\n      "+t._s(t.teacherInformation.name||t.teacherInformation.nickname)+"\n    ")]),t._v(" "),i("i",{staticClass:"fa fa-angle-right",staticStyle:{color:"#000","font-size":"20px"}})]):t._e()],1)},staticRenderFns:[]};var R=i("VU/8")(P,T,!1,function(t){i("D82C")},"data-v-292d2f14",null).exports,L=i("zNUS"),E=i.n(L).a.mock({subtitles:[{startTime:L.Random.range(1,2e5,2e3),textArr:L.Random.cparagraph(30)}]}),D=(i("GQaK"),{name:"Subtitles",props:{activeSubtitleIndex:{type:Number,required:!0},subtitles:{type:Array,required:!0}},data:function(){return{text:"",textlines:[],startArr:[],timeArr:[],time:"",onshow:"",scroll:"",count:0,nowords:!1}},created:function(){this.textlines=E.subtitles[0].textArr.split("。"),this.startArr=E.subtitles[0].startTime;for(var t=0;t<this.startArr.length;t++)this.timeArr.push(this.formatDuring(this.startArr[t]))},updated:function(){(this.onshow=document.querySelector(".onshow"),this.onshow)&&(this.onshow.offsetTop>100&&window.scrollTo(0,this.onshow.offsetTop-100))},methods:{formatDuring:function(t){var e=parseInt(t%36e5/6e4),i=parseInt(t%6e4/1e3);return i<10&&(i+="0"),e<10&&(e="0"+e),e+":"+i}}}),z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"subtitles"},[t._l(t.subtitles,function(e,a){return i("div",{staticClass:"textline",class:{onshow:a==t.activeSubtitleIndex}},[i("span",{staticClass:"start"},[t._v(t._s(t.formatDuring(e.beginTime)))]),t._v(" "),i("span",{staticClass:"wordstext"},[t._v(t._s(e.text))])])}),t._v(" "),t.nowords?i("h3",{staticStyle:{color:"gray","margin-top":"100px"}},[t._v("暂无字幕")]):t._e()],2)},staticRenderFns:[]};var F=i("VU/8")(D,z,!1,function(t){i("iXdq")},"data-v-5532351d",null).exports,A=i("Dd8w"),O=i.n(A),U=i("Zrlr"),W=i.n(U),M=i("wxAW"),_=i.n(M),N=i("rxKx"),B=i.n(N),V=i("fZjL"),H=i.n(V),Z={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},Y=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],Q=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],j=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],G="undefined"!=typeof window&&void 0!==window.document?window.document:{},q="fullscreenEnabled"in G&&H()(Z)||Y[0]in G&&Y||Q[0]in G&&Q||j[0]in G&&j||[],X={requestFullscreen:function(t){return t[q[Z.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[q[Z.requestFullscreen]]},get exitFullscreen(){return G[q[Z.exitFullscreen]].bind(G)},addEventListener:function(t,e,i){return G.addEventListener(q[Z[t]],e,i)},removeEventListener:function(t,e,i){return G.removeEventListener(q[Z[t]],e,i)},get fullscreenEnabled(){return Boolean(G[q[Z.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return G[q[Z.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return G[("on"+q[Z.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return G[("on"+q[Z.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return G[("on"+q[Z.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return G[("on"+q[Z.fullscreenerror]).toLowerCase()]=t}},J=function(){function t(e){var i=e.actionUrl,a=e.audioUrl,s=e.duration,n=e.element,o=e.imageUrls,r=e.mode,l=void 0===r?"mobile":r,c=e.size,d=e.subtitles;W()(this,t),this.actionData={actions:null,draftHeight:0,draftWidth:0,windowHeight:0,windowWidth:0},this.domRefs={audio:null,images:[],imageContainer:null,playerContainer:n},this.options={actionUrl:i,audioUrl:a,duration:s,element:n,imageUrls:o,mode:l,size:c,subtitles:d,scrollDuration:1,autoPlay:"mobile"===l,captionFontSize:16},this.state={audioLoadStatus:"initial",imagesLoaded:new Array(o.length,!1),canPlay:!1,nextAction:null,nextActionIndex:0,animation:null,animationObj:null,halt:!0,isLoading:!0,isPageFullscreenOpen:!1,isdraftOpen:!1,draftWidth:0,draftNum:1,contexts:[],propotions:[],propotion:1,ctx:null,currentSubtitleIndex:0,subtitles:this.options.subtitles||[],isCaptionsOpen:"mobile"===l,initialWidth:n.offsetWidth,wating:{waitingPage:null,waitingTime:null}},this.template={playerControl:'\n        <div class="player-main">\n          <div class="player-section-left">\n            <button class="player-section player-play player-button" title="播放">\n              <i class="fa fa-play"></i>\n            </button>\n            <div class="player-section player-time">\n              <span class="current-time">0</span>\n              <span class="player-time-divider">/</span>\n              <span class="duration">'+t.normalizeTime(this.options.duration)+'</span>\n            </div>\n          </div>\n          <div class="player-section-right">\n            <button class="player-section player-button player-toggle-captions'+(this.state.isCaptionsOpen?" is-active":"")+'" title="打开字幕">\n              <svg viewBox="0 0 24 24" style="display: inline-block; fill: currentcolor; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;">\n                <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z"></path>\n              </svg>\n            </button>\n            <button class="player-section player-button player-page-fullscreen" title="网页全屏">\n              <svg viewBox="0 0 24 24" style="display: inline-block; fill: currentcolor; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;">\n                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path>\n              </svg>\n              <svg viewBox="0 0 24 24" style="display: none; fill: currentcolor; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;">\n                <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"></path>\n              </svg>\n            </button>\n            <button class="player-section player-button player-fullscreen" title="进入全屏">\n              <svg viewBox="0 0 24 24" style="display: inline-block; fill: currentcolor; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;">\n                <path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"></path>\n              </svg>\n            </button>\n          </div>\n          <div class="player-progress-control">\n            <div class="player-progressbar-wrap">\n              <div class="player-progressbar">\n                <div class="player-progressbar-handle">\n                <i class="fa fa-circle"></i>\n                </div>\n              </div>\n              <div class="player-preview"></div>\n            </div>\n          </div>\n        </div>\n      ',loadTip:'\n        <div class="player-load-tip">\n          <button class="player-load-button">\n            <i class="fa fa-play" aria-hidden="true"></i>\n            <span>'+Math.round(c/1024/1024)+'MB流量</span>\n          </button>\n          <div class="player-loading">\n            <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>\n            <div>正在加载...</div>\n          </div>\n        </div>\n      ',draft:'\n        <canvas class="draft"></canvas>\n      ',captions:'\n        <div class="player-captions">\n          '+("desktop"===l?'<i class="fa fa-ellipsis-v" aria-hidden="true"></i>':"")+'\n          <span class="player-captions-text">(播放开始时将出现字幕)</span>\n        </div>\n      '},this.handleAudioLoaded=this.handleAudioLoaded.bind(this),this.loadSource=this.loadSource.bind(this),this.fetchActions()}return _()(t,null,[{key:"formatActionData",value:function(t){return{actions:t.actions.map(function(t,e){return O()({},t,{actionId:e,color:t.color,endTime:t.endTime?100*Math.round(10*window.parseFloat(t.endTime)):void 0,id:t.id,points:t.points?t.points.map(function(t){return[window.parseFloat(t.x),window.parseFloat(t.y)]}):void 0,startTime:100*Math.round(10*window.parseFloat(t.startTime)),target:t.target,type:t.type,width:t.width?window.parseInt(t.width,10):void 0,yDistance:t.yDistance?window.parseInt(t.yDistance,10):void 0})}).sort(function(t,e){return t.startTime-e.startTime}),draftHeight:window.parseInt(t.draftHeight,10),draftWidth:window.parseInt(t.draftWidth,10),windowHeight:window.parseInt(t.windowHeight,10),windowWidth:window.parseInt(t.windowWidth,10)}}}]),_()(t,[{key:"fetchActions",value:function(){var e=this;c.a.get(this.options.actionUrl,{baseURL:"",responseType:"json"}).then(function(i){e.actionData=t.formatActionData(i.data),e.renderContainer()}).catch(function(t){throw t})}},{key:"renderContainer",value:function(){var e=this.actionData,i=e.windowHeight,a=e.windowWidth,s=this.domRefs.playerContainer,n=this.options.mode,o=this.template.loadTip,r=document.createElement("div");r.className="player-image-container";var l=s.offsetWidth,c=l*i/a;r.style.width=l+"px",r.style.height=c+"px";var d=t.renderString(r,o);s.appendChild(r),this.domRefs.loadTip=d,this.domRefs.imageContainer=r,this.domRefs.loading=d.querySelector(".player-loading");var h=new CustomEvent("actionsLoaded");s.dispatchEvent(h);var p=d.querySelector(".player-load-button");"mobile"===n?p.addEventListener("click",this.loadSource):this.loadSource()}},{key:"loadSource",value:function(){var t=this.domRefs.loadTip;this.loadAudio(),this.loadImages(),t.firstElementChild.style.display="none",t.lastElementChild.style.display="block"}},{key:"loadAudio",value:function(){var t=document.createElement("audio");t.addEventListener("canplay",this.handleAudioLoaded),t.addEventListener("canplaythrough",this.handleAudioLoaded),t.addEventListener("loadeddata",this.handleAudioLoaded),t.addEventListener("loadedmetadata",this.handleAudioLoaded),t.src=this.options.audioUrl,this.domRefs.audio=t,this.state.audioLoadStatus="loading"}},{key:"loadImages",value:function(){var t=this,e=/p(\d+)\.png$/,i=this.options.imageUrls.sort(function(t,i){return Number(t.match(e)[1])-Number(i.match(e)[1])});this.options.imageUrls=i;var a=this.domRefs.playerContainer.offsetWidth;this.domRefs.images=i.map(function(e,i){var s=new Image(a);return s.addEventListener("load",t.handleImageLoaded.bind(t,i)),s}),this.domRefs.images[0].addEventListener("load",this.handleFirstImageLoaded.bind(this)),this.domRefs.images[0].src=i[0]}},{key:"handleFirstImageLoaded",value:function(){var t=this;this.checkSrcLoadStatus(),this.domRefs.images.forEach(function(e,i){i&&(e.src=t.options.imageUrls[i])})}},{key:"handleImageLoaded",value:function(t){this.state.imagesLoaded[t]=!0}},{key:"handleAudioLoaded",value:function(){this.state.audioLoadStatus="finish",this.checkSrcLoadStatus()}},{key:"checkSrcLoadStatus",value:function(){"finish"===this.state.audioLoadStatus&&this.state.imagesLoaded[0]&&!this.state.canPlay&&(this.state.canPlay=!0,this.setLoadingTipStatus(!1),this.initHtml(),this.bindEvents(),this.setDrawTarget(),this.changeCurrentTime(0),this.options.autoPlay&&this.togglePlay(),this.showPlayerControl())}},{key:"initHtml",value:function(){this.renderImages(),this.renderCanvas(),this.renderPlayerControl(),this.renderCaptions(),this.renderAudio(),this.renderDraft()}},{key:"setLoadingTipStatus",value:function(t){this.state.isLoading=t,this.domRefs.loading.style.display=this.state.isLoading?"block":"none"}},{key:"renderImages",value:function(){var t=this,e=this.domRefs,i=e.images,a=e.imageContainer;this.domRefs.pages=[];var s=document.createDocumentFragment();i.forEach(function(e){var i=document.createElement("section");i.classList.add("player-image-section"),e.classList.add("player-image"),i.appendChild(e),t.domRefs.pages.push(i),s.appendChild(i)}),a.appendChild(s)}},{key:"renderCanvas",value:function(){var t=document.createElement("canvas");this.domRefs.canvas=t;var e=this.domRefs.imageContainer;this.setCanvasSize(e.offsetWidth),t.classList.add("player-canvas"),e.appendChild(t);var i=t.getContext("2d");i.lineCap="round",this.state.contexts.push(i),this.setPropotions()}},{key:"renderAudio",value:function(){var t=this.domRefs,e=t.audio;t.playerContainer.appendChild(e)}},{key:"renderPlayerControl",value:function(){var e=this.domRefs.playerContainer,i=this.options.mode,a=this.template.playerControl,s=t.renderString(e,a);this.domRefs.playerControl=s,this.domRefs.progressbarWrapper=s.querySelector(".player-progressbar-wrap"),this.domRefs.playState=s.querySelector(".player-play"),this.domRefs.fullscreen=s.querySelector(".player-fullscreen"),this.domRefs.pageFullscreen=s.querySelector(".player-page-fullscreen"),this.domRefs.toggleCaptionsButton=s.querySelector(".player-toggle-captions"),this.domRefs.duration=s.querySelector(".duration"),this.domRefs.currentTime=s.querySelector(".current-time"),this.domRefs.progressbar=s.querySelector(".player-progressbar"),this.domRefs.preview=s.querySelector(".player-preview"),this.domRefs.progressHandle=s.querySelector(".player-progressbar-handle"),"mobile"===i&&(this.domRefs.pageFullscreen.style.display="none")}},{key:"renderCaptions",value:function(){var e=this.domRefs,i=e.playerContainer,a=(e.playerControl,t.renderString(i,this.template.captions));this.state.isCaptionsOpen||(a.style.display="none"),this.domRefs.captions=a}},{key:"renderDraft",value:function(){var e=t.renderString(this.domRefs.imageContainer,this.template.draft),i=e.getContext("2d");i.lineCap="round",this.state.contexts.push(i),this.domRefs.draft=e,this.setDraftSize()}},{key:"bindEvents",value:function(){var t=this.domRefs,e=t.audio,i=(t.canvas,t.fullscreen),a=t.pageFullscreen,s=t.playState,n=t.progressbarWrapper,o=t.playerControl,r=t.progressHandle,l=t.toggleCaptionsButton,c=t.captions,d=t.loadTip;this.handlePlayButtonClick=this.handlePlayButtonClick.bind(this),this.handleFullscreenClick=this.handleFullscreenClick.bind(this),this.handleCaptionsMove=this.handleCaptionsMove.bind(this),this.showPlayerControl=this.showPlayerControl.bind(this),this.handleCaptionsDown=this.handleCaptionsDown.bind(this),this.handleCaptionsUp=this.handleCaptionsUp.bind(this),this.toggleFullscreen=this.toggleFullscreen.bind(this),this.togglePageFullscreen=this.togglePageFullscreen.bind(this),this.handleProgressbarOver=this.handleProgressbarOver.bind(this),this.handleProgressbarleave=this.handleProgressbarleave.bind(this),this.handleSeekMousedown=this.handleSeekMousedown.bind(this),"desktop"===this.options.mode&&(o.addEventListener("mouseenter",this.showPlayerControl),o.addEventListener("mousemove",this.showPlayerControl),d.addEventListener("mouseenter",this.showPlayerControl),d.addEventListener("mousemove",this.showPlayerControl),d.addEventListener("click",this.handlePlayButtonClick),i.addEventListener("click",this.toggleFullscreen),a.addEventListener("click",this.togglePageFullscreen),n.addEventListener("mouseover",this.handleProgressbarOver),n.addEventListener("mouseleave",this.handleProgressbarleave),n.addEventListener("mousemove",this.handleProgressbarOver),r.addEventListener("mousedown",this.handleSeekMousedown),c.addEventListener("mousedown",this.handleCaptionsDown)),e.addEventListener("timeupdate",this.handleTimeUpdate.bind(this)),e.addEventListener("ended",this.handleEnded.bind(this)),s.addEventListener("click",this.handlePlayButtonClick),X.addEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),l.addEventListener("click",this.toggleCaptions.bind(this)),n.addEventListener("click",this.handleProgressbarClick.bind(this)),window.addEventListener("orientationchange",this.handleRotateScreen.bind(this)),window.addEventListener("resize",this.handleWindowResize.bind(this)),this.handlePlayerTap=this.handlePlayerTap.bind(this),this.handleProgressPanStart=this.handleProgressPanStart.bind(this),this.handleProgressPanMove=this.handleProgressPanMove.bind(this),this.handleCaptionsPress=this.handleCaptionsPress.bind(this),this.handleCaptionsPressUp=this.handleCaptionsPressUp.bind(this),this.handleCaptionsPanMove=this.handleCaptionsPanMove.bind(this);var h=new B.a(r);h.on("panstart",this.handleProgressPanStart),h.on("panleft panright",this.handleProgressPanMove);var p=new B.a(c);p.get("pan").set({direction:B.a.DIRECTION_ALL}),p.get("press").set({time:500}),p.on("press",this.handleCaptionsPress),p.on("panleft panright panup pandown",this.handleCaptionsPanMove),p.on("panend",this.handleCaptionsPressUp),new B.a(i).on("tap",this.toggleFullscreen);var u=new B.a(d);u.on("tap",this.handlePlayerTap),u.on("panstart",this.handleProgressPanStart),u.on("panleft panright",this.handleProgressPanMove)}},{key:"handleCaptionsPress",value:function(){var t=this.domRefs.captions;this.canCaptionsMove=!0,this.captionsStartX=t.offsetLeft,this.captionsStartY=t.offsetTop}},{key:"handleCaptionsPressUp",value:function(){this.canCaptionsMove=!1}},{key:"handleCaptionsPanMove",value:function(t){if(this.canCaptionsMove){var e=this.captionsStartX+t.deltaX,i=this.captionsStartY+t.deltaY;this.setCaptionsOffset(e,i)}}},{key:"handleProgressPanStart",value:function(){var t=this.domRefs.audio;this.panStartTime=t.currentTime}},{key:"handleProgressPanMove",value:function(t){var e=this.domRefs.progressbarWrapper,i=this.options.duration,a=i*(t.deltaX/e.offsetWidth),s=this.panStartTime+a;s=Math.min(i,s),s=Math.max(0,s),this.showPlayerControl(),this.changeCurrentTime(1e3*s)}},{key:"handlePlayerTap",value:function(t){t.preventDefault(),this.showPlayerControl()}},{key:"handleCaptionsDown",value:function(t){var e=this.domRefs.captions;document.addEventListener("mousemove",this.handleCaptionsMove),document.addEventListener("mouseup",this.handleCaptionsUp),this.captionsStartX=e.offsetLeft,this.captionsStartY=e.offsetTop,this.cursorStartX=t.clientX,this.cursorStartY=t.clientY}},{key:"handleCaptionsUp",value:function(){document.removeEventListener("mousemove",this.handleCaptionsMove),document.removeEventListener("mouseup",this.handleCaptionsUp)}},{key:"handleCaptionsMove",value:function(t){var e=t.clientX-this.cursorStartX,i=t.clientY-this.cursorStartY,a=this.captionsStartX+e,s=this.captionsStartY+i;this.setCaptionsOffset(a,s)}},{key:"setCaptionsOffset",value:function(t,e){var i=this.domRefs,a=i.captions,s=i.playerContainer,n=i.playerControl,o=s.offsetWidth,r=s.offsetHeight,l=o-a.offsetWidth,c=r-a.offsetHeight,d=t;d=Math.max(0,d),d=Math.min(l,d),a.style.left=d/o*100+"%";var h=r-e-a.offsetHeight;h=Math.max(n.offsetHeight,h),h=Math.min(c,h),a.style.bottom=h/r*100+"%"}},{key:"handleWindowResize",value:function(){var t=this.domRefs.playerContainer,e=t.offsetWidth;this.lastWidth&&this.lastWidth===e||this.resizePlayer(t.offsetWidth),this.lastWidth=e}},{key:"handleEnded",value:function(){this.togglePlay(),this.changeCurrentTime(0)}},{key:"handleSeekMousedown",value:function(){this.handleSeekMousemove=this.handleSeekMousemove.bind(this),this.handleSeekMouseup=this.handleSeekMouseup.bind(this),document.addEventListener("mousemove",this.handleSeekMousemove),document.addEventListener("mouseup",this.handleSeekMouseup)}},{key:"handleSeekMousemove",value:function(t){this.changeProgressbarHandle(t)}},{key:"handleSeekMouseup",value:function(){document.removeEventListener("mousemove",this.handleSeekMousemove),document.removeEventListener("mouseup",this.handleSeekMouseup)}},{key:"handleFullscreenClick",value:function(t){var e=this.domRefs.playerControl;e===t.target||e.contains(t.target)||this.handlePlayButtonClick(t)}},{key:"getFullscreenSize",value:function(){var t=window.screen,e=t.height,i=t.width,a=this.actionData,s=a.windowHeight/a.windowWidth,n=void 0;return s>e/i?n=e/s:(n=i)*s,n}},{key:"handleRotateScreen",value:function(){if(X.fullscreenElement){var t=this.getFullscreenSize();this.domRefs.playerContainer.style.width=t+"px",this.resizePlayer(t)}}},{key:"handleFullscreenChange",value:function(){var t=this.domRefs,e=t.fullscreen,i=t.pageFullscreen,a=t.playerContainer,s=this.options.mode,n=this.state,o=n.initialWidth,r=n.isPageFullscreenOpen;if(X.fullscreenElement){var l=this.getFullscreenSize();a.style.width=l+"px",this.resizePlayer(l),e.title="退出全屏","desktop"===s&&(i.style.display="none")}else a.style.width=r?"100%":o+"px",this.resizePlayer(a.offsetWidth),e.title="进入全屏","desktop"===s&&(i.style.display="inline")}},{key:"setPropotions",value:function(){var t=this.actionData,e=t.windowWidth,i=t.draftHeight,a=this.domRefs.imageContainer,s=this.state.propotions;s[0]=a.offsetWidth/e,s[1]=a.offsetHeight/i}},{key:"resizePlayer",value:function(t){var e=this.domRefs,i=e.audio,a=e.playerControl,s=e.captions,n=this.actionData,o=n.windowWidth,r=n.windowHeight/o*t,l=0,c=t;X.fullscreenElement&&(c=window.screen.width,l=(window.screen.width-t)/2),a.style.width=c+"px",a.style.transform="translateX("+-l+"px)",this.setContainerSize(t,r),this.setCanvasSize(t),this.setPropotions(),this.setDrawTarget(),this.setDraftSize(),this.changeCurrentTime(1e3*i.currentTime);var d=t/this.state.initialWidth;s.style.fontSize=this.options.captionFontSize*d+"px"}},{key:"toggleFullscreen",value:function(){var t=this.domRefs.playerContainer;X.fullscreenElement?X.exitFullscreen():X.requestFullscreen(t)}},{key:"togglePageFullscreen",value:function(){var t=this.domRefs,e=t.playerContainer,i=t.pageFullscreen;this.state.isPageFullscreenOpen=!this.state.isPageFullscreenOpen,this.state.isPageFullscreenOpen?(i.firstElementChild.style.display="none",i.lastElementChild.style.display="inline-block",e.style.width="100%",this.resizePlayer(e.offsetWidth)):(i.firstElementChild.style.display="inline-block",i.lastElementChild.style.display="none",e.style.width=this.state.initialWidth+"px",this.resizePlayer(e.offsetWidth))}},{key:"toggleCaptions",value:function(){var t=this.state.isCaptionsOpen,e=this.domRefs,i=e.toggleCaptionsButton,a=e.captions;this.state.isCaptionsOpen=!t,this.state.isCaptionsOpen?(i.classList.add("is-active"),a.style.display="block"):(i.classList.remove("is-active"),a.style.display="none")}},{key:"setContainerSize",value:function(t,e){var i=this.domRefs.imageContainer;i.style.width=t+"px",i.style.height=e+"px"}},{key:"setCanvasSize",value:function(t){var e=this.domRefs,i=e.images,a=e.canvas,s=e.playerContainer;a.width=t;var n=i.reduce(function(t,e){return Math.max(t,e.offsetHeight)},0);a.height=Math.max(n,s.offsetHeight)}},{key:"setDraftSize",value:function(){var t=this.domRefs,e=t.draft,i=t.imageContainer,a=this.actionData.draftWidth,s=this.state.propotions,n=i.offsetHeight,o=a*s[1];e.width=o,e.height=n,this.state.draftWidth=o}},{key:"handleTimeUpdate",value:function(t){this.rerenderTimeInfo();var e=1e3*t.target.currentTime;this.changeDisplaySubtitle(e)}},{key:"rerenderTimeInfo",value:function(){var e=this.domRefs,i=e.audio,a=e.currentTime,s=e.duration,n=e.progressbar,o=this.options.duration;a.textContent=t.normalizeTime(i.currentTime),s.textContent=t.normalizeTime(o),n.style.width=i.currentTime/o*100+"%"}},{key:"handleProgressbarOver",value:function(t){var e=this.domRefs.preview,i=this.options.duration,a=this.getCursorTime(t);a/=1e3,e.style.left=a/i*100+"%",e.style.visibility="visible"}},{key:"handleProgressbarleave",value:function(){this.domRefs.preview.style.visibility="hidden"}},{key:"handleProgressbarClick",value:function(t){this.changeProgressbarHandle(t)}},{key:"changeProgressbarHandle",value:function(t){var e=this.getCursorTime(t);this.changeCurrentTime(e)}},{key:"showPlayerControl",value:function(){var t=this.domRefs.playerControl;this.hidePlayerControl&&window.clearTimeout(this.hidePlayerControl),t.classList.remove("fade-out"),t.style.opacity="1",this.hidePlayerControl=window.setTimeout(this.fadeOutPlayerControl.bind(this),3e3)}},{key:"fadeOutPlayerControl",value:function(){this.state.halt||this.domRefs.playerControl.classList.add("fade-out")}},{key:"getCursorTime",value:function(t){var e=document.querySelector(".player-progressbar-wrap"),i=t.clientX-e.getBoundingClientRect().left,a=(i=Math.max(0,i))/e.clientWidth;return a=Math.min(a,1),this.options.duration*a*1e3}},{key:"handlePlayButtonClick",value:function(t){t.preventDefault(),t.stopPropagation(),this.togglePlay()}},{key:"togglePlay",value:function(){var t=this.domRefs.playState;this[this.state.halt?"play":"halt"](),this.state.halt=!this.state.halt,t.title=this.state.halt?"播放":"暂停",t.firstElementChild.className=this.state.halt?"fa fa-play":"fa fa-pause",this.showPlayerControl()}},{key:"wait",value:function(){this.setLoadingTipStatus(!0),this.halt()}},{key:"halt",value:function(){this.domRefs.audio.pause(),window.clearTimeout(this.state.nextAction),window.cancelAnimationFrame(this.state.animation)}},{key:"continue",value:function(){this.setLoadingTipStatus(!1),this.state.halt||this.domRefs.audio.play()}},{key:"play",value:function(){this.domRefs.audio.play(),this.registerNextAction(),this.registerNextAnimation()}},{key:"waitPageLoading",value:function(t,e){var i=this;this.wait(),this.state.waiting={waitingPage:t,waitingTime:e},this.domRefs.images[t].addEventListener("load",function(){var a=i.state,s=a.waiting,n=a.isLoading,o=s.waitingPage,r=s.waitingTime;n&&o===t&&e===r&&(i.continue(),i.changeCurrentTime(e))})}},{key:"changeCurrentTime",value:function(t){var e=this.domRefs.audio,i=this.state.imagesLoaded;e.currentTime=t/1e3,this.rerenderTimeInfo();var a=this.getPageByTime(t);if(i[a]){this.state.isLoading&&this.continue(),window.clearTimeout(this.state.nextAction),window.cancelAnimationFrame(this.state.animation),this.state.animationObj=null,this.pageTo(a),this.setPageState(a,t),this.setDraftState(t);var s=this.getNextAction(t);this.state.nextActionIndex=s?s.actionId:-1,this.state.halt||(this.registerNextAction(),this.registerNextAnimation()),this.changeDisplaySubtitle(t)}else this.waitPageLoading(a,t)}},{key:"registerNextAction",value:function(){var t=this,e=this.actionData.actions,i=this.domRefs.audio,a=this.state.nextActionIndex;a>=e.length||a<0||(this.state.nextAction=window.setTimeout(function(){t.handleNextAction(!0)},e[a].startTime-1e3*i.currentTime))}},{key:"registerNextAnimation",value:function(){var t=this.state.animationObj;if(t){var e=t.elaspedTime;t.startTime=Date.now()-e,this.state.animation=requestAnimationFrame(this.drawPoint.bind(this))}}},{key:"handleNextAction",value:function(t){var e=this.actionData.actions,i=e[this.state.nextActionIndex];switch(i.type){case"path":this.drawPath(i,t);break;case"arrow":this.drawArrow(i,t);break;case"scroll":this.scroll(i,t);break;case"page":this.page(i,t);break;case"withdraw":this.withdraw(i);break;case"clear":this.clear(i);break;case"eliminate":this.eliminate(i);break;case"draft":this.draft(i)}t&&this.state.nextActionIndex<e.length-1&&(++this.state.nextActionIndex,this.registerNextAction())}},{key:"handleActions",value:function(t,e){var i=this,a=this.state,s=a.nextActionIndex,n=a.ctx,o=a.propotion,r=n.canvas;t.forEach(function(a,s){if(s===t.length-1&&"path"===a.type){var l=a.startTime,c=a.endTime,d=a.points,h=c-l,p=d.length,u=Math.floor((e-l)/h*p);if(u=Math.min(u,p),n.strokeStyle=a.color,n.lineWidth=Math.max(o*a.width,1.5),i.backgroundData=n.getImageData(0,0,r.width,r.height),i.drawPoints(d,u),u>=p)i.state.animationObj=null;else{var m=h*(u/p);i.state.animationObj={points:d,startTime:Date.now()-m,duration:h,elaspedTime:m}}}else i.state.nextActionIndex=a.actionId,i.handleNextAction(!1)}),this.state.nextActionIndex=s}},{key:"drawPoints",value:function(t,e){var i=this.state,a=i.ctx,s=i.propotion;a.beginPath(),t.slice(0,e).forEach(function(t,e){var i=t[0]*s,n=t[1]*s;0===e?a.moveTo(i,n):a.lineTo(i,n)}),a.stroke()}},{key:"drawPath",value:function(t,e){var i=t.points,a=t.width,s=t.color,n=t.startTime,o=t.endTime,r=this.state,l=r.ctx,c=r.propotion;if(i.length)if(l.lineWidth=a*c,l.lineWidth=Math.max(1.5,l.lineWidth),l.strokeStyle=s,e){var d=o-n;this.backgroundData=l.getImageData(0,0,l.canvas.width,l.canvas.height),this.state.animationObj={points:i,startTime:Date.now(),duration:d,elaspedTime:0},this.state.animation=requestAnimationFrame(this.drawPoint.bind(this))}else this.drawPoints(i,i.length-1)}},{key:"drawPoint",value:function(){if(this.state.animationObj){var t=this.state.animationObj,e=t.points,i=t.startTime,a=t.duration,s=this.state,n=s.ctx,o=s.propotion,r=e.length;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.putImageData(this.backgroundData,0,0);var l=Date.now()-i,c=l/a,d=Math.ceil(e.length*c);d=Math.min(d,r),n.beginPath();for(var h=0;h<d;++h){var p=e[h],u=p[0]*o,m=p[1]*o;0===h?n.moveTo(u,m):n.lineTo(u,m)}n.stroke(),d<r?(this.state.animationObj.elaspedTime=l,this.state.animation=requestAnimationFrame(this.drawPoint.bind(this))):(this.state.animation=null,this.state.animationObj=null)}}},{key:"drawArrow",value:function(t){var e=this.state,i=e.propotion,a=e.ctx,s=t.points;a.lineWidth=t.width*i,a.fillStyle=t.color;var n=s[0][0]*i,o=s[0][1]*i,r=s[1][0]*i,l=s[1][1]*i,c=Math.sqrt(Math.pow(n-r,2)+Math.pow(o-l,2)),d=r-10*i*(o-l)/c,h=l-10*i*(r-n)/c,p=r+20*i*(r-n)/c,u=l-20*i*(o-l)/c,m=r+10*i*(o-l)/c,v=l+10*i*(r-n)/c,f=r-5*i*(o-l)/c,g=l-5*i*(r-n)/c,y=r+5*i*(o-l)/c,w=l+5*i*(r-n)/c;a.beginPath(),a.moveTo(n,o),a.lineTo(f,g),a.lineTo(d,h),a.lineTo(p,u),a.lineTo(m,v),a.lineTo(y,w),a.fill()}},{key:"clear",value:function(){var t=this.state.ctx;t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"eliminate",value:function(t){if(this.state.isdraftOpen)this.setDraftState(t.startTime+1);else{var e=this.getPageByTime(t.startTime);this.setPageState(e,t.startTime+1)}}},{key:"withdraw",value:function(t){if(this.state.isdraftOpen)this.setDraftState(t.startTime+1);else{var e=this.getPageByTime(t.startTime);this.setPageState(e,t.startTime+1)}}},{key:"draft",value:function(t){this.toggleDraft("open"===t.status,!0)}},{key:"toggleDraft",value:function(t,e){var i=this.domRefs.draft;i.style.transition=e?"width 0.2s linear":"none",t?(i.style.width=this.state.draftWidth+"px",this.state.isdraftOpen=!0):(i.style.width="0",this.state.isdraftOpen=!1),this.setDrawTarget()}},{key:"setDrawTarget",value:function(){var t=this.state,e=t.isdraftOpen,i=t.draftNum,a=t.propotions,s=t.contexts,n=0,o=0;e&&(n=i,o=1),this.state.ctx=s[n],this.state.propotion=a[o]}},{key:"scroll",value:function(t,e){var i=this.domRefs,a=i.images,s=i.canvas,n=this.options.scrollDuration,o=this.state.propotion,r=a[this.getPageByTime(t.startTime)],l=t.yDistance*o,c=0,d=r.style.transform.match(/translateY\(-(.*)px\)/);d&&(c=window.parseInt(d[1],10));var h=Math.abs(c-l)/r.offsetHeight*o*n;e?(r.style.transition="transform "+h+"s linear",s.style.transition="transform "+h+"s linear"):(r.style.transition="",s.style.transition=""),r.style.transform="translateY("+-l+"px)",s.style.transform="translateY("+-l+"px)"}},{key:"page",value:function(t,e){var i=this.domRefs.pages,a=this.getPageByTime(t.startTime)+("next"===t.direction?1:-1);a>=i.length||a<0||(this.state.imagesLoaded[a]?(this.pageTo(a,e),this.setPageState(a,t.startTime)):this.waitPageLoading(a,t.startTime-1))}},{key:"setPageState",value:function(t,e){var i=this.domRefs.images;this.state.isdraftOpen=!1,this.setDrawTarget();var a=this.state.ctx,s=a.canvas;a.clearRect(0,0,s.width,s.height),s.style.transform="translateY(0px)",i[t].style.transform="translateY(0px)";var n=this.getDrawActionsOnPage(t,e);this.handleActions(n,e)}},{key:"setDraftState",value:function(t){this.state.isdraftOpen=!0,this.setDrawTarget();var e=this.state.ctx;e.clearRect(0,0,e.canvas.width,e.canvas.height);var i=this.getActionsOnDraft(t);this.handleActions(i,t),this.state.isdraftOpen="open"===this.getDraftStatus(t),this.toggleDraft(this.state.isdraftOpen,!1)}},{key:"getDraftStatus",value:function(t){for(var e=this.actionData.actions,i="close",a=0;a<e.length&&t>e[a].startTime;++a){var s=e[a];"draft"===s.type&&(i=s.status)}return i}},{key:"getActionsOnDraft",value:function(e){for(var i=this.actionData.actions,a=[],s=!1,n=0;n<i.length&&e>i[n].startTime;++n){var o=i[n];"draft"!==o.type?s&&a.push(o):s="open"===o.status}return t.filterActions(a)}},{key:"pageTo",value:function(t,e){this.domRefs.pages.forEach(function(i){i.style.transition=e?"transform 0.2s ease":"none",i.style.transform="translateY(-"+i.offsetHeight*t+"px)"})}},{key:"getPageByTime",value:function(t){for(var e=this.actionData.actions,i=0,a=0;a<e.length&&e[a].startTime<t;++a)"page"===e[a].type&&(i+="prev"===e[a].direction?-1:1);return i}},{key:"getDrawActionsOnPage",value:function(e,i){return t.filterActions(this.getActionsOnPage(e,i))}},{key:"getActionsOnPage",value:function(t,e){for(var i=this.actionData.actions,a=0,s=[],n=!1,o=0;o<i.length&&i[o].startTime<e;++o){var r=i[o];"draft"!==r.type?(a!==t||n||s.push(r),"page"===r.type&&(a+="next"===r.direction?1:-1)):n="open"===r.status}return s}},{key:"getNextAction",value:function(t){for(var e=this.actionData.actions,i=0;i<e.length;++i){if(e[i].startTime>=t)return e[i]}}},{key:"changeDisplaySubtitle",value:function(t){var e=this.state,i=e.subtitles,a=e.isCaptionsOpen,s=e.currentSubtitleIndex,n=this.domRefs,o=n.playerContainer,r=n.captions;if(i.length){var l=-1,c=!1,d=void 0;for(d=parseFloat(i[s].beginTime)>t?0:s;d<i.length&&parseFloat(i[d].beginTime)<=t;++d)if(parseFloat(i[d].endTime)>=t){c=!0,l=d;break}c||(l=Math.min(i.length-1,d)),a&&(c?(r.style.display="block",r.lastElementChild.textContent=i[l].text):r.style.display="none");var h=new CustomEvent("subtitlechange",{detail:{hasSubtitle:c,subtitleIndex:l}});o.dispatchEvent(h),this.state.currentSubtitleIndex=l}}},{key:"updateSubtitles",value:function(t){this.state.subtitles=t}},{key:"unmount",value:function(){var t=this.domRefs.playerContainer;t.parentNode.removeChild(t)}}],[{key:"filterActions",value:function(t){for(var e=["arrow","scroll","path","clear","eliminate"],i=["arrow","path","clear","eliminate"],a=[],s=[],n=0;n<t.length;++n){var o=t[n];if(-1!==e.indexOf(o.type)){var r=!1;if(-1!==i.indexOf(o.type))for(var l=1,c=n+1;c<t.length&&"page"!==t[c].type;++c){if("withdraw"===t[c].type&&!--l){r=!0;break}-1!==i.indexOf(t[c].type)&&++l}r||("eliminate"===o.type?s=s.concat(o.eliminateIds):a.push(o))}}return a.filter(function(t){return!t.id||-1===s.indexOf(t.id)})}},{key:"normalizeTime",value:function(t){t=Math.floor(t);var e=Math.floor(t/3600),i=t%3600,a=Math.floor(i/60),s=i%60,n="";return n+=e?e+":":"",e&&a<10&&(n+="0"),n+=a+":",s<10&&(n+="0"),n+=s}},{key:"renderString",value:function(t,e){var i=document.createElement("div");return i.innerHTML=e,t.appendChild(i.firstElementChild),t.lastElementChild}}]),t}(),K={name:"Player",data:function(){return{accountId:-1,activeSubtitleIndex:-1,comments:[],docId:"",player:{},score:-1,selected:"comment",subtitleContainerPaddingTop:null,subtitles:[],teacherInformation:{},title:"课程名称"}},components:{MyHeader:f,Comment:S,Score:R,Subtitles:F},mounted:function(){var t=this;this.$route.params.id&&(this.docId=this.$route.params.id,this.$http.get("/players/"+this.docId).then(function(e){var i=e.data,a=i.accounts,s=i.comments,n=i.doc,o=n.accountId,r=n.action,l=n.defaultAction,c=n.name,d=n.pictures,h=n.ratingStatis,p=h.star1,u=h.star2,m=h.star3,v=h.star4,f=h.star5;t.accountId=o,t.teacherInformation=a.find(function(e){return e.id===t.accountId}),t.title=c,t.comments=s,t.comments.forEach(function(t){var e=a.find(function(e){return e.id===t.accountId});t.userName=e.name||e.nickname,t.avatar=e.avatar});var g=r.find(function(t){return t.id===l});t.subtitles=g.subtitle,t.score=(p+2*u+3*m+4*v+5*f)/(p+u+m+v+f),t.score=window.isNaN(t.score)?-1:t.score,t.player=new J({actionUrl:g.json,audioUrl:g.recording,duration:g.duration,element:document.getElementById("player"),imageUrls:d,mode:"mobile",size:g.totalSize,subtitles:g.subtitle})}).catch(function(t){alert("获取数据错误，请检查访问地址")}))},methods:{handleOnSubtitleChange:function(t){this.activeSubtitleIndex=t},handleOnSetSubtitleContainerPaddingTop:function(){this.subtitleContainerPaddingTop=this.$refs.playerWrapper.offsetHeight}},watch:{}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{ref:"playerWrapper",style:"subtitles"===t.selected?{position:"fixed",left:"0",top:"0",zIndex:"100",width:"100%"}:void 0},[i("MyHeader",{attrs:{title:t.title}}),t._v(" "),i("div",{attrs:{id:"player"},on:{actionsLoaded:t.handleOnSetSubtitleContainerPaddingTop,subtitlechange:t.handleOnSubtitleChange}}),t._v(" "),i("mt-navbar",{staticClass:"selectToolBar",model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[i("mt-tab-item",{attrs:{id:"comment"}},[i("span",{staticStyle:{"font-size":"18px",color:"#666","font-weight":"800"},style:"comment"===t.selected?{color:"#418642"}:void 0},[t._v("\n          评论\n        ")])]),t._v(" "),i("mt-tab-item",{attrs:{id:"subtitles"}},[i("span",{staticStyle:{"font-size":"18px",color:"#666","font-weight":"800"},style:"subtitles"===t.selected?{color:"#418642"}:void 0},[t._v("\n          字幕\n        ")])])],1)],1),t._v(" "),i("mt-tab-container",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[i("mt-tab-container-item",{attrs:{id:"subtitles"}},[i("Subtitles",{style:{paddingTop:t.subtitleContainerPaddingTop?t.subtitleContainerPaddingTop+"px":void 0},attrs:{subtitles:t.subtitles,activeSubtitleIndex:t.activeSubtitleIndex}})],1),t._v(" "),i("mt-tab-container-item",{attrs:{id:"comment"}},[i("Score",{attrs:{accountId:t.accountId,score:t.score,teacherInformation:t.teacherInformation}}),t._v(" "),i("Comment",{attrs:{docId:t.docId,comments:t.comments},on:{"update:comments":function(e){t.comments=e}}})],1)],1)],1)},staticRenderFns:[]};var tt=i("VU/8")(K,$,!1,function(t){i("mTb6")},"data-v-e71d589e",null).exports,et={name:"Teacher",data:function(){return{id:this.$route.params.id,libraries:[],title:"教师主页"}},created:function(){this.pageInite()},methods:{pageInite:function(){var t=this;n.Indicator.open(),this.$http.get("/accounts/docs").then(function(e){t.libraries=e.data.libraries,n.Indicator.close()})},pop:function(){Object(n.Toast)({message:"该课程已关闭",iconClass:"icon",position:"bottom"})}},components:{MyHeader:f}},it={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("MyHeader",{attrs:{pageName:t.title}}),t._v(" "),a("div",{staticClass:"information"},[a("div",{staticClass:"message"},[a("mt-swipe",{staticClass:"mySwipe",attrs:{auto:0,continuous:!1}},[a("mt-swipe-item",[a("img",{staticClass:"photo",attrs:{src:i("PTPz")}}),t._v(" "),a("h3",{staticStyle:{color:"#FFFFFF"}},[t._v("蜗牛老师")]),t._v(" "),a("h5",{staticStyle:{color:"#c7c7c7"}},[t._v("web前端工程师")])]),t._v(" "),a("mt-swipe-item",[a("h4",{staticStyle:{color:"rgb(232, 232, 232)"}},[t._v("这是一段介绍")]),t._v(" "),a("p",{staticStyle:{color:"rgb(232, 232, 232)","padding-top":"15px"}},[t._v("\n            《Sass与Compass实战》共分为10章，旨在完整介绍两个工具：Sass和Compass，从而引领读者通过框架高效地构建样式表，创建动态页面。\n          ")])])],1)],1),t._v(" "),a("img",{staticClass:"backgroundImage",attrs:{src:i("PTPz")}})]),t._v(" "),a("div",{staticClass:"courseList"},t._l(t.libraries,function(e){return a("div",{staticClass:"coursesCell"},[a("router-link",{staticClass:"link",attrs:{to:"/course/"+e.id}},[a("div",{staticClass:"imgcontainer"},[a("div",{staticClass:"image"},[a("img",{staticClass:"image",attrs:{src:e.cover,onerror:'this.style.display="none"'}})])]),t._v(" "),a("div",{staticClass:"msgcontainer"},[a("span",{staticClass:"courseName"},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"alt"},[t._v(t._s(e.docs.length)+"个文档")])])]),t._v(" "),a("hr",{staticClass:"hr1"})],1)}))],1)},staticRenderFns:[]};var at=i("VU/8")(et,it,!1,function(t){i("Sx0e")},"data-v-e1b72fb0",null).exports;r.default.use(p.a);var st=new p.a({mode:"history",routes:[{path:"/",redirect:"/teacher"},{path:"/teacher",name:"teacher",component:at},{path:"/course/:id",name:"course",component:b},{path:"/player/:id",name:"player",component:tt}]}),nt=void 0,ot=document.cookie.match(/qingtoken=(QJWT [\w\.\-]+)/);document.cookie="qingtoken=none; expires="+new Date(0)+";",ot?(nt=ot[1],window.localStorage.setItem("token",ot[1])):nt=window.localStorage.getItem("token"),c.a.defaults.baseURL="/api/v1",c.a.defaults.headers.common.Authorization=nt,c.a.interceptors.response.use(function(t){return t},function(t){var e=t.response;if(401===(e=void 0===e?{}:e).status&&window.location.pathname.startsWith("/player/")){var i=window.encodeURIComponent(window.location.pathname);window.location.assign("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxa53771df5d04e3d3&redirect_uri=https%3A%2F%2Fmobile.mamasousuo.com%2Fapi%2Fv1%2Fauthentication%2Fmobile&response_type=code&scope=snsapi_userinfo&state={{}}#wechat_redirect".replace(/\{\{.*?\}\}/,i))}return s.a.reject(t)}),r.default.config.productionTip=!1,r.default.prototype.$http=c.a,r.default.use(o.a),new r.default({el:"#app",components:{App:h},router:st,template:"<App />"})},PTPz:function(t,e,i){t.exports=i.p+"static/img/teacher.b099d55.jpeg"},SFlG:function(t,e){},Sx0e:function(t,e){},VOwn:function(t,e){},"d8/S":function(t,e){},iXdq:function(t,e){},mTb6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.21b50daed268be32cf2f.js.map