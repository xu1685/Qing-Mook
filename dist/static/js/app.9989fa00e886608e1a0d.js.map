{"version":3,"sources":["webpack:///./src/assets/bigLogo.png","webpack:///./src/App.vue?8fb5","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/containers/MyHeader/index.vue?a2ed","webpack:///./src/containers/MyHeader/index.vue","webpack:///src/containers/MyHeader/index.vue","webpack:///./src/utils/weixin.js","webpack:///src/containers/Course/index.vue","webpack:///./src/containers/Course/index.vue?0672","webpack:///./src/containers/Course/index.vue","webpack:///./src/containers/Player/Player/lib/fscreen.js","webpack:///./src/containers/Player/Player/src/Player.js","webpack:///src/containers/Player/Comment/index.vue","webpack:///./src/containers/Player/Comment/index.vue?bf83","webpack:///./src/containers/Player/Comment/index.vue","webpack:///src/containers/Player/Score/index.vue","webpack:///./src/containers/Player/Score/index.vue?ee06","webpack:///./src/containers/Player/Score/index.vue","webpack:///src/containers/Player/Subtitles/index.vue","webpack:///./src/containers/Player/Subtitles/index.vue?35e3","webpack:///./src/containers/Player/Subtitles/index.vue","webpack:///src/containers/Player/index.vue","webpack:///./src/containers/Player/index.vue?00fb","webpack:///./src/containers/Player/index.vue","webpack:///src/containers/Teacher/index.vue","webpack:///./src/containers/Teacher/index.vue?a4ce","webpack:///./src/containers/Teacher/index.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/utils/constants.js","webpack:///./src/assets/defaultClassCover.png","webpack:///./src/utils/browser.js"],"names":["module","exports","__webpack_require__","p","selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","normalizeComponent","ssrContext","containers_MyHeader","staticClass","title","slot","on","click","back","icon","src_containers_MyHeader","MyHeader_normalizeComponent","remainRequestNumber","weixin_initWeiXinShareConfig","currentURL","axios_default","a","get","then","respones","window","jWeixin","config","debug","appId","timestamp","data","nonceStr","noncestr","signature","jsApiList","error","put","configWeiXinShare","_ref4","desc","link","imgUrl","_ref","onMenuShareTimeline","fail","alert","configShareTimeline","_ref2","onMenuShareAppMessage","configShareAppMessage","_ref3","onMenuShareQQ","configShareQQ","Course","accountId","defaultClassCoverPng","defaultClassCover_default","_this","$http","_ref$data","accounts","coopDocs","coopLibraries","docs","libraries","libraryId","docId","doc","status","transformed","hasAction","close","name","cover","nickname","introduction","href","authorIntroduction","coverURL","catch","computeScore","star1","star2","star3","star4","star5","score","MyHeader","containers_Course","_vm","_v","_s","library","style","backgroundSize","backgroundPosition","backgroundRepeat","backgroundImage","isDefault","_l","course","key","to","path","ratingStatis","staticStyle","font-size","color","width","margin-top","_e","display","src","margin-left","view","commentNums","src_containers_Course","Course_normalizeComponent","fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror","webkit","moz","ms","fscreen_document","document","vendor","keys_default","fscreen","element","requestFullscreenFunction","bind","addEventListener","type","handler","options","removeEventListener","Boolean","val","onfullscreenchange","toLowerCase","onfullscreenerror","Player","actionUrl","audioUrl","duration","imageUrls","_ref$mode","mode","undefined","size","subtitles","classCallCheck_default","actionData","actions","draftHeight","draftWidth","windowHeight","windowWidth","domRefs","audio","images","imageContainer","playerContainer","scrollDuration","autoPlay","captionFontSize","state","audioLoadStatus","isImagesLoaded","Array","length","nextAction","nextActionIndex","animation","animationObj","isHalted","isLoading","isPageFullscreenOpen","isdraftOpen","draftNum","contexts","propotions","propotion","ctx","currentSubtitleIndex","isCaptionsOpen","initialWidth","offsetWidth","waiting","waitingPage","waitingTime","hammers","template","playerControl","normalizeTime","loadTip","Math","round","draft","captions","fetchActions","fetchImages","map","action","index","extends_default","actionId","endTime","parseFloat","points","point","x","y","startTime","target","parseInt","yDistance","sort","prev","next","baseURL","responseType","response","formatActionData","renderContainer","renderImages","_actionData","container","createElement","className","containerWidth","containerHeight","height","appendChild","loadTipElem","renderStringToNode","loading","querySelector","event","CustomEvent","dispatchEvent","fetchSource","loadButton","fetchAudio","firstElementChild","lastElementChild","audioElement","handleAudioLoaded","_this2","imageNameRegExp","Number","match","imageWidth","handleImageLoaded","imageElement","Image","handleFirstImageLoaded","_this3","checkSrcLoadStatus","forEach","imageElem","e","canPlay","setLoadingTipStatus","initHtml","bindEvents","setDrawTarget","setPropotions","changeCurrentTime","togglePlay","showPlayerControl","renderCanvas","renderPlayerControl","renderCaptions","renderAudio","renderDraft","_this4","_domRefs","pages","fragment","createDocumentFragment","image","section","classList","add","push","canvas","setCanvasSize","getContext","lineCap","_domRefs2","playerControlTemplate","progressbarWrapper","playState","fullscreen","pageFullscreen","toggleCaptionsButton","currentTime","progressbar","preview","progressHandle","captionsNode","setDraftSize","_domRefs3","handlePlayButtonClick","handleFullscreenClick","handleCaptionsMove","handleCaptionsDown","handleCaptionsUp","handlePageFullscreenClick","handleProgressbarOver","handleProgressbarleave","handleSeekMousedown","handleTimeUpdate","handleEnded","handleFullscreenChange","handleCaptionButtonClick","handleProgressbarClick","handleRotateScreen","handleWindowResize","handlePlayerTap","handleProgressPanStart","handleProgressPanMove","handleCaptionsPress","handleCaptionsPressUp","handleCaptionsPanMove","handlePlayerDoubleTap","handleHammer","hammer_default","captionsHammer","set","direction","DIRECTION_ALL","time","loadTipHammer","Manager","Tap","taps","recognizeWith","requireFailure","canCaptionsMove","captionsStartX","offsetLeft","captionsStartY","offsetTop","left","deltaX","top","deltaY","setCaptionsOffset","panStartTime","deltaTime","min","max","preventDefault","cursorStartX","clientX","cursorStartY","clientY","distX","distY","_domRefs4","parentWidth","parentHeight","offsetHeight","captionsLeftMax","captionsBottomMax","leftOffset","bottomOffset","bottom","currentWidth","lastWidth","resizePlayer","handleSeekMousemove","handleSeekMouseup","changeProgressbarHandle","_window$screen","screen","_actionData2","propotion2","getFullscreenSize","_domRefs5","_state","fullscreenSize","_actionData3","_domRefs6","_actionData4","translateX","controlWidth","transform","setContainerSize","fontSize","_domRefs7","_domRefs8","remove","_domRefs9","reduce","cur","_domRefs10","rerenderTimeInfo","changeDisplaySubtitle","_domRefs11","durationEl","textContent","getCursorTime","visibility","hidePlayerControl","clearTimeout","opacity","setTimeout","fadeOutPlayerControl","wrapper","dist","getBoundingClientRect","percent","clientWidth","stopPropagation","halt","pause","cancelAnimationFrame","play","registerNextAction","registerNextAnimation","_this5","wait","_state2","currentWaitingPage","currentWaitingTime","continue","page","getPageByTime","pageTo","setPageState","setDraftState","getNextAction","waitPageLoading","_this6","handleNextAction","elaspedTime","Date","now","requestAnimationFrame","drawPoint","needRegist","drawPath","drawArrow","scroll","withdraw","clear","eliminate","_this7","_state3","i","cnt","floor","strokeStyle","lineWidth","backgroundData","getImageData","drawPoints","end","_state4","beginPath","slice","moveTo","lineTo","stroke","animate","_state5","_state$animationObj","_state6","clearRect","putImageData","ceil","k","_state7","fillStyle","x1","y1","x2","y2","r","sqrt","pow","aX","aY","bX","bY","cX","cY","dX","dY","eX","eY","fill","currentPage","toggleDraft","open","transition","_state8","ctxIndex","propIndex","_domRefs12","offsetY","orginOffset","tmp","abs","targetPage","getDrawActionsOnPage","handleActions","draftActions","getActionsOnDraft","getDraftStatus","res","filterActions","targetIndex","getActionsOnPage","_state9","_domRefs13","hasSubtitle","beginTime","text","detail","subtitleIndex","_domRefs14","_state10","firstChild","removeChild","_state$hammers","destroy","includeTypes","withdrawTypes","eliminatedIds","indexOf","j","concat","eliminateIds","filter","hours","remain","minutes","seconds","parent","string","elem","innerHTML","Comment","String","comments","FormData","activeCommentIndex","replies","myComment","file","post","formData","removeUploadImages","files","confirmUploadImages","replyText","commentList","replyFormData","approve","commentId","getSeconds","number","replyId","Player_Comment","placeholder","disableClear","model","value","callback","$$v","expression","preview0","$event","isShowUploadImagesDialog","background-color","confirmComment","comment","avatar","userName","margin-right","approveHandle","img","showImg","formatTime","createTime","handleOnReply","userType","handleOnDeleteComment","popup-transition","padding-bottom","align-items","border-radius","border","preview1","preview2","padding-left","padding-right","clickUploadImageInputForComment","ref","accept","multiple","domProps","inputImage","change","handleInputChange","justify-content","align-self","cancelUploadImages","Object","keys","commentObj","position","replyVisible","margin-bottom","approveL","replyList","reply","originUserName","handleOnDeleteReply","rrVisible","text-align","margin","clickUploadImageInputForReply","confirmReply","cancleReply","showImgVisible","showImgUrl","containers_Player_Comment","Comment_normalizeComponent","Score","Player_Score","font-weight","teacherInformation","containers_Player_Score","Score_normalizeComponent","Subtitles","clientHeight","Player_Subtitles","subtitleContainerMarginTop","marginTop","subtitle","activeSubtitleIndex","refInFor","class","activeSubtitle","formatDuring","containers_Player","Subtitles_normalizeComponent","_respones$data","_respones$data$doc","defaultAction","pictures","_respones$data$doc$ra","sourceId","json","recording","totalSize","handleOnSetSubtitleContainerMarginTop","myInformation","delete","selectortype_template_index_0_src_containers_Player","selected","zIndex","actionsLoaded","subtitlechange","handleOnSubtitleChange","borderBottom","addCommentSuccess","handleOnAddCommentSuccess","addReplySuccess","handleOnAddReplySuccess","src_containers_Player","Player_normalizeComponent","Teacher","defaultTeacherCover","bigLogo_default","authorName","containers_Teacher","documentNumberForEachLibrary","src_containers_Teacher","Teacher_normalizeComponent","vue_esm","use","vue_router_esm","router","routes","component","$browser","Browser","navigator","userAgent","token","result","cookie","localStorage","setItem","getItem","defaults","headers","common","Authorization","interceptors","_error$config","method","url","_error$response","toUpperCase","endsWith","console","log","location","pathname","startsWith","originURL","encodeURIComponent","redirectURL","replace","browser","assign","copy_to_clipboard_default","message","promise_default","reject","productionTip","prototype","mint_ui_common_default","el","components","App","root","factory","_window","_navigator","_mime","option","mimeTypes","mt","u","Trident","Presto","WebKit","Gecko","Safari","Chrome","IE","Edge","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360EE","360SE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","TheWorld","XiaoMi","Quark","Qiyu","Wechat","Taobao","Alipay","Weibo","Douban","Suning","iQiYi","Windows","Linux","Mac OS","Android","Ubuntu","FreeBSD","Debian","Windows Phone","BlackBerry","MeeGo","Symbian","iOS","Chrome OS","WebOS","Mobile","Tablet","is360","chrome","chrome_vision","showModalDialog","screenTop","screenY","arr","hash","engine","os","device","s","language","browserLanguage","split","join","osVersion","v","6.4","6.3","6.2","6.1","6.0","5.2","5.1","5.0","version","55","45","42","31","21","63","50","30","57","49","46","39","34","29","define","cmd","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default"],"mappings":"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","file":"static/js/app.9989fa00e886608e1a0d.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/bigLogo.eeaf69c.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/bigLogo.png\n// module id = +EMP\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0ba5c691\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0ba5c691\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0ba5c691\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id='app'>\r\n    <router-view />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'App',\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  width: 100%;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mt-header',{staticClass:\"header\",attrs:{\"title\":_vm.title}},[_c('a',{attrs:{\"slot\":\"left\"},on:{\"click\":_vm.back},slot:\"left\"},[_c('mt-button',{attrs:{\"icon\":\"back\"}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3246f62e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/MyHeader/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3246f62e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3246f62e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3246f62e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/MyHeader/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <mt-header\r\n    class=\"header\"\r\n    :title=\"title\"\r\n  >\r\n    <a @click=\"back\" slot=\"left\">\r\n      <mt-button icon=\"back\" />\r\n    </a>\r\n  </mt-header>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'MyHeader',\r\n\r\n  props: [\r\n    'title',\r\n  ],\r\n\r\n  methods: {\r\n    back() {\r\n      this.$router.back()\r\n    },\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.header {\r\n  background-color: #FFF;\r\n  color: #000;\r\n  font-size: 18px;\r\n  width: 100%;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/containers/MyHeader/index.vue","import axios from 'axios'\r\n\r\n/* 剩余请求次数 */\r\nlet remainRequestNumber = 2\r\n\r\nconst initWeiXinShareConfig = (currentURL) => {\r\n  /* 首先通过 GET 方法向后端发送配置数据请求信息 */\r\n  axios\r\n    .get(`authentication/signature?url=${currentURL}`)\r\n    .then((respones) => {\r\n      /* 配置微信 SDK */\r\n      window.jWeixin.config({\r\n        debug     : false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n        appId     : 'wxa53771df5d04e3d3', // 必填，公众号的唯一标识\r\n        timestamp : respones.data.timestamp, // 必填，生成签名的时间戳\r\n        nonceStr  : respones.data.noncestr, // 必填，生成签名的随机串\r\n        signature : respones.data.signature,// 必填，签名\r\n        jsApiList : ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ'] // 必填，需要使用的JS接口列表\r\n      })\r\n    })\r\n\r\n  /* 如果配置出错，则发送 PUT 方法重新发送配置数据请求信息 */\r\n  window.jWeixin.error(function (error) {\r\n    /* 如果剩余请求次数大于零，则重新发起请求 */\r\n    if (remainRequestNumber-- > 0) {\r\n      axios\r\n        .put(`authentication/signature?url=${currentURL}`)\r\n        .then((respones) => {\r\n          /* 配置微信 SDK */\r\n          window.jWeixin.config({\r\n            debug     : false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n            appId     : 'wxa53771df5d04e3d3', // 必填，公众号的唯一标识\r\n            timestamp : respones.data.timestamp, // 必填，生成签名的时间戳\r\n            nonceStr  : respones.data.noncestr, // 必填，生成签名的随机串\r\n            signature : respones.data.signature,// 必填，签名\r\n            jsApiList : ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ'] // 必填，需要使用的JS接口列表\r\n          })\r\n        })\r\n    }\r\n  })\r\n}\r\n\r\n/* 配置微信的分享到朋友圈操作 */\r\nconst configShareTimeline = ({\r\n  title,\r\n  link,\r\n  imgUrl,\r\n}) => {\r\n  window.jWeixin.onMenuShareTimeline({\r\n    title,\r\n    link,\r\n    imgUrl,\r\n    fail: function () {\r\n      alert('分享到朋友圈失败，请刷新页面重试')\r\n    },\r\n  })\r\n}\r\n\r\n/* 配置微信的分享给朋友操作 */\r\nconst configShareAppMessage = ({\r\n  title,\r\n  desc,\r\n  link,\r\n  imgUrl,\r\n}) => {\r\n  window.jWeixin.onMenuShareAppMessage({\r\n    title,\r\n    desc,\r\n    link,\r\n    imgUrl,\r\n    fail: function () {\r\n      alert('分享给朋友失败，请刷新页面重试')\r\n    },\r\n  })\r\n}\r\n\r\n/* 配置微信的分享到 QQ 操作 */\r\nconst configShareQQ = ({\r\n  title,\r\n  desc,\r\n  link,\r\n  imgUrl,\r\n}) => {\r\n  window.jWeixin.onMenuShareQQ({\r\n    title,\r\n    desc,\r\n    link,\r\n    imgUrl,\r\n    fail: function () {\r\n      alert('分享到 QQ 失败，请刷新页面重试')\r\n    },\r\n  })\r\n}\r\n\r\nconst configWeiXinShare = ({\r\n  title,\r\n  desc,\r\n  link,\r\n  imgUrl,\r\n}) => {\r\n  configShareTimeline({\r\n    title,\r\n    link,\r\n    imgUrl,\r\n  })\r\n  configShareAppMessage({\r\n    title,\r\n    desc,\r\n    link,\r\n    imgUrl,\r\n  })\r\n  configShareQQ({\r\n    title,\r\n    desc,\r\n    link,\r\n    imgUrl,\r\n  })\r\n}\r\n\r\n/* eslint-disable */\r\nexport {\r\n  configShareTimeline,\r\n  configShareAppMessage,\r\n  configShareQQ,\r\n  configWeiXinShare,\r\n  initWeiXinShareConfig,\r\n}\r\n/* eslint-disable */\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/weixin.js","<template>\r\n  <div class='coursePage'>\r\n    <MyHeader title='【课程专辑】' />\r\n    <div class='container'>\r\n      <div class='message'>\r\n        <h2 class='coursetitle'>{{library.name}}</h2>\r\n        <div\r\n          class='blackMask'\r\n          :style='{\r\n            backgroundSize: \"cover\",\r\n            backgroundPosition: \"center\",\r\n            backgroundRepeat: \"no-repeat\",\r\n            backgroundImage: library.isDefault ? `url(${defaultClassCoverPng})` : (library.cover || defaultClassCoverPng)\r\n          }'\r\n        />\r\n      </div>\r\n      <hr class='hr1'>\r\n      <div class='courseCell' v-for='course in courseList' :key='course.id'>\r\n        <router-link\r\n          class='link'\r\n          :to='{ path: \"/player/\" + course.id  }'\r\n        >\r\n          <div class='imgcon'>\r\n            <div class='msg'>\r\n              <i\r\n                class='fa fa-star'\r\n                style='\r\n                  font-size: 20px;\r\n                  color: #fbe359;\r\n                  width: 110px;\r\n                  margin-top: 20px;\r\n                '\r\n                v-if='computeScore(course.ratingStatis) !== -1'\r\n              >\r\n                {{computeScore(course.ratingStatis)}}\r\n              </i>\r\n              <span\r\n                style='\r\n                  font-size: 20px;\r\n                  color: white;\r\n                  width: 110px;\r\n                  margin-top: 20px;\r\n                  display: inline-block;\r\n                '\r\n                v-if='computeScore(course.ratingStatis) === -1'\r\n              >\r\n                暂无评分\r\n              </span>\r\n            </div>\r\n            <div class='blackblock'></div>\r\n            <div class='classImg'>\r\n              <img class='classImg' :src='course.cover' >\r\n            </div>\r\n          </div>\r\n          <div class='msgcontainer'>\r\n            <div style='display: inline-block;'>\r\n              <span class='className'>{{course.name}}</span>\r\n            </div>\r\n            <div class='icons'>\r\n              <i  class='fa fa-caret-square-o-right' />\r\n              <span style='display: inline-block;margin-left: 5px;'>{{course.view}}</span>\r\n              <i style='margin-left: 15px;' class='fa fa-commenting-o' />\r\n              <span style='display: inline-block;margin-left: 5px;'>{{course.commentNums}}</span>\r\n            </div>\r\n          </div>\r\n        </router-link>\r\n        <hr class='hr1'>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { Indicator } from 'mint-ui'\r\nimport MyHeader from '../MyHeader'\r\nimport defaultClassCoverPng from '../../assets/defaultClassCover.png'\r\nimport {\r\n  configWeiXinShare,\r\n  initWeiXinShareConfig,\r\n} from '../../utils/weixin'\r\n\r\nexport default {\r\n  name: 'course',\r\n\r\n  data() {\r\n    return {\r\n      accountId: this.$route.query.accountId,\r\n      action: [],\r\n      allDcos: [],\r\n      courseList: [],\r\n      cover: '',\r\n      defaultClassCoverPng,\r\n      docs: [],\r\n      library: {},\r\n      libraryId: this.$route.params.id,\r\n      name: '课堂主页',\r\n      teacherInformation: {},\r\n      title: '课程列表',\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    Indicator.open('获取课堂数据中')\r\n\r\n    this\r\n      .$http\r\n      .get(`/players/accounts/${this.accountId}`)\r\n      .then(({\r\n        data: {\r\n          accounts,\r\n          coopDocs,\r\n          coopLibraries,\r\n          docs,\r\n          libraries,\r\n        },\r\n      }) => {\r\n        const allLibraries = libraries.concat(coopLibraries)\r\n        const allDocs = docs.concat(coopDocs)\r\n\r\n        this.library = allLibraries.find((library) => library.id === this.libraryId)\r\n\r\n        this.teacherInformation = accounts.find((user) => String(user.id) === this.accountId)\r\n\r\n        this.library.chapters.reduce((result, chapter) => {\r\n          return result.concat(chapter.docs)\r\n        }, this.library.docs).forEach((docId) => {\r\n          const doc = allDocs.find((_doc) => _doc.id === docId)\r\n          if (\r\n            doc &&\r\n            doc.status == 'open' &&\r\n            doc.transformed == '1' &&\r\n            doc.hasAction\r\n          ) {\r\n            this.courseList.push(doc)\r\n          }\r\n        })\r\n\r\n        Indicator.close()\r\n\r\n        /* 只有处于生产环境才执行微信 JS-SDK 的初始化操作 */\r\n        if (process.env.NODE_ENV === 'production') {\r\n          const title = this.library.name\r\n          const coverURL = this.library.cover\r\n          const authorName = this.teacherInformation.name || this.teacherInformation.nickname\r\n          const authorIntroduction = this.teacherInformation.introduction\r\n\r\n          /* 初始化微信 JS-SDK 配置 */\r\n          initWeiXinShareConfig(window.encodeURIComponent(window.location.href))\r\n\r\n          /* 等待微信 JS-SDK 可以使用后自定义分享相关的操作 */\r\n          window.jWeixin.ready(function() {\r\n            configWeiXinShare({\r\n              title  : `${authorName}:《${title}》专辑`,\r\n              desc   : `${authorIntroduction}`,\r\n              link   : window.location.href,\r\n              imgUrl : coverURL,\r\n            })\r\n          })\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (process.env.NODE_ENV === 'development') {\r\n          throw error\r\n        } else {\r\n          alert('获取数据错误，请检查访问地址')\r\n        }\r\n      })\r\n  },\r\n\r\n  methods: {\r\n    computeScore({\r\n      star1,\r\n      star2,\r\n      star3,\r\n      star4,\r\n      star5,\r\n    }) {\r\n      /* 计算当前文档的评分 */\r\n      const score = (star1 + star2 * 2 + star3 * 3 + star4 * 4 + star5 * 5) / (star1 + star2 + star3 + star4 + star5)\r\n      return window.isNaN(score) ? -1 : score\r\n    },\r\n  },\r\n\r\n  components: {\r\n    MyHeader,\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.coursePage {\r\n  width: 100%;\r\n}\r\n\r\n.blackMask {\r\n  width: 100%;\r\n  height: 200px;\r\n  position: absolute;\r\n  z-index: -1;\r\n}\r\n\r\n.message {\r\n  background-color:rgba(0, 0, 0, 0.48);\r\n  width: 100%;\r\n  height: 200px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.coursetitle {\r\n  color: white;\r\n  overflow: hidden;\r\n  text-align: center;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  width: 60%;\r\n}\r\n\r\n .courseCell {\r\n  width: 100%;\r\n  height: 65px;\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.link {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 65px;\r\n  text-decoration: none;\r\n}\r\n\r\n.imgcon {\r\n  display: inline-block;\r\n  width: 110px;\r\n  height: 65px;\r\n  margin: 10px;\r\n  border-radius: 5px;\r\n  background: gray;\r\n  z-index: 1;\r\n}\r\n\r\n.classImg {\r\n  display: inline-block;\r\n  width:110px;\r\n  height:65px;\r\n  z-index: 1;\r\n  border-radius: 5px;\r\n}\r\n\r\n.msg {\r\n  position: absolute;\r\n  width: 110px;\r\n  height: 65px;\r\n  border-radius: 5px;\r\n  text-align: center;\r\n  z-index: 3;\r\n  vertical-align: middle;\r\n}\r\n\r\n.blackblock {\r\n  display: inline-block;\r\n  position: absolute;\r\n  width: 110px;\r\n  height: 65px;\r\n  background-color: rgba(0, 0, 0, 0.28);\r\n  z-index: 2;\r\n  border-radius: 5px;\r\n}\r\n\r\n.msgcontainer {\r\n  height: 65px;\r\n  margin-left: 8px;\r\n  margin-right: 10px;\r\n  flex:1;\r\n  text-align: left;\r\n}\r\n\r\n.className {\r\n  display: inline-block;\r\n  width: 160px;\r\n  text-overflow: ellipsis;\r\n  overflow:hidden;\r\n  white-space: nowrap;\r\n  font-size: 18px;\r\n  color: black;\r\n  text-align:left;\r\n}\r\n\r\n.icons {\r\n  text-align:left;\r\n  color: gray;\r\n  margin-top: 18px;\r\n  width: 100%;\r\n}\r\n\r\n.hr1 {\r\n  height:1px;\r\n  border:none;\r\n  border-top:1px solid lightgray;\r\n  margin-top: 10px;\r\n  margin: 10px 10px 0 10px;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/containers/Course/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"coursePage\"},[_c('MyHeader',{attrs:{\"title\":\"【课程专辑】\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"message\"},[_c('h2',{staticClass:\"coursetitle\"},[_vm._v(_vm._s(_vm.library.name))]),_vm._v(\" \"),_c('div',{staticClass:\"blackMask\",style:({\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\",\n          backgroundRepeat: \"no-repeat\",\n          backgroundImage: _vm.library.isDefault ? (\"url(\" + _vm.defaultClassCoverPng + \")\") : (_vm.library.cover || _vm.defaultClassCoverPng)\n        })})]),_vm._v(\" \"),_c('hr',{staticClass:\"hr1\"}),_vm._v(\" \"),_vm._l((_vm.courseList),function(course){return _c('div',{key:course.id,staticClass:\"courseCell\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":{ path: \"/player/\" + course.id  }}},[_c('div',{staticClass:\"imgcon\"},[_c('div',{staticClass:\"msg\"},[(_vm.computeScore(course.ratingStatis) !== -1)?_c('i',{staticClass:\"fa fa-star\",staticStyle:{\"font-size\":\"20px\",\"color\":\"#fbe359\",\"width\":\"110px\",\"margin-top\":\"20px\"}},[_vm._v(\"\\n              \"+_vm._s(_vm.computeScore(course.ratingStatis))+\"\\n            \")]):_vm._e(),_vm._v(\" \"),(_vm.computeScore(course.ratingStatis) === -1)?_c('span',{staticStyle:{\"font-size\":\"20px\",\"color\":\"white\",\"width\":\"110px\",\"margin-top\":\"20px\",\"display\":\"inline-block\"}},[_vm._v(\"\\n              暂无评分\\n            \")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"blackblock\"}),_vm._v(\" \"),_c('div',{staticClass:\"classImg\"},[_c('img',{staticClass:\"classImg\",attrs:{\"src\":course.cover}})])]),_vm._v(\" \"),_c('div',{staticClass:\"msgcontainer\"},[_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('span',{staticClass:\"className\"},[_vm._v(_vm._s(course.name))])]),_vm._v(\" \"),_c('div',{staticClass:\"icons\"},[_c('i',{staticClass:\"fa fa-caret-square-o-right\"}),_vm._v(\" \"),_c('span',{staticStyle:{\"display\":\"inline-block\",\"margin-left\":\"5px\"}},[_vm._v(_vm._s(course.view))]),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-commenting-o\",staticStyle:{\"margin-left\":\"15px\"}}),_vm._v(\" \"),_c('span',{staticStyle:{\"display\":\"inline-block\",\"margin-left\":\"5px\"}},[_vm._v(_vm._s(course.commentNums))])])])]),_vm._v(\" \"),_c('hr',{staticClass:\"hr1\"})],1)})],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2173d86b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/Course/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2173d86b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2173d86b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2173d86b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/Course/index.vue\n// module id = null\n// module chunks = ","const key = {\r\n  fullscreenEnabled: 0,\r\n  fullscreenElement: 1,\r\n  requestFullscreen: 2,\r\n  exitFullscreen: 3,\r\n  fullscreenchange: 4,\r\n  fullscreenerror: 5,\r\n}\r\n\r\nconst webkit = [\r\n  'webkitFullscreenEnabled',\r\n  'webkitFullscreenElement',\r\n  'webkitRequestFullscreen',\r\n  'webkitExitFullscreen',\r\n  'webkitfullscreenchange',\r\n  'webkitfullscreenerror',\r\n]\r\n\r\nconst moz = [\r\n  'mozFullScreenEnabled',\r\n  'mozFullScreenElement',\r\n  'mozRequestFullScreen',\r\n  'mozCancelFullScreen',\r\n  'mozfullscreenchange',\r\n  'mozfullscreenerror',\r\n]\r\n\r\nconst ms = [\r\n  'msFullscreenEnabled',\r\n  'msFullscreenElement',\r\n  'msRequestFullscreen',\r\n  'msExitFullscreen',\r\n  'MSFullscreenChange',\r\n  'MSFullscreenError',\r\n]\r\n\r\n// so it doesn't throw if no window or document\r\nconst document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {}\r\n\r\nconst vendor = (\r\n  ('fullscreenEnabled' in document && Object.keys(key)) ||\r\n  (webkit[0] in document && webkit) ||\r\n  (moz[0] in document && moz) ||\r\n  (ms[0] in document && ms) ||\r\n  []\r\n)\r\n\r\nexport default {\r\n  requestFullscreen: element => element[vendor[key.requestFullscreen]](),\r\n  requestFullscreenFunction: element => element[vendor[key.requestFullscreen]],\r\n  get exitFullscreen() { return document[vendor[key.exitFullscreen]].bind(document) },\r\n  addEventListener: (type, handler, options) => document.addEventListener(vendor[key[type]], handler, options),\r\n  removeEventListener: (type, handler, options) => document.removeEventListener(vendor[key[type]], handler, options),\r\n  get fullscreenEnabled() { return Boolean(document[vendor[key.fullscreenEnabled]]) },\r\n  set fullscreenEnabled(val) {},\r\n  get fullscreenElement() { return document[vendor[key.fullscreenElement]] },\r\n  set fullscreenElement(val) {},\r\n  get onfullscreenchange() { return document[`on${vendor[key.fullscreenchange]}`.toLowerCase()] },\r\n  set onfullscreenchange(handler) { return document[`on${vendor[key.fullscreenchange]}`.toLowerCase()] = handler },\r\n  get onfullscreenerror() { return document[`on${vendor[key.fullscreenerror]}`.toLowerCase()] },\r\n  set onfullscreenerror(handler) { return document[`on${vendor[key.fullscreenerror]}`.toLowerCase()] = handler },\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/Player/Player/lib/fscreen.js","import axios from 'axios'\r\nimport Hammer from 'hammerjs'\r\nimport fscreen from '../lib/fscreen'\r\n\r\nimport './Player.css'\r\n\r\nexport default class Player {\r\n  /* 格式化 Action 数据 */\r\n  static formatActionData(actionData) {\r\n    return {\r\n      actions: actionData.actions.map((action, index) => ({\r\n        ...action,\r\n        actionId: index,\r\n        color: action.color,\r\n        endTime: action.endTime ? Math.round(window.parseFloat(action.endTime) * 10) * 100 : undefined,\r\n        id: action.id,\r\n        points: action.points ? action.points.map((point) => [window.parseFloat(point.x), window.parseFloat(point.y)]) : undefined,\r\n        startTime: Math.round(window.parseFloat(action.startTime) * 10) * 100,\r\n        target: action.target,\r\n        type: action.type,\r\n        width: action.width ? window.parseInt(action.width, 10) : undefined,\r\n        yDistance: action.yDistance ? window.parseInt(action.yDistance, 10) : undefined,\r\n      })).sort((prev, next) => prev.startTime - next.startTime),\r\n      draftHeight: window.parseInt(actionData.draftHeight, 10),\r\n      draftWidth: window.parseInt(actionData.draftWidth, 10),\r\n      windowHeight: window.parseInt(actionData.windowHeight, 10),\r\n      windowWidth: window.parseInt(actionData.windowWidth, 10),\r\n    }\r\n  }\r\n\r\n  constructor({\r\n    actionUrl,\r\n    audioUrl,\r\n    duration,\r\n    element,\r\n    imageUrls,\r\n    mode = 'mobile',\r\n    size,\r\n    subtitles,\r\n  }) {\r\n    this.actionData = {\r\n      actions: null,\r\n      draftHeight: 0,\r\n      draftWidth: 0,\r\n      windowHeight: 0,\r\n      windowWidth: 0,\r\n    }\r\n    this.domRefs = {\r\n      audio: null,\r\n      images: [],\r\n      imageContainer: null,\r\n      playerContainer: element,\r\n    }\r\n    this.options = {\r\n      /* 外部实例化时传入的配置项参数 */\r\n      actionUrl,\r\n      audioUrl,\r\n      duration,\r\n      element,\r\n      imageUrls,\r\n      mode,\r\n      size,\r\n      subtitles,\r\n      /* 滚动一页距离需要的时间，以秒为单位 */\r\n      scrollDuration: 1,\r\n      /* 是否自动播放 */\r\n      autoPlay: mode === 'mobile',\r\n      /* 字幕初始大小 */\r\n      captionFontSize: 16,\r\n    }\r\n    this.state = {\r\n      /* 语音文件加载状态 */\r\n      audioLoadStatus: 'initial',\r\n      /* 图集加载状态 */\r\n      isImagesLoaded: new Array(imageUrls.length, false),\r\n      /* setTimeout注册动作的返回值，暂停时需取消已注册的动作 */\r\n      nextAction: null,\r\n      nextActionIndex: 0,\r\n      /* 使用这个取消注册的动画 */\r\n      animation: null,\r\n      /* 使用这个注册动画 */\r\n      animationObj: null,\r\n      /* 播放器处于暂停或播放状态 */\r\n      isHalted: true,\r\n      /* 播放器是否正在等候加载 */\r\n      isLoading: true,\r\n      /* 是否处于网页全屏 */\r\n      isPageFullscreenOpen: false,\r\n      /* 草稿纸是否处于打开状态 */\r\n      isdraftOpen: false,\r\n      /* 草稿纸的宽度，用于打开草稿纸时进行恢复 */\r\n      draftWidth: 0,\r\n      /* 当前使用的草稿纸编号，从1开始 */\r\n      draftNum: 1,\r\n      /* 保存所有canvas的context，一个是在课件上绘制笔迹的canvas，其余为草稿纸canvas */\r\n      contexts: [],\r\n      /* 保存课件canvas和草稿纸canvas使用的比例 */\r\n      propotions: [],\r\n      /* 当前使用的比例 */\r\n      propotion: 1,\r\n      /* 当前使用的context */\r\n      ctx: null,\r\n      /* 当前显示的字幕索引 */\r\n      currentSubtitleIndex: 0,\r\n      /* 字幕数组 */\r\n      subtitles: this.options.subtitles || [],\r\n      /* 是否开启字幕 */\r\n      isCaptionsOpen: mode === 'mobile',\r\n      /* 播放器的初始宽度，用于退出全屏时进行恢复 */\r\n      initialWidth: element.offsetWidth,\r\n      /* 用于记录加载完成后如何恢复状态，分别为正在等待加载的页码和加载成功后恢复的时刻 */\r\n      waiting: {\r\n        waitingPage: null,\r\n        waitingTime: null,\r\n      },\r\n      /* 使用hammerJS添加移动端事件时创建的hammer */\r\n      hammers: null,\r\n    }\r\n    /* html模板 */\r\n    this.template = {\r\n      playerControl: `\r\n        <div class=\"player-main\">\r\n          <div class=\"player-section-left\">\r\n            <button class=\"player-section player-play player-button\" title=\"播放\">\r\n              <i class=\"fa fa-play\"></i>\r\n            </button>\r\n            <div class=\"player-section player-time\">\r\n              <span class=\"current-time\">0</span>\r\n              <span class=\"player-time-divider\">/</span>\r\n              <span class=\"duration\">${Player.normalizeTime(this.options.duration)}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"player-section-right\">\r\n            <button class=\"${'player-section player-button player-toggle-captions' + (this.state.isCaptionsOpen ? ' is-active' : '')}\" title=\"打开字幕\">\r\n              <svg viewBox=\"0 0 24 24\" style=\"display: inline-block; fill: currentcolor; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\">\r\n                <path d=\"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z\"></path>\r\n              </svg>\r\n            </button>\r\n            ${\r\n            mode === 'desktop' ?\r\n            `<button class=\"player-section player-button player-page-fullscreen\" title=\"网页全屏\">\r\n              <svg viewBox=\"0 0 24 24\" style=\"display: inline-block; fill: currentcolor; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\">\r\n                <path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"></path>\r\n              </svg>\r\n              <svg viewBox=\"0 0 24 24\" style=\"display: none; fill: currentcolor; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\">\r\n                <path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"></path>\r\n              </svg>\r\n            </button>`\r\n            : ''\r\n            }\r\n            <button class=\"player-section player-button player-fullscreen\" title=\"进入全屏\">\r\n              <svg viewBox=\"0 0 24 24\" style=\"display: inline-block; fill: currentcolor; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\">\r\n                <path d=\"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z\"></path>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <div class=\"player-progress-control\">\r\n            <div class=\"player-progressbar-wrap\">\r\n              <div class=\"player-progressbar\">\r\n                <div class=\"player-progressbar-handle\">\r\n                <i class=\"fa fa-circle\"></i>\r\n                </div>\r\n              </div>\r\n              <div class=\"player-preview\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `,\r\n      loadTip: `\r\n        <div class=\"player-load-tip\">\r\n          <button class=\"player-load-button\">\r\n            <i class=\"fa fa-play\" aria-hidden=\"true\"></i>\r\n            <span>${Math.round(size / 1024 / 1024)}MB流量</span>\r\n          </button>\r\n          <div class=\"player-loading\">\r\n            <i class=\"fa fa-spinner fa-spin fa-3x fa-fw\"></i>\r\n            <div>正在加载...</div>\r\n          </div>\r\n        </div>\r\n      `,\r\n      draft: `\r\n        <canvas class=\"draft\"></canvas>\r\n      `,\r\n      captions: `\r\n        <div class=\"player-captions\">\r\n          ${mode === 'desktop' ? '<i class=\"fa fa-ellipsis-v\" aria-hidden=\"true\"></i>' : ''}\r\n          <span class=\"player-captions-text\">(播放开始时将出现字幕)</span>\r\n        </div>\r\n      `,\r\n    }\r\n    this.fetchActions()\r\n    this.fetchImages()\r\n  }\r\n\r\n  fetchActions() {\r\n    axios\r\n      .get(this.options.actionUrl, {\r\n        baseURL: '',\r\n        responseType: 'json',\r\n      })\r\n      .then((response) => {\r\n        /* 对数据进行格式化处理 */\r\n        this.actionData = Player.formatActionData(response.data)\r\n        this.renderContainer()\r\n        this.renderImages()\r\n      })\r\n      .catch((error) => {\r\n        throw error\r\n      })\r\n  }\r\n\r\n  /* 渲染播放器的主体结构，添加缓冲提示 */\r\n  renderContainer() {\r\n    const {\r\n      actionData: {\r\n        windowHeight,\r\n        windowWidth,\r\n      },\r\n      domRefs: {\r\n        playerContainer,\r\n      },\r\n      options: {\r\n        mode,\r\n      },\r\n      template: {\r\n        loadTip,\r\n      },\r\n    } = this\r\n\r\n    const container = document.createElement('div')\r\n    container.className = 'player-image-container'\r\n\r\n    /* 播放器高度由宽度按比例计算得出 */\r\n    const containerWidth = playerContainer.offsetWidth\r\n    const containerHeight = containerWidth * windowHeight / windowWidth\r\n    container.style.width = `${containerWidth}px`\r\n    container.style.height = `${containerHeight}px`\r\n\r\n    playerContainer.appendChild(container)\r\n\r\n    /* 渲染正在加载的提示 */\r\n    const loadTipElem = Player.renderStringToNode(container, loadTip)\r\n\r\n    /* 保存常用的dom节点 */\r\n    this.domRefs.loadTip = loadTipElem\r\n    this.domRefs.imageContainer = container\r\n    this.domRefs.loading = loadTipElem.querySelector('.player-loading')\r\n\r\n    /* 通知徐子菁此时可以获得播放器的宽高属性了 */\r\n    const event = new CustomEvent('actionsLoaded')\r\n    playerContainer.dispatchEvent(event)\r\n\r\n    this.fetchSource = this.fetchSource.bind(this)\r\n    /* 如果为移动端，则显示当前需要下载的资源的大小而不是直接下载资源 */\r\n    const loadButton = loadTipElem.querySelector('.player-load-button')\r\n    if (mode === 'mobile') {\r\n      loadButton.addEventListener('click', this.fetchSource)\r\n    } else {\r\n      this.fetchSource()\r\n    }\r\n  }\r\n\r\n  fetchSource() {\r\n    const {\r\n      loadTip,\r\n    } = this.domRefs\r\n\r\n    /* 获取音频资源 */\r\n    this.fetchAudio()\r\n\r\n    /* 隐藏加载资源按钮，显示正在加载提示 */\r\n    loadTip.firstElementChild.style.display = 'none'\r\n    loadTip.lastElementChild.style.display = 'block'\r\n  }\r\n\r\n  fetchAudio() {\r\n    const audioElement = document.createElement('audio')\r\n\r\n    this.handleAudioLoaded = this.handleAudioLoaded.bind(this)\r\n    audioElement.addEventListener('canplay', this.handleAudioLoaded)\r\n    audioElement.addEventListener('canplaythrough', this.handleAudioLoaded)\r\n    audioElement.addEventListener('loadeddata', this.handleAudioLoaded)\r\n    audioElement.addEventListener('loadedmetadata', this.handleAudioLoaded)\r\n\r\n    audioElement.src = this.options.audioUrl\r\n\r\n    this.domRefs.audio = audioElement\r\n\r\n    this.state.audioLoadStatus = 'loading'\r\n  }\r\n\r\n  fetchImages() {\r\n    const imageNameRegExp = /p(\\d+)\\.png$/\r\n\r\n    /* 传入的图片链接可能是乱序的，将其按照p1.png，p2.png的顺序排序 */\r\n    const imageUrls = this.options.imageUrls.sort((prev, next) => {\r\n      const prevImageOrder = Number(prev.match(imageNameRegExp)[1])\r\n      const nextImageOrder = Number(next.match(imageNameRegExp)[1])\r\n\r\n      return prevImageOrder - nextImageOrder\r\n    })\r\n    this.options.imageUrls = imageUrls\r\n\r\n    /* 图片宽度等于播放器宽度 */\r\n    const imageWidth = this.domRefs.playerContainer.offsetWidth\r\n\r\n    /* 生成图片节点,并请求第一张图片,待第一张请求成功再请求其他图片 */\r\n    this.handleImageLoaded = this.handleImageLoaded.bind(this)\r\n    this.domRefs.images = imageUrls.map(() => {\r\n      const imageElement = new Image(imageWidth)\r\n      imageElement.addEventListener('load', this.handleImageLoaded)\r\n      return imageElement\r\n    })\r\n\r\n    /* 请求第一张图片 */\r\n    this.handleFirstImageLoaded = this.handleFirstImageLoaded.bind(this)\r\n    this.domRefs.images[0].addEventListener('load', this.handleFirstImageLoaded)\r\n    this.domRefs.images[0].src = imageUrls[0]\r\n  }\r\n\r\n  handleFirstImageLoaded() {\r\n    this.checkSrcLoadStatus()\r\n\r\n    /* 加载剩余的图片 */\r\n    this.domRefs.images.forEach((imageElem, index) => {\r\n      if (index) {\r\n        imageElem.src = this.options.imageUrls[index]\r\n      }\r\n    })\r\n  }\r\n\r\n  handleImageLoaded(e) {\r\n    const imagePattern = /p(\\d+)\\.png$/\r\n    const index = parseInt(e.target.src.match(imagePattern)[1], 10)\r\n    this.state.isImagesLoaded[index] = true\r\n  }\r\n\r\n  handleAudioLoaded() {\r\n    this.state.audioLoadStatus = 'finish'\r\n    this.checkSrcLoadStatus()\r\n  }\r\n\r\n  checkSrcLoadStatus() {\r\n    /* 如果音频加载完成且第一张图片加载完成，播放器可以开始播放 */\r\n    if (this.state.audioLoadStatus === 'finish' && this.state.isImagesLoaded[0] && !this.state.canPlay) {\r\n      this.state.canPlay = true\r\n\r\n      /* 移除加载提示 */\r\n      this.setLoadingTipStatus(false)\r\n\r\n      /* 图片和语音都已经加载完成，可以初始化页面的 HTML 结构了 */\r\n      this.initHtml()\r\n      this.bindEvents()\r\n\r\n      /* 选择使用的画布 */\r\n      this.setDrawTarget()\r\n\r\n      /* 设置两个画布分别使用的缩放比例 */\r\n      this.setPropotions()\r\n\r\n      /* 将播放进度调整到开头 */\r\n      this.changeCurrentTime(0)\r\n\r\n      if (this.options.autoPlay) {\r\n        this.togglePlay()\r\n      }\r\n\r\n      this.showPlayerControl()\r\n    }\r\n  }\r\n\r\n  initHtml() {\r\n    this.renderCanvas()\r\n    this.renderPlayerControl()\r\n    this.renderCaptions()\r\n    this.renderAudio()\r\n    this.renderDraft()\r\n  }\r\n\r\n  /* 设置加载状态，并根据状态显示或隐藏加载提示 */\r\n  setLoadingTipStatus(status) {\r\n    this.state.isLoading = status\r\n    this.domRefs.loading.style.display = this.state.isLoading ? 'block' : 'none'\r\n  }\r\n\r\n  renderImages() {\r\n    const {\r\n      images,\r\n      imageContainer,\r\n    } = this.domRefs\r\n\r\n    /* 挂载图片节点，置于canvas之下 */\r\n    this.domRefs.pages = []\r\n\r\n    const fragment = document.createDocumentFragment()\r\n    images.forEach((image) => {\r\n      const section = document.createElement('section')\r\n      section.classList.add('player-image-section')\r\n\r\n      image.classList.add('player-image')\r\n      section.appendChild(image)\r\n\r\n      fragment.appendChild(section)\r\n      this.domRefs.pages.push(section)\r\n    })\r\n    imageContainer.appendChild(fragment)\r\n  }\r\n\r\n  renderCanvas() {\r\n    const canvas = document.createElement('canvas')\r\n    this.domRefs.canvas = canvas\r\n\r\n    const {\r\n      imageContainer,\r\n    } = this.domRefs\r\n\r\n    this.setCanvasSize(imageContainer.offsetWidth)\r\n    canvas.classList.add('player-canvas')\r\n\r\n    imageContainer.appendChild(canvas)\r\n\r\n    const ctx = canvas.getContext('2d')\r\n    ctx.lineCap = 'round'\r\n    this.state.contexts.push(ctx)\r\n  }\r\n\r\n  renderAudio() {\r\n    const {\r\n      audio,\r\n      playerContainer,\r\n    } = this.domRefs\r\n    /* 将音频元素添加到文档中 */\r\n    playerContainer.appendChild(audio)\r\n  }\r\n\r\n  renderPlayerControl() {\r\n    const {\r\n      domRefs: {\r\n        playerContainer,\r\n      },\r\n      template: {\r\n        playerControl: playerControlTemplate,\r\n      },\r\n    } = this\r\n\r\n    const playerControl = Player.renderStringToNode(playerContainer, playerControlTemplate)\r\n\r\n    /* 将控制条中点节点添加到domRefs中 */\r\n    this.domRefs.playerControl = playerControl\r\n    this.domRefs.progressbarWrapper = playerControl.querySelector('.player-progressbar-wrap')\r\n    this.domRefs.playState = playerControl.querySelector('.player-play')\r\n    this.domRefs.fullscreen = playerControl.querySelector('.player-fullscreen')\r\n    this.domRefs.pageFullscreen = playerControl.querySelector('.player-page-fullscreen')\r\n    this.domRefs.toggleCaptionsButton = playerControl.querySelector('.player-toggle-captions')\r\n    this.domRefs.duration = playerControl.querySelector('.duration')\r\n    this.domRefs.currentTime = playerControl.querySelector('.current-time')\r\n    this.domRefs.progressbar = playerControl.querySelector('.player-progressbar')\r\n    this.domRefs.preview = playerControl.querySelector('.player-preview')\r\n    this.domRefs.progressHandle = playerControl.querySelector('.player-progressbar-handle')\r\n  }\r\n\r\n  renderCaptions() {\r\n    const {\r\n      playerContainer,\r\n    } = this.domRefs\r\n    const captionsNode = Player.renderStringToNode(playerContainer, this.template.captions)\r\n    if (!this.state.isCaptionsOpen) {\r\n      captionsNode.style.display = 'none'\r\n    }\r\n    this.domRefs.captions = captionsNode\r\n  }\r\n\r\n  renderDraft() {\r\n    const draft = Player.renderStringToNode(this.domRefs.imageContainer, this.template.draft)\r\n\r\n    const ctx = draft.getContext('2d')\r\n    ctx.lineCap = 'round'\r\n    this.state.contexts.push(ctx)\r\n\r\n    this.domRefs.draft = draft\r\n\r\n    this.setDraftSize()\r\n  }\r\n\r\n  bindEvents() {\r\n    const {\r\n      audio,\r\n      fullscreen,\r\n      pageFullscreen,\r\n      playState,\r\n      progressbarWrapper,\r\n      playerControl,\r\n      progressHandle,\r\n      toggleCaptionsButton,\r\n      captions,\r\n      loadTip,\r\n    } = this.domRefs\r\n\r\n    this.handlePlayButtonClick = this.handlePlayButtonClick.bind(this)\r\n    this.handleFullscreenClick = this.handleFullscreenClick.bind(this)\r\n    this.handleCaptionsMove = this.handleCaptionsMove.bind(this)\r\n    this.showPlayerControl = this.showPlayerControl.bind(this)\r\n    this.handleCaptionsDown = this.handleCaptionsDown.bind(this)\r\n    this.handleCaptionsUp = this.handleCaptionsUp.bind(this)\r\n    this.handlePageFullscreenClick = this.handlePageFullscreenClick.bind(this)\r\n    this.handleProgressbarOver = this.handleProgressbarOver.bind(this)\r\n    this.handleProgressbarleave = this.handleProgressbarleave.bind(this)\r\n    this.handleSeekMousedown = this.handleSeekMousedown.bind(this)\r\n    this.handleTimeUpdate = this.handleTimeUpdate.bind(this)\r\n    this.handleEnded = this.handleEnded.bind(this)\r\n    this.handleFullscreenChange = this.handleFullscreenChange.bind(this)\r\n    this.handleCaptionButtonClick = this.handleCaptionButtonClick.bind(this)\r\n    this.handleProgressbarClick = this.handleProgressbarClick.bind(this)\r\n    this.handleRotateScreen = this.handleRotateScreen.bind(this)\r\n    this.handleWindowResize = this.handleWindowResize.bind(this)\r\n\r\n    /* 添加PC端事件 */\r\n    if (this.options.mode === 'desktop') {\r\n      playerControl.addEventListener('mouseenter', this.showPlayerControl)\r\n      playerControl.addEventListener('mousemove', this.showPlayerControl)\r\n      loadTip.addEventListener('mouseenter', this.showPlayerControl)\r\n      loadTip.addEventListener('mousemove', this.showPlayerControl)\r\n      loadTip.addEventListener('click', this.handlePlayButtonClick)\r\n      pageFullscreen.addEventListener('click', this.handlePageFullscreenClick)\r\n      progressbarWrapper.addEventListener('mouseover', this.handleProgressbarOver)\r\n      progressbarWrapper.addEventListener('mouseleave', this.handleProgressbarleave)\r\n      progressbarWrapper.addEventListener('mousemove', this.handleProgressbarOver)\r\n      progressHandle.addEventListener('mousedown', this.handleSeekMousedown)\r\n      captions.addEventListener('mousedown', this.handleCaptionsDown)\r\n    }\r\n\r\n    /* 添加公共事件 */\r\n    audio.addEventListener('timeupdate', this.handleTimeUpdate)\r\n    audio.addEventListener('ended', this.handleEnded)\r\n\r\n    playState.addEventListener('click', this.handlePlayButtonClick)\r\n    fscreen.addEventListener('fullscreenchange', this.handleFullscreenChange)\r\n    fullscreen.addEventListener('click', this.handleFullscreenClick)\r\n    toggleCaptionsButton.addEventListener('click', this.handleCaptionButtonClick)\r\n    progressbarWrapper.addEventListener('click', this.handleProgressbarClick)\r\n    window.addEventListener('orientationchange', this.handleRotateScreen)\r\n    window.addEventListener('resize', this.handleWindowResize)\r\n\r\n    /* 添加移动端事件 */\r\n    if (this.options.mode === 'mobile') {\r\n      this.handlePlayerTap = this.handlePlayerTap.bind(this)\r\n      this.handleProgressPanStart = this.handleProgressPanStart.bind(this)\r\n      this.handleProgressPanMove = this.handleProgressPanMove.bind(this)\r\n      this.handleCaptionsPress = this.handleCaptionsPress.bind(this)\r\n      this.handleCaptionsPressUp = this.handleCaptionsPressUp.bind(this)\r\n      this.handleCaptionsPanMove = this.handleCaptionsPanMove.bind(this)\r\n      this.handlePlayerDoubleTap = this.handlePlayerDoubleTap.bind(this)\r\n\r\n      const handleHammer = new Hammer(progressHandle)\r\n      handleHammer.on('panstart', this.handleProgressPanStart)\r\n      handleHammer.on('panleft panright', this.handleProgressPanMove)\r\n\r\n      const captionsHammer = new Hammer(captions)\r\n      captionsHammer.get('pan').set({\r\n        direction: Hammer.DIRECTION_ALL,\r\n      })\r\n      captionsHammer.get('press').set({\r\n        time: 500,\r\n      })\r\n      captionsHammer.on('press', this.handleCaptionsPress)\r\n      captionsHammer.on('panleft panright panup pandown', this.handleCaptionsPanMove)\r\n      captionsHammer.on('panend', this.handleCaptionsPressUp)\r\n\r\n      const loadTipHammer = new Hammer.Manager(loadTip)\r\n      loadTipHammer.add(new Hammer.Tap({ event: 'doubletap', taps: 2 }))\r\n      loadTipHammer.add(new Hammer.Tap({ event: 'singletap' }))\r\n      loadTipHammer.get('doubletap').recognizeWith('singletap')\r\n      loadTipHammer.get('singletap').requireFailure('doubletap')\r\n      loadTipHammer.on('singletap', this.handlePlayerTap)\r\n      loadTipHammer.on('doubletap', this.handlePlayerDoubleTap)\r\n      loadTipHammer.on('panstart', this.handleProgressPanStart)\r\n      loadTipHammer.on('panleft panright', this.handleProgressPanMove)\r\n\r\n      this.state.hammers = {\r\n        handleHammer,\r\n        captionsHammer,\r\n        loadTipHammer,\r\n      }\r\n    }\r\n  }\r\n\r\n  handleCaptionsPress() {\r\n    const {\r\n      captions,\r\n    } = this.domRefs\r\n    /* 长按字幕可以拖动 */\r\n    this.canCaptionsMove = true\r\n    this.captionsStartX = captions.offsetLeft\r\n    this.captionsStartY = captions.offsetTop\r\n  }\r\n\r\n  handleCaptionsPressUp() {\r\n    this.canCaptionsMove = false\r\n  }\r\n\r\n  handleCaptionsPanMove(e) {\r\n    if (this.canCaptionsMove) {\r\n      const left = this.captionsStartX + e.deltaX\r\n      const top = this.captionsStartY + e.deltaY\r\n      this.setCaptionsOffset(left, top)\r\n    }\r\n  }\r\n\r\n  handleProgressPanStart() {\r\n    /* 当滑动开始时，记录下起始的时间 */\r\n    const {\r\n      audio,\r\n    } = this.domRefs\r\n    this.panStartTime = audio.currentTime\r\n  }\r\n\r\n  handleProgressPanMove(e) {\r\n    const {\r\n      domRefs: {\r\n        progressbarWrapper,\r\n      },\r\n      options: {\r\n        duration,\r\n      },\r\n    } = this\r\n\r\n    const percent = e.deltaX / progressbarWrapper.offsetWidth\r\n    const deltaTime = duration * percent\r\n    let time = this.panStartTime + deltaTime\r\n    time = Math.min(duration, time)\r\n    time = Math.max(0, time)\r\n    this.showPlayerControl()\r\n    this.changeCurrentTime(time * 1000)\r\n  }\r\n\r\n  handlePlayerTap(e) {\r\n    e.preventDefault()\r\n    this.showPlayerControl()\r\n  }\r\n\r\n  handleCaptionsDown(e) {\r\n    const {\r\n      captions,\r\n    } = this.domRefs\r\n    document.addEventListener('mousemove', this.handleCaptionsMove)\r\n    document.addEventListener('mouseup', this.handleCaptionsUp)\r\n    this.captionsStartX = captions.offsetLeft\r\n    this.captionsStartY = captions.offsetTop\r\n    this.cursorStartX = e.clientX\r\n    this.cursorStartY = e.clientY\r\n  }\r\n\r\n  handleCaptionsUp() {\r\n    document.removeEventListener('mousemove', this.handleCaptionsMove)\r\n    document.removeEventListener('mouseup', this.handleCaptionsUp)\r\n  }\r\n\r\n  handleCaptionsMove(e) {\r\n    const distX = e.clientX - this.cursorStartX\r\n    const distY = e.clientY - this.cursorStartY\r\n    const left = this.captionsStartX + distX\r\n    const top = this.captionsStartY + distY\r\n    this.setCaptionsOffset(left, top)\r\n  }\r\n\r\n  setCaptionsOffset(left, top) {\r\n    const {\r\n      captions,\r\n      playerContainer,\r\n      playerControl,\r\n    } = this.domRefs\r\n    const parentWidth = playerContainer.offsetWidth\r\n    const parentHeight = playerContainer.offsetHeight\r\n    const captionsLeftMax = parentWidth - captions.offsetWidth\r\n    const captionsBottomMax = parentHeight - captions.offsetHeight\r\n\r\n    let leftOffset = left\r\n    leftOffset = Math.max(0, leftOffset)\r\n    leftOffset = Math.min(captionsLeftMax, leftOffset)\r\n    captions.style.left = `${leftOffset / parentWidth * 100}%`\r\n\r\n    /* 这里设置字幕的bottom值而非top，是考虑到用户一般会将字幕放到视频的下半部分，\r\n    所以需要避免字幕过多时超出播放器的下限，但仍然有超出上限的危险 */\r\n    let bottomOffset = parentHeight - top - captions.offsetHeight\r\n    bottomOffset = Math.max(playerControl.offsetHeight, bottomOffset)\r\n    bottomOffset = Math.min(captionsBottomMax, bottomOffset)\r\n    captions.style.bottom = `${bottomOffset / parentHeight * 100}%`\r\n  }\r\n\r\n  handleWindowResize() {\r\n    const {\r\n      playerContainer,\r\n    } = this.domRefs\r\n    const currentWidth = playerContainer.offsetWidth\r\n    /* 如果播放器节点的宽度没有改变，则无需重设播放器宽度 */\r\n    if (!this.lastWidth || this.lastWidth !== currentWidth) {\r\n      this.resizePlayer(playerContainer.offsetWidth)\r\n    }\r\n    this.lastWidth = currentWidth\r\n  }\r\n\r\n  handleEnded() {\r\n    /* 将播放器暂停 */\r\n    this.togglePlay()\r\n    /* 恢复初始状态 */\r\n    this.changeCurrentTime(0)\r\n  }\r\n\r\n  handleSeekMousedown() {\r\n    this.handleSeekMousemove = this.handleSeekMousemove.bind(this)\r\n    this.handleSeekMouseup = this.handleSeekMouseup.bind(this)\r\n    document.addEventListener('mousemove', this.handleSeekMousemove)\r\n    document.addEventListener('mouseup', this.handleSeekMouseup)\r\n  }\r\n\r\n  handleSeekMousemove(e) {\r\n    this.changeProgressbarHandle(e)\r\n  }\r\n\r\n  handleSeekMouseup() {\r\n    document.removeEventListener('mousemove', this.handleSeekMousemove)\r\n    document.removeEventListener('mouseup', this.handleSeekMouseup)\r\n  }\r\n\r\n  /* 根据全屏时屏幕尺寸计算播放器需放大到的尺寸 */\r\n  getFullscreenSize() {\r\n    /* 重设播放器的高宽，使之撑满屏幕 */\r\n    const {\r\n      height,\r\n      width,\r\n    } = window.screen\r\n\r\n    const {\r\n      windowHeight,\r\n      windowWidth,\r\n    } = this.actionData\r\n\r\n    const propotion1 = height / width\r\n    const propotion2 = windowHeight / windowWidth\r\n    let containerHeight\r\n    let containerWidth\r\n    /* 如果宽度撑满，高度会超出屏幕，则选择撑满高度 */\r\n    if (propotion2 > propotion1) {\r\n      containerHeight = height\r\n      containerWidth = containerHeight / propotion2\r\n    } else {\r\n      containerWidth = width\r\n      containerHeight = containerWidth * propotion2\r\n    }\r\n    return containerWidth\r\n  }\r\n\r\n  handleRotateScreen() {\r\n    /* 若旋转了屏幕且此时处于全屏状态，需变更播放器尺寸 */\r\n    if (fscreen.fullscreenElement) {\r\n      const width = this.getFullscreenSize()\r\n      this.domRefs.playerContainer.style.width = `${width}px`\r\n      this.resizePlayer(width)\r\n    }\r\n  }\r\n\r\n  handleFullscreenChange() {\r\n    const {\r\n      domRefs: {\r\n        fullscreen,\r\n        pageFullscreen,\r\n        playerContainer,\r\n      },\r\n      options: {\r\n        mode,\r\n      },\r\n      state: {\r\n        initialWidth,\r\n        isPageFullscreenOpen,\r\n      },\r\n    } = this\r\n\r\n    if (fscreen.fullscreenElement) {\r\n      const fullscreenSize = this.getFullscreenSize()\r\n      playerContainer.style.width = `${fullscreenSize}px`\r\n      this.resizePlayer(fullscreenSize)\r\n\r\n      fullscreen.title = '退出全屏'\r\n\r\n      /* 在全屏状态不可直接设置网页全屏，需先退出才可设置 */\r\n      if (mode === 'desktop') {\r\n        pageFullscreen.style.display = 'none'\r\n      }\r\n    } else {\r\n      playerContainer.style.width = isPageFullscreenOpen ? '100%' : `${initialWidth}px`\r\n      this.resizePlayer(playerContainer.offsetWidth)\r\n\r\n      fullscreen.title = '进入全屏'\r\n      if (mode === 'desktop') {\r\n        pageFullscreen.style.display = 'inline'\r\n      }\r\n    }\r\n  }\r\n\r\n  setPropotions() {\r\n    const {\r\n      windowWidth,\r\n      draftHeight,\r\n    } = this.actionData\r\n    const {\r\n      imageContainer,\r\n    } = this.domRefs\r\n    const {\r\n      propotions,\r\n    } = this.state\r\n\r\n    /* 课件画布同录制时的比例，该画布的宽度等于容器宽度 */\r\n    propotions[0] = imageContainer.offsetWidth / windowWidth\r\n\r\n    /* 草稿纸画布同录制时的比例，该画布的高度等于容器高度 */\r\n    propotions[1] = imageContainer.offsetHeight / draftHeight\r\n  }\r\n\r\n  /* 根据mountNode的宽度设置播放器各部件大小 */\r\n  resizePlayer(containerWidth) {\r\n    const {\r\n      audio,\r\n      playerControl,\r\n      captions,\r\n    } = this.domRefs\r\n    const {\r\n      windowWidth,\r\n      windowHeight,\r\n    } = this.actionData\r\n\r\n    const containerHeight = windowHeight / windowWidth * containerWidth\r\n\r\n    /* 如果全屏，播放器控制条占满宽度 */\r\n    let translateX = 0\r\n    let controlWidth = containerWidth\r\n    if (fscreen.fullscreenElement) {\r\n      controlWidth = window.screen.width\r\n      translateX = (window.screen.width - containerWidth) / 2\r\n    }\r\n    playerControl.style.width = `${controlWidth}px`\r\n\r\n    /* 全屏时将控制条移到最左侧 */\r\n    playerControl.style.transform = `translateX(${-translateX}px)`\r\n    this.setContainerSize(containerWidth, containerHeight)\r\n    this.setCanvasSize(containerWidth)\r\n\r\n    /* 修改播放器size后与原始大小的比例发生了变化 */\r\n    this.setPropotions()\r\n    this.setDrawTarget()\r\n    this.setDraftSize()\r\n    this.changeCurrentTime(audio.currentTime * 1000)\r\n\r\n    /* 调整字幕字体大小 */\r\n    const propotion = containerWidth / this.state.initialWidth\r\n    captions.style.fontSize = `${this.options.captionFontSize * propotion}px`\r\n  }\r\n\r\n  handleFullscreenClick() {\r\n    const {\r\n      playerContainer,\r\n    } = this.domRefs\r\n    if (fscreen.fullscreenElement) {\r\n      fscreen.exitFullscreen()\r\n    } else {\r\n      fscreen.requestFullscreen(playerContainer)\r\n    }\r\n  }\r\n\r\n  handlePageFullscreenClick() {\r\n    const {\r\n      playerContainer,\r\n      pageFullscreen,\r\n    } = this.domRefs\r\n    this.state.isPageFullscreenOpen = !this.state.isPageFullscreenOpen\r\n    if (this.state.isPageFullscreenOpen) {\r\n      /* 改变图标 */\r\n      pageFullscreen.firstElementChild.style.display = 'none'\r\n      pageFullscreen.lastElementChild.style.display = 'inline-block'\r\n\r\n      /* 网页全屏的含义是将播放器宽度设成100%，使其撑满包裹元素 */\r\n      playerContainer.style.width = '100%'\r\n      this.resizePlayer(playerContainer.offsetWidth)\r\n    } else {\r\n      pageFullscreen.firstElementChild.style.display = 'inline-block'\r\n      pageFullscreen.lastElementChild.style.display = 'none'\r\n\r\n      /* 退出网页全屏即将宽度恢复原值 */\r\n      playerContainer.style.width = `${this.state.initialWidth}px`\r\n      this.resizePlayer(playerContainer.offsetWidth)\r\n    }\r\n  }\r\n\r\n  handleCaptionButtonClick() {\r\n    const {\r\n      isCaptionsOpen,\r\n    } = this.state\r\n    const {\r\n      toggleCaptionsButton,\r\n      captions,\r\n    } = this.domRefs\r\n    this.state.isCaptionsOpen = !isCaptionsOpen\r\n    if (this.state.isCaptionsOpen) {\r\n      toggleCaptionsButton.classList.add('is-active')\r\n      captions.style.display = 'block'\r\n    } else {\r\n      toggleCaptionsButton.classList.remove('is-active')\r\n      captions.style.display = 'none'\r\n    }\r\n  }\r\n\r\n  setContainerSize(width, height) {\r\n    const {\r\n      imageContainer,\r\n    } = this.domRefs\r\n    imageContainer.style.width = `${width}px`\r\n    imageContainer.style.height = `${height}px`\r\n  }\r\n\r\n  /* 修改 canvas 元素的尺寸，其中宽度与播放器的宽度相同，高度设置为与图集中最大高度的图片的 */\r\n  /* 高度相同 */\r\n  setCanvasSize(width) {\r\n    const {\r\n      images,\r\n      canvas,\r\n      playerContainer,\r\n    } = this.domRefs\r\n    canvas.width = width\r\n    const height = images.reduce((max, cur) => Math.max(max, cur.offsetHeight), 0)\r\n    canvas.height = Math.max(height, playerContainer.offsetHeight)\r\n  }\r\n\r\n  /* 根据此时播放器的大小设置草稿纸的尺寸，注意setPropotions函数需在此之前调用 */\r\n  setDraftSize() {\r\n    const {\r\n      draft,\r\n      imageContainer,\r\n    } = this.domRefs\r\n    const {\r\n      draftWidth,\r\n    } = this.actionData\r\n    const {\r\n      propotions,\r\n    } = this.state\r\n    const height = imageContainer.offsetHeight\r\n    const width = draftWidth * propotions[1]\r\n    draft.width = width\r\n    draft.height = height\r\n    this.state.draftWidth = width\r\n  }\r\n\r\n  handleTimeUpdate(e) {\r\n    this.rerenderTimeInfo()\r\n    const time = e.target.currentTime * 1000\r\n    this.changeDisplaySubtitle(time)\r\n  }\r\n\r\n  rerenderTimeInfo() {\r\n    const {\r\n      domRefs: {\r\n        audio,\r\n        currentTime,\r\n        duration: durationEl,\r\n        progressbar,\r\n      },\r\n      options: {\r\n        duration,\r\n      },\r\n    } = this\r\n\r\n    currentTime.textContent = Player.normalizeTime(audio.currentTime)\r\n    durationEl.textContent = Player.normalizeTime(duration)\r\n    progressbar.style.width = `${audio.currentTime / duration * 100}%`\r\n  }\r\n\r\n  handleProgressbarOver(e) {\r\n    const {\r\n      domRefs: {\r\n        preview,\r\n      },\r\n      options: {\r\n        duration,\r\n      },\r\n    } = this\r\n\r\n    let time = this.getCursorTime(e)\r\n    time /= 1000\r\n    preview.style.left = `${time / duration * 100}%`\r\n    preview.style.visibility = 'visible'\r\n  }\r\n\r\n  handleProgressbarleave() {\r\n    const {\r\n      preview,\r\n    } = this.domRefs\r\n    preview.style.visibility = 'hidden'\r\n  }\r\n\r\n  handleProgressbarClick(e) {\r\n    this.changeProgressbarHandle(e)\r\n  }\r\n\r\n  changeProgressbarHandle(e) {\r\n    const time = this.getCursorTime(e)\r\n    this.changeCurrentTime(time)\r\n  }\r\n\r\n  showPlayerControl() {\r\n    const {\r\n      playerControl,\r\n    } = this.domRefs\r\n    const {\r\n      hidePlayerControl,\r\n    } = this.state\r\n    if (hidePlayerControl) {\r\n      window.clearTimeout(hidePlayerControl)\r\n    }\r\n    playerControl.classList.remove('fade-out')\r\n    playerControl.style.opacity = '1'\r\n    this.state.hidePlayerControl = window.setTimeout(this.fadeOutPlayerControl.bind(this), 3000)\r\n  }\r\n\r\n  fadeOutPlayerControl() {\r\n    if (!(this.state.isHalted)) {\r\n      this.domRefs.playerControl.classList.add('fade-out')\r\n    }\r\n  }\r\n  /* 获得鼠标放置位置的时间 */\r\n  getCursorTime(e) {\r\n    const wrapper = document.querySelector('.player-progressbar-wrap')\r\n    let dist = e.clientX - wrapper.getBoundingClientRect().left\r\n    dist = Math.max(0, dist)\r\n    let percent = dist / wrapper.clientWidth\r\n    percent = Math.min(percent, 1.0)\r\n    const time = this.options.duration * percent * 1000\r\n    return time\r\n  }\r\n\r\n  handlePlayButtonClick(e) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    this.togglePlay()\r\n  }\r\n\r\n  handlePlayerDoubleTap() {\r\n    this.togglePlay()\r\n  }\r\n\r\n  togglePlay() {\r\n    const {\r\n      playState,\r\n    } = this.domRefs\r\n    this[this.state.isHalted ? 'play' : 'halt']()\r\n    this.state.isHalted = !(this.state.isHalted)\r\n    playState.title = this.state.isHalted ? '播放' : '暂停'\r\n    playState.firstElementChild.className = this.state.isHalted ? 'fa fa-play' : 'fa fa-pause'\r\n    this.showPlayerControl()\r\n  }\r\n\r\n  /* 用于正在缓冲时暂停播放,此函数不改变状态变量 */\r\n  wait() {\r\n    this.setLoadingTipStatus(true)\r\n    this.halt()\r\n  }\r\n\r\n  halt() {\r\n    this.domRefs.audio.pause()\r\n    window.clearTimeout(this.state.nextAction)\r\n    window.cancelAnimationFrame(this.state.animation)\r\n  }\r\n\r\n  /* 用于缓冲结束时继续播放 */\r\n  continue() {\r\n    this.setLoadingTipStatus(false)\r\n    if (!this.state.isHalted) {\r\n      this.domRefs.audio.play()\r\n    }\r\n  }\r\n\r\n  play() {\r\n    this.domRefs.audio.play()\r\n    this.registerNextAction()\r\n    this.registerNextAnimation()\r\n  }\r\n\r\n  waitPageLoading(waitingPage, waitingTime) {\r\n    /* 等待加载的过程中暂停播放 */\r\n    this.wait()\r\n\r\n    /* 记录等待的页码和时间 */\r\n    this.state.waiting = { waitingPage, waitingTime }\r\n\r\n    /* 侦听等待图片的load事件，使得加载完成后可自动恢复播放 */\r\n    this.domRefs.images[waitingPage].addEventListener('load', () => {\r\n      const { waiting, isLoading } = this.state\r\n      const { waitingPage: currentWaitingPage, waitingTime: currentWaitingTime } = waiting\r\n\r\n      /* 如果当前正在加载，且当前等待的页码和时间与之前一致，则恢复播放，\r\n      之所以要进行后面两个判断，是因为可能在等待加载的过程中又调整了进度，这时等待的页码和时间可能与之前不同 */\r\n      if (isLoading && currentWaitingPage === waitingPage && waitingTime === currentWaitingTime) {\r\n        /* 在此函数内只需根据情况打开音频，因为changeCurrentTime会注册板书动作 */\r\n        this.continue()\r\n\r\n        /* 由于等待的页码已经加载成功，此时可以顺利地调整时间 */\r\n        this.changeCurrentTime(waitingTime)\r\n      }\r\n    })\r\n  }\r\n\r\n  /* 移动进度条时调用的函数，time单位为ms */\r\n  changeCurrentTime(time) {\r\n    const {\r\n      domRefs: {\r\n        audio,\r\n      },\r\n      state: {\r\n        isImagesLoaded,\r\n      },\r\n    } = this\r\n    /* 调整音频时间秒 */\r\n    audio.currentTime = time / 1000\r\n    this.rerenderTimeInfo()\r\n\r\n    /* 若该时刻的图片还未加载完成，待加载完成再进行动作 */\r\n    const page = this.getPageByTime(time)\r\n    if (!isImagesLoaded[page]) {\r\n      this.waitPageLoading(page, time)\r\n      return\r\n    }\r\n\r\n    if (this.state.isLoading) {\r\n      this.continue()\r\n    }\r\n\r\n    /* 取消已注册的动作 */\r\n    window.clearTimeout(this.state.nextAction)\r\n    /* 取消当前动画 */\r\n    window.cancelAnimationFrame(this.state.animation)\r\n    this.state.animationObj = null\r\n    /* 转到time时刻所在的页面 */\r\n    this.pageTo(page)\r\n    /* 恢复课件在time时刻的状态 */\r\n    this.setPageState(page, time)\r\n    /* 恢复草稿纸在time时刻的状态 */\r\n    this.setDraftState(time)\r\n    /* 设置下一个要注册的动作 */\r\n    const next = this.getNextAction(time)\r\n    if (next) {\r\n      this.state.nextActionIndex = next.actionId\r\n    } else {\r\n      this.state.nextActionIndex = -1\r\n    }\r\n    if (!(this.state.isHalted)) {\r\n      this.registerNextAction()\r\n      this.registerNextAnimation()\r\n    }\r\n    /* 重新渲染播放器控制条 */\r\n    this.changeDisplaySubtitle(time)\r\n  }\r\n\r\n  registerNextAction() {\r\n    const {\r\n      actionData: {\r\n        actions,\r\n      },\r\n      domRefs: {\r\n        audio,\r\n      },\r\n      state: {\r\n        nextActionIndex,\r\n      },\r\n    } = this\r\n    if (nextActionIndex >= actions.length || nextActionIndex < 0) {\r\n      return\r\n    }\r\n    this.state.nextAction = window.setTimeout(() => {\r\n      this.handleNextAction(true)\r\n    }, actions[nextActionIndex].startTime - audio.currentTime * 1000)\r\n  }\r\n\r\n  registerNextAnimation() {\r\n    const {\r\n      animationObj,\r\n    } = this.state\r\n    if (animationObj) {\r\n      const {\r\n        elaspedTime,\r\n      } = animationObj\r\n      animationObj.startTime = Date.now() - elaspedTime\r\n      this.state.animation = requestAnimationFrame(this.drawPoint.bind(this))\r\n    }\r\n  }\r\n\r\n  handleNextAction(needRegist) {\r\n    const {\r\n      actionData: {\r\n        actions,\r\n      },\r\n    } = this\r\n    const nextAction = actions[this.state.nextActionIndex]\r\n    switch (nextAction.type) {\r\n      case 'path':\r\n        this.drawPath(nextAction, needRegist)\r\n        break\r\n      case 'arrow':\r\n        this.drawArrow(nextAction, needRegist)\r\n        break\r\n      case 'scroll':\r\n        this.scroll(nextAction, needRegist)\r\n        break\r\n      case 'page':\r\n        this.page(nextAction, needRegist)\r\n        break\r\n      case 'withdraw':\r\n        this.withdraw(nextAction)\r\n        break\r\n      case 'clear':\r\n        this.clear(nextAction)\r\n        break\r\n      case 'eliminate':\r\n        this.eliminate(nextAction)\r\n        break\r\n      case 'draft':\r\n        this.draft(nextAction)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    /* 注册下一个动作 */\r\n    if (needRegist && this.state.nextActionIndex < actions.length - 1) {\r\n      ++this.state.nextActionIndex\r\n      this.registerNextAction()\r\n    }\r\n  }\r\n\r\n  handleActions(actions, time) {\r\n    const {\r\n      nextActionIndex,\r\n      ctx,\r\n      propotion,\r\n    } = this.state\r\n    const {\r\n      canvas,\r\n    } = ctx\r\n    actions.forEach((action, i) => {\r\n      if (i === actions.length - 1 && action.type === 'path') {\r\n        const {\r\n          startTime,\r\n          endTime,\r\n          points,\r\n        } = action\r\n        const duration = endTime - startTime\r\n        const {\r\n          length,\r\n        } = points\r\n        /* 计算有多少点出现在time时刻前，将这些点直接绘出，其余点需通过动画 */\r\n        let cnt = Math.floor((time - startTime) / duration * length)\r\n        cnt = Math.min(cnt, length)\r\n        ctx.strokeStyle = action.color\r\n        ctx.lineWidth = Math.max(propotion * action.width, 1.5)\r\n        /* 记录笔迹动画开始前的canvas数据，动画的每一帧都要恢复一次 */\r\n        this.backgroundData = ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n        this.drawPoints(points, cnt)\r\n        if (cnt >= length) {\r\n          /* 所有的点都在time时刻前出现，无需注册动画 */\r\n          this.state.animationObj = null\r\n        } else {\r\n          const elaspedTime = duration * (cnt / length)\r\n          this.state.animationObj = {\r\n            points,\r\n            startTime: Date.now() - elaspedTime,\r\n            duration,\r\n            elaspedTime,\r\n          }\r\n        }\r\n      } else {\r\n        this.state.nextActionIndex = action.actionId\r\n        this.handleNextAction(false)\r\n      }\r\n    })\r\n    this.state.nextActionIndex = nextActionIndex\r\n  }\r\n  /* 绘制points[0-end) */\r\n  drawPoints(points, end) {\r\n    const {\r\n      ctx,\r\n      propotion,\r\n    } = this.state\r\n    ctx.beginPath()\r\n    points.slice(0, end).forEach((point, i) => {\r\n      const x = point[0] * propotion\r\n      const y = point[1] * propotion\r\n      if (i === 0) {\r\n        ctx.moveTo(x, y)\r\n      } else {\r\n        ctx.lineTo(x, y)\r\n      }\r\n    })\r\n    ctx.stroke()\r\n  }\r\n\r\n  drawPath(action, animate) {\r\n    const {\r\n      points,\r\n      width,\r\n      color,\r\n      startTime,\r\n      endTime,\r\n    } = action\r\n    const {\r\n      ctx,\r\n      propotion,\r\n    } = this.state\r\n    if (!points.length) {\r\n      return\r\n    }\r\n    ctx.lineWidth = width * propotion\r\n    ctx.lineWidth = Math.max(1.5, ctx.lineWidth)\r\n    ctx.strokeStyle = color\r\n    if (!animate) {\r\n      this.drawPoints(points, points.length - 1)\r\n    } else {\r\n      const duration = endTime - startTime\r\n      /* 保存在绘制路径前canvas的数据 */\r\n      this.backgroundData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n      this.state.animationObj = {\r\n        points,\r\n        startTime: Date.now(),\r\n        duration,\r\n        elaspedTime: 0,\r\n      }\r\n      this.state.animation = requestAnimationFrame(this.drawPoint.bind(this))\r\n    }\r\n  }\r\n\r\n  drawPoint() {\r\n    if (!this.state.animationObj) {\r\n      return\r\n    }\r\n    const {\r\n      points,\r\n      startTime,\r\n      duration,\r\n    } = this.state.animationObj\r\n    const {\r\n      ctx,\r\n      propotion,\r\n    } = this.state\r\n    const {\r\n      length,\r\n    } = points\r\n    /* 清空画布，再重绘背景 */\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    ctx.putImageData(this.backgroundData, 0, 0)\r\n    /* 计算在这一帧中需要画多少个点 */\r\n    const elaspedTime = Date.now() - startTime\r\n    const percent = elaspedTime / duration\r\n    let cnt = Math.ceil(points.length * percent)\r\n    cnt = Math.min(cnt, length)\r\n    ctx.beginPath()\r\n    for (let k = 0; k < cnt; ++k) {\r\n      const point = points[k]\r\n      const x = point[0] * propotion\r\n      const y = point[1] * propotion\r\n      if (k === 0) {\r\n        ctx.moveTo(x, y)\r\n      } else {\r\n        ctx.lineTo(x, y)\r\n      }\r\n    }\r\n    ctx.stroke()\r\n    if (cnt < length) {\r\n      this.state.animationObj.elaspedTime = elaspedTime\r\n      this.state.animation = requestAnimationFrame(this.drawPoint.bind(this))\r\n    } else {\r\n      this.state.animation = null\r\n      this.state.animationObj = null\r\n    }\r\n  }\r\n\r\n  drawArrow(action) {\r\n    const {\r\n      propotion,\r\n      ctx,\r\n    } = this.state\r\n    const {\r\n      points,\r\n    } = action\r\n    ctx.lineWidth = action.width * propotion\r\n    ctx.fillStyle = action.color\r\n    /* 起始点 */\r\n    const x1 = points[0][0] * propotion\r\n    const y1 = points[0][1] * propotion\r\n    /* 结束点 */\r\n    const x2 = points[1][0] * propotion\r\n    const y2 = points[1][1] * propotion\r\n    /* 箭杆长度 */\r\n    const r = Math.sqrt((x1 - x2) ** 2 + (y1 - y2) ** 2)\r\n    const aX = x2 - (10 * propotion * (y1 - y2) / r)\r\n    const aY = y2 - (10 * propotion * (x2 - x1) / r)\r\n    const bX = x2 + (20 * propotion * (x2 - x1) / r)\r\n    const bY = y2 - (20 * propotion * (y1 - y2) / r)\r\n    const cX = x2 + (10 * propotion * (y1 - y2) / r)\r\n    const cY = y2 + (10 * propotion * (x2 - x1) / r)\r\n    const dX = x2 - (5 * propotion * (y1 - y2) / r)\r\n    const dY = y2 - (5 * propotion * (x2 - x1) / r)\r\n    const eX = x2 + (5 * propotion * (y1 - y2) / r)\r\n    const eY = y2 + (5 * propotion * (x2 - x1) / r)\r\n    ctx.beginPath()\r\n    ctx.moveTo(x1, y1)\r\n    ctx.lineTo(dX, dY)\r\n    ctx.lineTo(aX, aY)\r\n    ctx.lineTo(bX, bY)\r\n    ctx.lineTo(cX, cY)\r\n    ctx.lineTo(eX, eY)\r\n    ctx.fill()\r\n  }\r\n\r\n  clear() {\r\n    const {\r\n      ctx,\r\n    } = this.state\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n  }\r\n  /* 清除一些线 */\r\n  eliminate(action) {\r\n    if (this.state.isdraftOpen) {\r\n      this.setDraftState(action.startTime + 1)\r\n    } else {\r\n      const currentPage = this.getPageByTime(action.startTime)\r\n      this.setPageState(currentPage, action.startTime + 1)\r\n    }\r\n  }\r\n  /* 撤销当前页的上一个绘制操作 */\r\n  withdraw(action) {\r\n    if (this.state.isdraftOpen) {\r\n      this.setDraftState(action.startTime + 1)\r\n    } else {\r\n      const currentPage = this.getPageByTime(action.startTime)\r\n      this.setPageState(currentPage, action.startTime + 1)\r\n    }\r\n  }\r\n\r\n  draft(action) {\r\n    this.toggleDraft(action.status === 'open', true)\r\n  }\r\n\r\n  toggleDraft(open, animate) {\r\n    const {\r\n      draft,\r\n    } = this.domRefs\r\n    draft.style.transition = animate ? 'width 0.2s linear' : 'none'\r\n    if (open) {\r\n      draft.style.width = `${this.state.draftWidth}px`\r\n      this.state.isdraftOpen = true\r\n    } else {\r\n      draft.style.width = '0'\r\n      this.state.isdraftOpen = false\r\n    }\r\n    this.setDrawTarget()\r\n  }\r\n\r\n  /* 根据草稿纸是否打开，切换当前使用的canvas及比例 */\r\n  setDrawTarget() {\r\n    const {\r\n      isdraftOpen,\r\n      draftNum,\r\n      propotions,\r\n      contexts,\r\n    } = this.state\r\n    let ctxIndex = 0\r\n    let propIndex = 0\r\n    if (isdraftOpen) {\r\n      ctxIndex = draftNum\r\n      propIndex = 1\r\n    }\r\n    this.state.ctx = contexts[ctxIndex]\r\n    this.state.propotion = propotions[propIndex]\r\n  }\r\n\r\n  scroll(action, animate) {\r\n    const {\r\n      images,\r\n      canvas,\r\n    } = this.domRefs\r\n    const {\r\n      scrollDuration,\r\n    } = this.options\r\n    const {\r\n      propotion,\r\n    } = this.state\r\n    const currentPage = this.getPageByTime(action.startTime)\r\n    const image = images[currentPage]\r\n    /* 移动图片和canvas */\r\n    const offsetY = action.yDistance * propotion\r\n    let orginOffset = 0\r\n    const tmp = image.style.transform.match(/translateY\\(-(.*)px\\)/)\r\n    if (tmp) {\r\n      orginOffset = window.parseInt(tmp[1], 10)\r\n    }\r\n    const dist = Math.abs(orginOffset - offsetY)\r\n    const duration = dist / image.offsetHeight * propotion * scrollDuration\r\n    if (animate) {\r\n      image.style.transition = `transform ${duration}s linear`\r\n      canvas.style.transition = `transform ${duration}s linear`\r\n    } else {\r\n      image.style.transition = ''\r\n      canvas.style.transition = ''\r\n    }\r\n    image.style.transform = `translateY(${-offsetY}px)`\r\n    canvas.style.transform = `translateY(${-offsetY}px)`\r\n  }\r\n\r\n  page(action, animate) {\r\n    const {\r\n      pages,\r\n    } = this.domRefs\r\n    const currentPage = this.getPageByTime(action.startTime)\r\n    const targetPage = currentPage + (action.direction === 'next' ? 1 : -1)\r\n    if (targetPage >= pages.length || targetPage < 0) {\r\n      return\r\n    }\r\n\r\n    if (!this.state.isImagesLoaded[targetPage]) {\r\n      this.waitPageLoading(targetPage, action.startTime - 1)\r\n      return\r\n    }\r\n\r\n    /* 转到该页 */\r\n    this.pageTo(targetPage, animate)\r\n    this.setPageState(targetPage, action.startTime)\r\n  }\r\n\r\n  setPageState(page, time) {\r\n    const {\r\n      images,\r\n    } = this.domRefs\r\n    /* 关闭草稿纸，将笔迹绘制在课件上 */\r\n    this.state.isdraftOpen = false\r\n    this.setDrawTarget()\r\n    const {\r\n      ctx,\r\n    } = this.state\r\n    const {\r\n      canvas,\r\n    } = ctx\r\n    /* 重做该页之前发生过的所有动作 */\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n    /* 因为之后要重做在page页上发生的动作（包括滚动），所以这里将该页的图片和canvas的垂直偏移置为0 */\r\n    canvas.style.transform = 'translateY(0px)'\r\n    images[page].style.transform = 'translateY(0px)'\r\n    const actions = this.getDrawActionsOnPage(page, time)\r\n    this.handleActions(actions, time)\r\n  }\r\n\r\n  /* 将草稿纸恢复到time时刻的状态 */\r\n  setDraftState(time) {\r\n    /* 将草稿纸设置成打开的状态 */\r\n    this.state.isdraftOpen = true\r\n    this.setDrawTarget()\r\n    /* 重新绘制草稿纸上的笔迹 */\r\n    const {\r\n      ctx,\r\n    } = this.state\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    const draftActions = this.getActionsOnDraft(time)\r\n    this.handleActions(draftActions, time)\r\n    /* 设置time时刻草稿纸的状态 */\r\n    this.state.isdraftOpen = this.getDraftStatus(time) === 'open'\r\n    this.toggleDraft(this.state.isdraftOpen, false)\r\n  }\r\n\r\n  getDraftStatus(time) {\r\n    const {\r\n      actionData: {\r\n        actions,\r\n      },\r\n    } = this\r\n    let isdraftOpen = 'close'\r\n    for (let i = 0; i < actions.length && time > actions[i].startTime; ++i) {\r\n      const action = actions[i]\r\n      if (action.type === 'draft') {\r\n        isdraftOpen = action.status\r\n      }\r\n    }\r\n    return isdraftOpen\r\n  }\r\n\r\n  getActionsOnDraft(time) {\r\n    const {\r\n      actionData: {\r\n        actions,\r\n      },\r\n    } = this\r\n    const res = []\r\n    let isdraftOpen = false\r\n    for (let i = 0; i < actions.length && time > actions[i].startTime; ++i) {\r\n      const action = actions[i]\r\n      if (action.type === 'draft') {\r\n        isdraftOpen = (action.status === 'open')\r\n      } else if (isdraftOpen) {\r\n        res.push(action)\r\n      }\r\n    }\r\n    return Player.filterActions(res)\r\n  }\r\n\r\n  pageTo(targetIndex, animate) {\r\n    const {\r\n      pages,\r\n    } = this.domRefs\r\n    pages.forEach((page) => {\r\n      page.style.transition = animate ? 'transform 0.2s ease' : 'none'\r\n      page.style.transform = `translateY(-${page.offsetHeight * targetIndex}px)`\r\n    })\r\n  }\r\n\r\n  /* 返回time时刻所在的页码 */\r\n  getPageByTime(time) {\r\n    const {\r\n      actionData: {\r\n        actions,\r\n      },\r\n    } = this\r\n    let page = 0\r\n    for (let i = 0; i < actions.length && actions[i].startTime < time; ++i) {\r\n      if (actions[i].type === 'page') {\r\n        page += actions[i].direction === 'prev' ? -1 : 1\r\n      }\r\n    }\r\n    return page\r\n  }\r\n  /* 获得time时刻前在page上进行过的所有未被撤销、未被清除的移动和绘制操作 */\r\n  getDrawActionsOnPage(page, time) {\r\n    return Player.filterActions(this.getActionsOnPage(page, time))\r\n  }\r\n  /* 根据撤销和消除操作对actions进行过滤 */\r\n  static filterActions(actions) {\r\n    /* 需要收集的动作类型 */\r\n    const includeTypes = ['arrow', 'scroll', 'path', 'clear', 'eliminate']\r\n    /* 可以被撤销的动作类型 */\r\n    const withdrawTypes = ['arrow', 'path', 'clear', 'eliminate']\r\n    const res = []\r\n    let eliminatedIds = []\r\n    for (let i = 0; i < actions.length; ++i) {\r\n      const action = actions[i]\r\n      /* 只收集进行的移动和绘制操作 */\r\n      if (includeTypes.indexOf(action.type) !== -1) {\r\n        /* 判断这个操作是否被之后的撤销操作撤销了 */\r\n        let withdraw = false\r\n        if (withdrawTypes.indexOf(action.type) !== -1) {\r\n          /* 若cnt变为0，则说明这个动作被撤销了 */\r\n          let cnt = 1\r\n          /* 这里加入了对page类型的判断，因为如果翻页之后再翻回来，之前的操作便不可撤销了 */\r\n          for (let j = i + 1; j < actions.length && actions[j].type !== 'page'; ++j) {\r\n            if (actions[j].type === 'withdraw') {\r\n              --cnt\r\n              if (!cnt) {\r\n                withdraw = true\r\n                break\r\n              }\r\n            }\r\n            if (withdrawTypes.indexOf(actions[j].type) !== -1) {\r\n              ++cnt\r\n            }\r\n          }\r\n        }\r\n        if (!withdraw) {\r\n          if (action.type === 'eliminate') {\r\n            eliminatedIds = eliminatedIds.concat(action.eliminateIds)\r\n          } else {\r\n            res.push(action)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return res.filter(action => !action.id || eliminatedIds.indexOf(action.id) === -1)\r\n  }\r\n  /* time时刻在page上进行的动作 */\r\n  getActionsOnPage(page, time) {\r\n    const {\r\n      actionData: {\r\n        actions,\r\n      },\r\n    } = this\r\n    let currentPage = 0\r\n    const res = []\r\n    let isdraftOpen = false\r\n    for (let i = 0; i < actions.length && actions[i].startTime < time; ++i) {\r\n      const action = actions[i]\r\n      if (action.type === 'draft') {\r\n        isdraftOpen = action.status === 'open'\r\n        continue\r\n      }\r\n      if (currentPage === page && !isdraftOpen) {\r\n        res.push(action)\r\n      }\r\n      if (action.type === 'page') {\r\n        currentPage += action.direction === 'next' ? 1 : -1\r\n      }\r\n    }\r\n    return res\r\n  }\r\n  /* 返回time时刻的下一个动作 */\r\n  getNextAction(time) {\r\n    const {\r\n      actionData: {\r\n        actions,\r\n      },\r\n    } = this\r\n    for (let i = 0; i < actions.length; ++i) {\r\n      const {\r\n        startTime,\r\n      } = actions[i]\r\n      if (startTime >= time) {\r\n        return actions[i]\r\n      }\r\n    }\r\n  }\r\n\r\n  /* 将秒表示的时间转换为00:00:00格式 */\r\n  static normalizeTime(time) {\r\n    /* 精确到s */\r\n    time = Math.floor(time)\r\n    const hours = Math.floor(time / 3600)\r\n    const remain = time % 3600\r\n    const minutes = Math.floor(remain / 60)\r\n    const seconds = remain % 60\r\n    let res = ''\r\n    /* 如果短于1h，不要小时段 */\r\n    res += hours ? `${hours}:` : ''\r\n    /* 如果前面有小时段，分钟至少为两位数 */\r\n    if (hours && minutes < 10) {\r\n      res += '0'\r\n    }\r\n    res += `${minutes}:`\r\n    if (seconds < 10) {\r\n      res += '0'\r\n    }\r\n    res += seconds\r\n    return res\r\n  }\r\n\r\n  changeDisplaySubtitle(currentTime) {\r\n    const {\r\n      subtitles,\r\n      isCaptionsOpen,\r\n      currentSubtitleIndex,\r\n    } = this.state\r\n    const {\r\n      playerContainer,\r\n      captions,\r\n    } = this.domRefs\r\n    if (!subtitles.length) {\r\n      return\r\n    }\r\n    /* 如果当前时间比现在字幕的时间小，则从索引0开始查，否则从当前索引开始查 */\r\n    const begin = parseFloat(subtitles[currentSubtitleIndex].beginTime) > currentTime ? 0 : currentSubtitleIndex\r\n    let res = -1\r\n    let hasSubtitle = false\r\n    let i\r\n    for (i = begin; i < subtitles.length && parseFloat(subtitles[i].beginTime) <= currentTime; ++i) {\r\n      if (parseFloat(subtitles[i].endTime) >= currentTime) {\r\n        hasSubtitle = true\r\n        res = i\r\n        break\r\n      }\r\n    }\r\n    if (!hasSubtitle) {\r\n      res = Math.min(subtitles.length - 1, i)\r\n    }\r\n    /* 更新播放器字幕节点文本内容 */\r\n    if (isCaptionsOpen) {\r\n      if (hasSubtitle) {\r\n        captions.style.display = 'block'\r\n        captions.lastElementChild.textContent = subtitles[res].text\r\n      } else {\r\n        captions.style.display = 'none'\r\n      }\r\n    }\r\n    const event = new CustomEvent('subtitlechange', {\r\n      detail: {\r\n        hasSubtitle,\r\n        subtitleIndex: res,\r\n      },\r\n    })\r\n    playerContainer.dispatchEvent(event)\r\n    this.state.currentSubtitleIndex = res\r\n  }\r\n\r\n  /* 渲染 string 表示的 HTML 元素并将之插入到第一个参数所指向的元素中，之后返回该元素 */\r\n  static renderStringToNode(parent, string) {\r\n    const elem = document.createElement('div')\r\n    elem.innerHTML = string\r\n    /* 注意调用appenChild会将之从原来的parent节点remove掉,并附加在新parent的最后 */\r\n    parent.appendChild(elem.firstElementChild)\r\n    return parent.lastElementChild\r\n  }\r\n\r\n  updateSubtitles(subtitles) {\r\n    this.state.subtitles = subtitles\r\n  }\r\n\r\n  unmount() {\r\n    const {\r\n      playerContainer,\r\n      audio,\r\n      fullscreen,\r\n      pageFullscreen,\r\n      playState,\r\n      progressbarWrapper,\r\n      playerControl,\r\n      progressHandle,\r\n      toggleCaptionsButton,\r\n      captions,\r\n      loadTip,\r\n      images,\r\n    } = this.domRefs\r\n    const {\r\n      nextAction,\r\n      animation,\r\n      hidePlayerControl,\r\n    } = this.state\r\n\r\n    /* 将播放器从dom树中移除 */\r\n    while (playerContainer.firstChild) {\r\n      playerContainer.removeChild(playerContainer.firstChild)\r\n    }\r\n\r\n    /* 移除PC端事件 */\r\n    if (this.options.mode === 'desktop') {\r\n      playerControl.removeEventListener('mouseenter', this.showPlayerControl)\r\n      playerControl.removeEventListener('mousemove', this.showPlayerControl)\r\n      loadTip.removeEventListener('mouseenter', this.showPlayerControl)\r\n      loadTip.removeEventListener('mousemove', this.showPlayerControl)\r\n      loadTip.removeEventListener('click', this.handlePlayButtonClick)\r\n      pageFullscreen.removeEventListener('click', this.handlePageFullscreenClick)\r\n      progressbarWrapper.removeEventListener('mouseover', this.handleProgressbarOver)\r\n      progressbarWrapper.removeEventListener('mouseleave', this.handleProgressbarleave)\r\n      progressbarWrapper.removeEventListener('mousemove', this.handleProgressbarOver)\r\n      progressHandle.removeEventListener('mousedown', this.handleSeekMousedown)\r\n      captions.removeEventListener('mousedown', this.handleCaptionsDown)\r\n    }\r\n\r\n    /* 移除公共事件 */\r\n    audio.removeEventListener('timeupdate', this.handleTimeUpdate)\r\n    audio.removeEventListener('ended', this.handleEnded)\r\n    audio.removeEventListener('canplay', this.handleAudioLoaded)\r\n    audio.removeEventListener('canplaythrough', this.handleAudioLoaded)\r\n    audio.removeEventListener('loadeddata', this.handleAudioLoaded)\r\n    audio.removeEventListener('loadedmetadata', this.handleAudioLoaded)\r\n\r\n    playState.removeEventListener('click', this.handlePlayButtonClick)\r\n    fullscreen.removeEventListener('click', this.handleFullscreenClick)\r\n    fscreen.removeEventListener('fullscreenchange', this.handleFullscreenChange)\r\n    toggleCaptionsButton.removeEventListener('click', this.handleCaptionButtonClick)\r\n    progressbarWrapper.removeEventListener('click', this.handleProgressbarClick)\r\n    window.removeEventListener('orientationchange', this.handleRotateScreen)\r\n    window.removeEventListener('resize', this.handleWindowResize)\r\n\r\n    images[0].removeEventListener('load', this.handleFirstImageLoaded)\r\n\r\n    if (this.options.mode === 'mobile') {\r\n      // 移除移动端事件\r\n      const {\r\n        handleHammer,\r\n        captionsHammer,\r\n        loadTipHammer,\r\n      } = this.state.hammers\r\n\r\n      handleHammer.destroy()\r\n      captionsHammer.destroy()\r\n      loadTipHammer.destroy()\r\n\r\n      if (this.options.mode === 'mobile') {\r\n        const loadButton = loadTip.querySelector('.player-load-button')\r\n        loadButton.removeEventListener('click', this.fetchSource)\r\n      }\r\n    }\r\n\r\n    /* 清除使用setTimeout, requestAnimation注册的操作 */\r\n    /* 无需判断clearTimeout的参数是否为null，因为即使传入错误的值也不会抛出异常 */\r\n    window.clearTimeout(hidePlayerControl)\r\n    window.clearTimeout(nextAction)\r\n    if (animation) {\r\n      window.cancelAnimationFrame(animation)\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/Player/Player/src/Player.js","<template>\r\n  <div class='commentContainer'>\r\n\r\n    <!-- 评论输入框 -->\r\n    <mt-field\r\n      class='commentInput'\r\n      placeholder='评论'\r\n      disableClear\r\n      v-model='myComment'\r\n    >\r\n      <i\r\n        class='fa fa-picture-o'\r\n        style='font-size: 20px;'\r\n        v-if='!preview0'\r\n        @click='isShowUploadImagesDialog = true'\r\n      />\r\n      <img\r\n        width='35px'\r\n        v-if='preview0'\r\n        :src='preview0'\r\n      />\r\n      <mt-button\r\n        style='margin-left: 10px; height: 35px; background-color: #418642; color: #FFF'\r\n        @click='confirmComment()'\r\n      >\r\n        提交\r\n      </mt-button>\r\n    </mt-field>\r\n\r\n    <!-- 评论容器 -->\r\n    <div\r\n      class='commentCell'\r\n      v-for='(comment, index) in commentList'\r\n      :key='comment.id'\r\n    >\r\n      <div class='commentTop'>\r\n        <img\r\n          class='avatar'\r\n          :src='comment.avatar'\r\n        />\r\n        <span class='userName'>{{comment.userName}}</span>\r\n        <div class='approve'>\r\n          <i\r\n            class='fa fa-thumbs-o-up'\r\n            style='font-size: 18px; margin-right: 5px;'\r\n            :id='\"approve\" + comment.id'\r\n            @click='approveHandle(index, 0, 1)'\r\n          />\r\n          <span>{{comment.approve.length}}</span>\r\n        </div>\r\n      </div>\r\n      <p class='text'>{{comment.text}}</p>\r\n      <div\r\n        class='imagesBox'\r\n        v-if='comment.images.length'\r\n      >\r\n        <img\r\n          class='textImg'\r\n          :src='img'\r\n          v-for='img in comment.images'\r\n          @click='showImg(img)'\r\n        >\r\n      </div>\r\n      <span style='color: gray; font-size: 12px;'>\r\n        {{formatTime(comment.createTime)}}\r\n      </span>\r\n      <span\r\n        class='replyBtn'\r\n        @click='handleOnReply(index, -1, \"comment\")'\r\n      >\r\n        回复({{comment.replies.length}})\r\n      </span>\r\n      <span\r\n        class='deleteBtn'\r\n        v-if='userType === \"master\" || userType === comment.accountId'\r\n        @click='handleOnDeleteComment(comment.id)'\r\n      >\r\n        删除\r\n      </span>\r\n    </div>\r\n    <h3 v-if='!commentList.length' style='color: gray'>暂无评论，快来评论吧！</h3>\r\n\r\n    <!-- 图片上传弹框 -->\r\n    <mt-popup\r\n      class='imagesUploadDialog'\r\n      popup-transition='popup-fade'\r\n      v-model='isShowUploadImagesDialog'\r\n    >\r\n      <div>\r\n        <p style='padding-bottom: 10px; color: #555'>最多可上传3张图片</p>\r\n        <div style='display: flex; align-items: center;'>\r\n          <img :src='preview0' v-if='preview0 !== \"\"' height='100px' style='border-radius: 5px; border: solid 1px #DDD; margin-right: 10px;'>\r\n          <img :src='preview1' v-if='preview1 !== \"\"' height='100px' style='border-radius: 5px; border: solid 1px #DDD; margin-right: 10px;'>\r\n          <img :src='preview2' v-if='preview2 !== \"\"' height='100px' style='border-radius: 5px; border: solid 1px #DDD; margin-right: 10px;'>\r\n          <i\r\n            class='fa fa-plus-square-o'\r\n            style='font-size: 100px; padding-left: 10px; padding-right: 10px; border-radius: 5px; border: solid 1px #DDD;'\r\n            v-if='preview2 === \"\"'\r\n            @click='clickUploadImageInputForComment'\r\n          />\r\n          <input\r\n            ref='uploadImageInputForComment'\r\n            accept='image/*'\r\n            type='file'\r\n            multiple\r\n            style='display: none'\r\n            :value='inputImage'\r\n            @change='handleInputChange'\r\n          />\r\n        </div>\r\n        <div style='display: flex; justify-content: center; align-self: center; margin-top: 30px;'>\r\n          <mt-button\r\n            style='margin-right: 10px; padding-left: 30px; padding-right: 30px;'\r\n            @click='confirmUploadImages'\r\n          >\r\n            确定\r\n          </mt-button>\r\n          <mt-button\r\n            style='margin-left: 10px; padding-left: 30px; padding-right: 30px;'\r\n            @click='cancelUploadImages'\r\n          >\r\n            取消\r\n          </mt-button>\r\n        </div>\r\n      </div>\r\n    </mt-popup>\r\n\r\n    <!-- 回复的弹框 -->\r\n    <mt-popup\r\n      class='replyPop'\r\n      position='right'\r\n      v-if='Object.keys(commentObj).length'\r\n      v-model='replyVisible'\r\n    >\r\n      <div>\r\n        <mt-button\r\n          style='margin-top: 10px; margin-bottom: 10px; padding-left: 10px; padding-right: 10px;'\r\n          @click='replyVisible = false'\r\n        >\r\n          返回\r\n        </mt-button>\r\n      </div>\r\n      <div class='commentCell'>\r\n        <div class='commentTop'>\r\n          <img\r\n            class='avatar'\r\n            :src='commentObj.avatar'\r\n          />\r\n          <span class='userName'>{{commentObj.userName}}</span>\r\n          <div class='approve'>\r\n            <i\r\n              class='fa fa-thumbs-o-up'\r\n              style='font-size: 18px; margin-right: 5px;'\r\n              :id='\"approvepop\" + commentObj.id'\r\n              @click='approveHandle(-1, 0, 1)'\r\n            />\r\n            <span>{{approveL}}</span>\r\n          </div>\r\n        </div>\r\n        <p class='text'>{{commentObj.text}}</p>\r\n        <div\r\n          class='imagesBox'\r\n          v-if='commentObj.images.length'\r\n        >\r\n          <img\r\n            class='textImg'\r\n            :src='img'\r\n            v-for='img in commentObj.images'\r\n            @click='showImg(img)'\r\n          >\r\n        </div>\r\n        <span style='color: gray; font-size: 12px;'>\r\n          {{formatTime(commentObj.createTime)}}\r\n        </span>\r\n        <span\r\n          class='replyBtn'\r\n          @click='handleOnReply(-1, -1, \"comment\")'\r\n        >\r\n          回复({{replyList.length}})\r\n        </span>\r\n      </div>\r\n      <hr>\r\n      <div\r\n        class='commentCell'\r\n        v-for='(reply, i) in replyList'\r\n      >\r\n        <div class='commentTop'>\r\n          <img\r\n            class='avatar'\r\n            :src='reply.avatar'\r\n          />\r\n          <span class='userName'>{{reply.userName}}</span>\r\n          <span style='font-size: 14px; color:gray; margin-left: 5px; margin-right: 5px;'>@:</span>\r\n          <span class='userName'>{{reply.originUserName}}</span>\r\n          <div class='approve'>\r\n            <i\r\n              class='fa fa-thumbs-o-up'\r\n              style='font-size: 18px; margin-right: 5px;'\r\n              :id='\"approve\" + reply.id'\r\n              @click='approveHandle(index, i, 2)'\r\n            />\r\n            <span>{{reply.approve.length}}</span>\r\n          </div>\r\n        </div>\r\n        <p class='text'>{{reply.text}}</p>\r\n        <div\r\n          class='imagesBox'\r\n          v-if='reply.images.length'\r\n        >\r\n          <img\r\n            class='textImg'\r\n            :src='img'\r\n            v-for='img in reply.images'\r\n            @click='showImg(img)'\r\n          />\r\n        </div>\r\n        <span style='color: gray; font-size: 12px;'>\r\n          {{formatTime(reply.createTime)}}\r\n        </span>\r\n        <span\r\n          class='replyBtn'\r\n          @click='handleOnReply(-1, i, \"reply\")'\r\n        >\r\n          回复\r\n        </span>\r\n        <span\r\n          class='deleteBtn'\r\n          v-if='userType === \"master\" || userType === reply.accountId'\r\n          @click='handleOnDeleteReply(commentObj.id, reply.id)'\r\n        >\r\n          删除\r\n        </span>\r\n      </div>\r\n    </mt-popup>\r\n\r\n    <!-- 回复对话框 -->\r\n    <mt-popup\r\n      class='imagesUploadDialog'\r\n      v-model='rrVisible'\r\n    >\r\n      <mt-field\r\n        class='replyInput'\r\n        placeholder='请输入回复'\r\n        v-model='replyText'\r\n      />\r\n      <div style='text-align: left;margin-top: 5px;'>\r\n        <p style='font-size: 12px;color:gray;margin:0 12px'>至多可提交3张图片</p>\r\n        <img :src='preview0' v-if=' preview0 !== \"\" ' height='70px' style='margin-left: 10px;'>\r\n        <img :src='preview1' v-if=' preview1 !== \"\" ' height='70px' >\r\n        <img :src='preview2' v-if=' preview2 !== \"\" ' height='70px' >\r\n        <i\r\n          class='fa fa-plus-square-o'\r\n          style='font-size: 70px;margin-left: 5%;' v-if=' preview2 === \"\" '\r\n          @click='clickUploadImageInputForReply'\r\n        />\r\n        <input\r\n          ref='uploadImageInputForReply'\r\n          type='file'\r\n          accept='image/*'\r\n          multiple\r\n          style='display: none'\r\n          :value='inputImage'\r\n          @change='handleInputChange'\r\n        >\r\n      </div>\r\n      <div style='display: flex; justify-content: center; align-self: center; margin-top: 30px;'>\r\n        <mt-button\r\n          style='margin-right: 10px; padding-left: 30px; padding-right: 30px;'\r\n          @click='confirmReply'\r\n        >\r\n          确定\r\n        </mt-button>\r\n        <mt-button\r\n          style='margin-left: 10px; padding-left: 30px; padding-right: 30px;'\r\n          @click='cancleReply'\r\n        >\r\n          取消\r\n        </mt-button>\r\n      </div>\r\n    </mt-popup>\r\n\r\n    <mt-popup\r\n      position='right'\r\n      class='showImg'\r\n      v-model='showImgVisible'\r\n    >\r\n      <img\r\n        style='width: 100%; height: 100%;'\r\n        :src='showImgUrl'\r\n      />\r\n    </mt-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { Toast } from 'mint-ui'\r\nimport { Indicator } from 'mint-ui'\r\nimport Viewer from 'viewerjs'\r\n\r\nexport default {\r\n  name: 'Comment',\r\n\r\n  props: {\r\n    docId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    comments: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    userType: {\r\n      type: [String, Number],\r\n      required: true,\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      activeCommentIndex: -1,\r\n      activeReplyIndex: -1,\r\n      approveL: 0,\r\n      approveList: [],\r\n      commentId: '',\r\n      commentList: this.comments,\r\n      commentObj: {},\r\n      images: [],\r\n      index: -1,\r\n      inputImage: '',\r\n      /* 是否显示底部评论工具条的 */\r\n      isShowUploadImagesDialog: false,\r\n      myComment: '',\r\n      preview0: '',\r\n      preview1: '',\r\n      preview2: '',\r\n      replyFormData: new FormData(),\r\n      replyId: -1,\r\n      replyList: [],\r\n      replyText: '',\r\n      replyType: '',\r\n      replyVisible: false,\r\n      rrVisible: false,\r\n      showImgUrl: '',\r\n      showImgVisible: false,\r\n      uploadFile: [],\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    comments() {\r\n      this.commentList = this.comments\r\n\r\n      if (this.activeCommentIndex !== -1 && this.replyVisible) {\r\n        this.commentObj = this.commentList[this.activeCommentIndex]\r\n      }\r\n    },\r\n\r\n    commentObj() {\r\n      if (Object.keys(this.commentObj).length) {\r\n        this.approveL = this.commentObj.approve.length\r\n        this.replyList = this.commentObj.replies\r\n\r\n        this.replyFormData = new FormData()\r\n        this.replyFormData.append('commentId', this.commentObj.id)\r\n        if (this.replyType === 'comment') {\r\n          this.replyFormData.append('sourceId', this.commentObj.accountId)\r\n        } else {\r\n          this.replyFormData.append('sourceId', this.commentObj.replies[this.activeReplyIndex].accountId)\r\n        }\r\n      }\r\n    },\r\n\r\n    replyVisible() {\r\n      if (!this.replyVisible) {\r\n        this.commentObj = {}\r\n      }\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    confirmComment() {\r\n      if (this.myComment === '' && this.preview0 === '') {\r\n        Toast('请输入评论')\r\n      } else {\r\n        const formData = new FormData()\r\n        formData.append('text', this.myComment)\r\n        formData.append('docId', this.docId)\r\n        this.uploadFile.forEach((file) => {\r\n          formData.append('files', file)\r\n        })\r\n\r\n        Indicator.open('发表评论中')\r\n\r\n        this\r\n          .$http\r\n          .post('/comments/', formData)\r\n          .then((respones) => {\r\n            /* 触发提交评论成功事件，更新外部传入的评论数据 */\r\n            this.$emit('addCommentSuccess', respones.data)\r\n          })\r\n          .then(() => {\r\n            Indicator.close()\r\n            Toast({\r\n              message: '评论成功',\r\n              iconClass: 'fa fa-check',\r\n            })\r\n          })\r\n          .catch((error) => {\r\n            if (process.env.NODE_ENV === 'development') {\r\n              throw error\r\n            } else {\r\n              Indicator.close()\r\n              Toast({\r\n                message: '评论失败',\r\n                iconClass: 'fa fa-exclamation-triangle',\r\n              })\r\n            }\r\n          })\r\n\r\n        this.myComment = ''\r\n        this.removeUploadImages()\r\n      }\r\n    },\r\n\r\n    /* 处于评论状态时点击上传图片按钮 */\r\n    clickUploadImageInputForComment() {\r\n      this.inputImage = ''\r\n      this.$refs.uploadImageInputForComment.click()\r\n    },\r\n\r\n    /* 处于回复状态时点击上传图片按钮 */\r\n    clickUploadImageInputForReply() {\r\n      this.inputImage = ''\r\n      this.$refs.uploadImageInputForReply.click()\r\n    },\r\n\r\n    /* 转换文件类型 */\r\n    handleInputChange(event) {\r\n      if (event.target.files) {\r\n        this.uploadFile = Array.from(event.target.files)\r\n        this.uploadFile.forEach((file) => {\r\n          if (this.preview0 === '') {\r\n            this.preview0 = window.URL.createObjectURL(file)\r\n          } else if (this.preview1 === '') {\r\n            this.preview1 = window.URL.createObjectURL(file)\r\n          } else {\r\n            this.preview2 = window.URL.createObjectURL(file)\r\n          }\r\n        })\r\n      }\r\n    },\r\n\r\n    /* 确认上传图片 */\r\n    confirmUploadImages() {\r\n      this.isShowUploadImagesDialog = false\r\n    },\r\n\r\n    /* 取消上传图片 */\r\n    cancelUploadImages() {\r\n      this.isShowUploadImagesDialog = false\r\n      this.removeUploadImages()\r\n    },\r\n\r\n    /* 删除图片相关 */\r\n    removeUploadImages() {\r\n      this.uploadFile = []\r\n      this.preview0 = ''\r\n      this.preview1 = ''\r\n      this.preview2 = ''\r\n    },\r\n\r\n    showImg(imgUrl) {\r\n      this.showImgUrl = imgUrl\r\n      this.showImgVisible = true\r\n    },\r\n\r\n    /* 点击回复按钮（这个函数写的什么几把玩意儿） */\r\n    /* 当 index 非负， i 为 -1，type 为 comment 时，表示当前点击回复按钮的操作是在评论列表中触发的，index 表示被回复的评论的数组下标 */\r\n    /* 当 index 为 -1，i 为 -1，type 为 comment 时，表示当前点击回复按钮的操作是在回复对话框中评论的下面触发的 */\r\n    /* 当 index 为 -1，i 非负，type 为 reply 时，表示当前点击回复按钮的操作是在回复对话框回复列表中触发的，index 表示被回复的回复的数组下标 */\r\n    handleOnReply(index, i, type) {\r\n      /* 设置处于活动状态的评论 */\r\n      if (index !== -1) {\r\n        this.activeCommentIndex = index\r\n      }\r\n\r\n      /* 设置处于活动状态的回复 */\r\n      if (i !== -1) {\r\n        this.activeReplyIndex = i\r\n      }\r\n\r\n      /* 设置回复的类型，目前分为回复评论和回复回复 */\r\n      this.replyType = type\r\n\r\n      this.commentObj = this.commentList[this.activeCommentIndex]\r\n\r\n      this.replyVisible = true\r\n      this.rrVisible = true\r\n    },\r\n\r\n    /* 确认回复 */\r\n    confirmReply() {\r\n      this.rrVisible = false\r\n      this.confirmUploadImages()\r\n\r\n      if (this.replyText === '' && this.preview0 === '') {\r\n        Toast('请输入回复')\r\n      } else {\r\n        Indicator.open('发表回复中')\r\n\r\n        this.uploadFile.forEach((file) => {\r\n          this.replyFormData.append('files', file)\r\n        })\r\n        this.replyFormData.append('text', this.replyText)\r\n\r\n        this.preview0 = ''\r\n\r\n        this\r\n          .$http\r\n          .post(`/comments/${this.commentList[this.activeCommentIndex].id}/reply`, this.replyFormData)\r\n          .then((respones) => {\r\n            this.$emit('addReplySuccess', respones.data)\r\n\r\n            this.replyText = ''\r\n            this.replyFormData = new FormData()\r\n            this.removeUploadImages()\r\n\r\n            /* 关闭上传评论提示 */\r\n            Indicator.close()\r\n            Toast({\r\n              message: '回复成功',\r\n              iconClass: 'icon icon-success',\r\n            })\r\n          })\r\n          .catch((error) => {\r\n            if (process.env.NODE_ENV === 'development') {\r\n              throw error\r\n            } else {\r\n              /* 关闭上传评论提示 */\r\n              Indicator.close()\r\n              Toast({\r\n                message: '回复失败',\r\n                iconClass: 'fa fa-exclamation-triangle',\r\n              })\r\n            }\r\n          })\r\n      }\r\n    },\r\n\r\n    /* 取消回复 */\r\n    cancleReply() {\r\n      this.removeUploadImages()\r\n      this.rrVisible = false\r\n      this.replyText = ''\r\n    },\r\n\r\n    /* 点赞 */\r\n    approveHandle(index, i, type) {\r\n      if (index === -1) {\r\n        index = this.activeCommentIndex\r\n      }\r\n      if (type === 1) {\r\n        /* 点赞评论 */\r\n        this.commentId = this.commentList[index].id\r\n        this.accountId = this.commentList[index].accountId\r\n        this.approveList = this.commentList[index].approve\r\n      } else {\r\n        /* 点赞回复 */\r\n        this.commentId = this.commentList[index].replies[i].id\r\n        this.accountId = this.commentList[index].replies[i].accountId\r\n        this.approveList = this.commentList[index].replies[i].approve\r\n      }\r\n      /* 检查此评论是否被点赞过（查找list中有没有这个accountId） */\r\n      if (this.approveList.indexOf(this.accountId) === -1) {\r\n        document.getElementById(`approve${this.commentId}`).style.color = '#2196F3'\r\n        if (document.getElementById(`approvepop${this.commentId}`)) {\r\n          document.getElementById(`approvepop${this.commentId}`).style.color = '#2196F3'\r\n        }\r\n        this.approveList.push(this.accountId)\r\n        if (type === 1) {\r\n          this.approveL = this.approveList.length\r\n        }\r\n        this\r\n          .$http\r\n          .put(`/comments/${this.commentId}/approve`, { approve: true })\r\n      } else {\r\n        const cancleIndex = this.approveList.indexOf(this.accountId)\r\n        this.approveList.splice(cancleIndex, 1)\r\n        if (type === 1) {\r\n          this.approveL = this.approveList.length\r\n        }\r\n        document.getElementById(`approve${this.commentId}`).style.color = 'black'\r\n        if (document.getElementById(`approvepop${this.commentId}`)) {\r\n          document.getElementById(`approvepop${this.commentId}`).style.color = 'black'\r\n        }\r\n        this.$http.put(`/comments/${this.commentId}/approve`, { approve: false })\r\n      }\r\n    },\r\n\r\n    /* 格式化时间 */\r\n    formatTime(time) {\r\n      const parseTime = new Date(time)\r\n\r\n      return `${parseTime.getFullYear()}-${parseTime.getMonth() + 1}-${parseTime.getDate()} ${this.paddingNumberWithZero(parseTime.getHours())}:${this.paddingNumberWithZero(parseTime.getMinutes())}:${this.paddingNumberWithZero(parseTime.getSeconds())}`\r\n    },\r\n\r\n    /* 针对只有个位的数字，返回一个前置补零的字符串 */\r\n    paddingNumberWithZero(number) {\r\n      return number > 9 ? String(number) : `0${number}`\r\n    },\r\n\r\n    handleOnDeleteComment(commentId) {\r\n      this.$emit('handleOnDeleteComment', commentId)\r\n    },\r\n\r\n    handleOnDeleteReply(commentId, replyId) {\r\n      this.$emit('handleOnDeleteReply', commentId, replyId)\r\n    },\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.commentContainer {\r\n  margin: 10px 10px 60px;\r\n}\r\n\r\n.commentInput {\r\n  position: fixed;\r\n  z-index: 200;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  border-top: 1px solid #AAA;\r\n}\r\n\r\n.commentCell {\r\n  margin-bottom: 10px;\r\n  padding: 5px;\r\n  border-radius: 5px;\r\n  background-color: #EEE;\r\n}\r\n\r\n.commentTop {\r\n  position: relative;\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: center;\r\n}\r\n\r\n.avatar {\r\n  width: 25px;\r\n  height: 25px;\r\n  border: 1px solid lightgray;\r\n  border-radius: 50%;\r\n}\r\n\r\n.userName {\r\n  font-size: 16px;\r\n  color: #5082B4;\r\n  margin-left: 5px;\r\n}\r\n\r\n.approve {\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 0;\r\n  transform: translate(0, -50%);\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n\r\n.text {\r\n  padding: 5px 30px;\r\n  word-wrap: break-word;\r\n}\r\n\r\n.imagesBox {\r\n  padding-left: 30px;\r\n}\r\n\r\n.mint-indicator-wrapper {\r\n  z-index: 2100 !important;\r\n}\r\n\r\n.mint-toast {\r\n  z-index: 2100 !important;\r\n}\r\n\r\n.changeColor {\r\n  color: blue;\r\n}\r\n\r\n.line {\r\n  display: inline-block;\r\n  width: 100%;\r\n  text-align: center;\r\n  border: 0.5px solid #ddd;\r\n}\r\n\r\n.top {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.showImg {\r\n  width: 80%;\r\n  margin-right: 10%;\r\n}\r\n\r\n.imagesUploadDialog {\r\n  box-sizing: border-box;\r\n  min-width: 80%;\r\n  min-height: 200px;\r\n  max-height: 400px;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.textImg {\r\n  width: 60px;\r\n  height: 60px;\r\n  font-size: 14px;\r\n  display: inline-block;\r\n  padding: 5px;\r\n}\r\n\r\n.replyPop {\r\n  overflow: auto;\r\n  width: 100%;\r\n  height: 100%;\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.replyBtnCell {\r\n  float: right;\r\n}\r\n\r\n.deleteBtn,\r\n.replyBtn {\r\n  font-size: 14px;\r\n  padding: 0 8px;\r\n  color: #60898b;\r\n}\r\n\r\n.replyInput {\r\n  margin: 20px 10px;\r\n  margin-bottom: 0px;\r\n  border: 1px solid lightgray;\r\n  border-radius: 5px;\r\n}\r\n\r\n.replyCell {\r\n  margin-top: -10px;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/containers/Player/Comment/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"commentContainer\"},[_c('mt-field',{staticClass:\"commentInput\",attrs:{\"placeholder\":\"评论\",\"disableClear\":\"\"},model:{value:(_vm.myComment),callback:function ($$v) {_vm.myComment=$$v},expression:\"myComment\"}},[(!_vm.preview0)?_c('i',{staticClass:\"fa fa-picture-o\",staticStyle:{\"font-size\":\"20px\"},on:{\"click\":function($event){_vm.isShowUploadImagesDialog = true}}}):_vm._e(),_vm._v(\" \"),(_vm.preview0)?_c('img',{attrs:{\"width\":\"35px\",\"src\":_vm.preview0}}):_vm._e(),_vm._v(\" \"),_c('mt-button',{staticStyle:{\"margin-left\":\"10px\",\"height\":\"35px\",\"background-color\":\"#418642\",\"color\":\"#FFF\"},on:{\"click\":function($event){_vm.confirmComment()}}},[_vm._v(\"\\n      提交\\n    \")])],1),_vm._v(\" \"),_vm._l((_vm.commentList),function(comment,index){return _c('div',{key:comment.id,staticClass:\"commentCell\"},[_c('div',{staticClass:\"commentTop\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":comment.avatar}}),_vm._v(\" \"),_c('span',{staticClass:\"userName\"},[_vm._v(_vm._s(comment.userName))]),_vm._v(\" \"),_c('div',{staticClass:\"approve\"},[_c('i',{staticClass:\"fa fa-thumbs-o-up\",staticStyle:{\"font-size\":\"18px\",\"margin-right\":\"5px\"},attrs:{\"id\":\"approve\" + comment.id},on:{\"click\":function($event){_vm.approveHandle(index, 0, 1)}}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(comment.approve.length))])])]),_vm._v(\" \"),_c('p',{staticClass:\"text\"},[_vm._v(_vm._s(comment.text))]),_vm._v(\" \"),(comment.images.length)?_c('div',{staticClass:\"imagesBox\"},_vm._l((comment.images),function(img){return _c('img',{staticClass:\"textImg\",attrs:{\"src\":img},on:{\"click\":function($event){_vm.showImg(img)}}})})):_vm._e(),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"gray\",\"font-size\":\"12px\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.formatTime(comment.createTime))+\"\\n    \")]),_vm._v(\" \"),_c('span',{staticClass:\"replyBtn\",on:{\"click\":function($event){_vm.handleOnReply(index, -1, \"comment\")}}},[_vm._v(\"\\n      回复(\"+_vm._s(comment.replies.length)+\")\\n    \")]),_vm._v(\" \"),(_vm.userType === \"master\" || _vm.userType === comment.accountId)?_c('span',{staticClass:\"deleteBtn\",on:{\"click\":function($event){_vm.handleOnDeleteComment(comment.id)}}},[_vm._v(\"\\n      删除\\n    \")]):_vm._e()])}),_vm._v(\" \"),(!_vm.commentList.length)?_c('h3',{staticStyle:{\"color\":\"gray\"}},[_vm._v(\"暂无评论，快来评论吧！\")]):_vm._e(),_vm._v(\" \"),_c('mt-popup',{staticClass:\"imagesUploadDialog\",attrs:{\"popup-transition\":\"popup-fade\"},model:{value:(_vm.isShowUploadImagesDialog),callback:function ($$v) {_vm.isShowUploadImagesDialog=$$v},expression:\"isShowUploadImagesDialog\"}},[_c('div',[_c('p',{staticStyle:{\"padding-bottom\":\"10px\",\"color\":\"#555\"}},[_vm._v(\"最多可上传3张图片\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[(_vm.preview0 !== \"\")?_c('img',{staticStyle:{\"border-radius\":\"5px\",\"border\":\"solid 1px #DDD\",\"margin-right\":\"10px\"},attrs:{\"src\":_vm.preview0,\"height\":\"100px\"}}):_vm._e(),_vm._v(\" \"),(_vm.preview1 !== \"\")?_c('img',{staticStyle:{\"border-radius\":\"5px\",\"border\":\"solid 1px #DDD\",\"margin-right\":\"10px\"},attrs:{\"src\":_vm.preview1,\"height\":\"100px\"}}):_vm._e(),_vm._v(\" \"),(_vm.preview2 !== \"\")?_c('img',{staticStyle:{\"border-radius\":\"5px\",\"border\":\"solid 1px #DDD\",\"margin-right\":\"10px\"},attrs:{\"src\":_vm.preview2,\"height\":\"100px\"}}):_vm._e(),_vm._v(\" \"),(_vm.preview2 === \"\")?_c('i',{staticClass:\"fa fa-plus-square-o\",staticStyle:{\"font-size\":\"100px\",\"padding-left\":\"10px\",\"padding-right\":\"10px\",\"border-radius\":\"5px\",\"border\":\"solid 1px #DDD\"},on:{\"click\":_vm.clickUploadImageInputForComment}}):_vm._e(),_vm._v(\" \"),_c('input',{ref:\"uploadImageInputForComment\",staticStyle:{\"display\":\"none\"},attrs:{\"accept\":\"image/*\",\"type\":\"file\",\"multiple\":\"\"},domProps:{\"value\":_vm.inputImage},on:{\"change\":_vm.handleInputChange}})]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"align-self\":\"center\",\"margin-top\":\"30px\"}},[_c('mt-button',{staticStyle:{\"margin-right\":\"10px\",\"padding-left\":\"30px\",\"padding-right\":\"30px\"},on:{\"click\":_vm.confirmUploadImages}},[_vm._v(\"\\n          确定\\n        \")]),_vm._v(\" \"),_c('mt-button',{staticStyle:{\"margin-left\":\"10px\",\"padding-left\":\"30px\",\"padding-right\":\"30px\"},on:{\"click\":_vm.cancelUploadImages}},[_vm._v(\"\\n          取消\\n        \")])],1)])]),_vm._v(\" \"),(Object.keys(_vm.commentObj).length)?_c('mt-popup',{staticClass:\"replyPop\",attrs:{\"position\":\"right\"},model:{value:(_vm.replyVisible),callback:function ($$v) {_vm.replyVisible=$$v},expression:\"replyVisible\"}},[_c('div',[_c('mt-button',{staticStyle:{\"margin-top\":\"10px\",\"margin-bottom\":\"10px\",\"padding-left\":\"10px\",\"padding-right\":\"10px\"},on:{\"click\":function($event){_vm.replyVisible = false}}},[_vm._v(\"\\n        返回\\n      \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"commentCell\"},[_c('div',{staticClass:\"commentTop\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.commentObj.avatar}}),_vm._v(\" \"),_c('span',{staticClass:\"userName\"},[_vm._v(_vm._s(_vm.commentObj.userName))]),_vm._v(\" \"),_c('div',{staticClass:\"approve\"},[_c('i',{staticClass:\"fa fa-thumbs-o-up\",staticStyle:{\"font-size\":\"18px\",\"margin-right\":\"5px\"},attrs:{\"id\":\"approvepop\" + _vm.commentObj.id},on:{\"click\":function($event){_vm.approveHandle(-1, 0, 1)}}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.approveL))])])]),_vm._v(\" \"),_c('p',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.commentObj.text))]),_vm._v(\" \"),(_vm.commentObj.images.length)?_c('div',{staticClass:\"imagesBox\"},_vm._l((_vm.commentObj.images),function(img){return _c('img',{staticClass:\"textImg\",attrs:{\"src\":img},on:{\"click\":function($event){_vm.showImg(img)}}})})):_vm._e(),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"gray\",\"font-size\":\"12px\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.formatTime(_vm.commentObj.createTime))+\"\\n      \")]),_vm._v(\" \"),_c('span',{staticClass:\"replyBtn\",on:{\"click\":function($event){_vm.handleOnReply(-1, -1, \"comment\")}}},[_vm._v(\"\\n        回复(\"+_vm._s(_vm.replyList.length)+\")\\n      \")])]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_vm._l((_vm.replyList),function(reply,i){return _c('div',{staticClass:\"commentCell\"},[_c('div',{staticClass:\"commentTop\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":reply.avatar}}),_vm._v(\" \"),_c('span',{staticClass:\"userName\"},[_vm._v(_vm._s(reply.userName))]),_vm._v(\" \"),_c('span',{staticStyle:{\"font-size\":\"14px\",\"color\":\"gray\",\"margin-left\":\"5px\",\"margin-right\":\"5px\"}},[_vm._v(\"@:\")]),_vm._v(\" \"),_c('span',{staticClass:\"userName\"},[_vm._v(_vm._s(reply.originUserName))]),_vm._v(\" \"),_c('div',{staticClass:\"approve\"},[_c('i',{staticClass:\"fa fa-thumbs-o-up\",staticStyle:{\"font-size\":\"18px\",\"margin-right\":\"5px\"},attrs:{\"id\":\"approve\" + reply.id},on:{\"click\":function($event){_vm.approveHandle(_vm.index, i, 2)}}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(reply.approve.length))])])]),_vm._v(\" \"),_c('p',{staticClass:\"text\"},[_vm._v(_vm._s(reply.text))]),_vm._v(\" \"),(reply.images.length)?_c('div',{staticClass:\"imagesBox\"},_vm._l((reply.images),function(img){return _c('img',{staticClass:\"textImg\",attrs:{\"src\":img},on:{\"click\":function($event){_vm.showImg(img)}}})})):_vm._e(),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"gray\",\"font-size\":\"12px\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.formatTime(reply.createTime))+\"\\n      \")]),_vm._v(\" \"),_c('span',{staticClass:\"replyBtn\",on:{\"click\":function($event){_vm.handleOnReply(-1, i, \"reply\")}}},[_vm._v(\"\\n        回复\\n      \")]),_vm._v(\" \"),(_vm.userType === \"master\" || _vm.userType === reply.accountId)?_c('span',{staticClass:\"deleteBtn\",on:{\"click\":function($event){_vm.handleOnDeleteReply(_vm.commentObj.id, reply.id)}}},[_vm._v(\"\\n        删除\\n      \")]):_vm._e()])})],2):_vm._e(),_vm._v(\" \"),_c('mt-popup',{staticClass:\"imagesUploadDialog\",model:{value:(_vm.rrVisible),callback:function ($$v) {_vm.rrVisible=$$v},expression:\"rrVisible\"}},[_c('mt-field',{staticClass:\"replyInput\",attrs:{\"placeholder\":\"请输入回复\"},model:{value:(_vm.replyText),callback:function ($$v) {_vm.replyText=$$v},expression:\"replyText\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"left\",\"margin-top\":\"5px\"}},[_c('p',{staticStyle:{\"font-size\":\"12px\",\"color\":\"gray\",\"margin\":\"0 12px\"}},[_vm._v(\"至多可提交3张图片\")]),_vm._v(\" \"),( _vm.preview0 !== \"\" )?_c('img',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"src\":_vm.preview0,\"height\":\"70px\"}}):_vm._e(),_vm._v(\" \"),( _vm.preview1 !== \"\" )?_c('img',{attrs:{\"src\":_vm.preview1,\"height\":\"70px\"}}):_vm._e(),_vm._v(\" \"),( _vm.preview2 !== \"\" )?_c('img',{attrs:{\"src\":_vm.preview2,\"height\":\"70px\"}}):_vm._e(),_vm._v(\" \"),( _vm.preview2 === \"\" )?_c('i',{staticClass:\"fa fa-plus-square-o\",staticStyle:{\"font-size\":\"70px\",\"margin-left\":\"5%\"},on:{\"click\":_vm.clickUploadImageInputForReply}}):_vm._e(),_vm._v(\" \"),_c('input',{ref:\"uploadImageInputForReply\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/*\",\"multiple\":\"\"},domProps:{\"value\":_vm.inputImage},on:{\"change\":_vm.handleInputChange}})]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"align-self\":\"center\",\"margin-top\":\"30px\"}},[_c('mt-button',{staticStyle:{\"margin-right\":\"10px\",\"padding-left\":\"30px\",\"padding-right\":\"30px\"},on:{\"click\":_vm.confirmReply}},[_vm._v(\"\\n        确定\\n      \")]),_vm._v(\" \"),_c('mt-button',{staticStyle:{\"margin-left\":\"10px\",\"padding-left\":\"30px\",\"padding-right\":\"30px\"},on:{\"click\":_vm.cancleReply}},[_vm._v(\"\\n        取消\\n      \")])],1)],1),_vm._v(\" \"),_c('mt-popup',{staticClass:\"showImg\",attrs:{\"position\":\"right\"},model:{value:(_vm.showImgVisible),callback:function ($$v) {_vm.showImgVisible=$$v},expression:\"showImgVisible\"}},[_c('img',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"src\":_vm.showImgUrl}})])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1b44363e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/Player/Comment/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1b44363e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1b44363e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1b44363e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/Player/Comment/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class='score'>\r\n    <div class='left'>\r\n      <span style='font-size: 16px; font-weight: 800; margin-right: 5px;'>\r\n        评分:\r\n      </span>\r\n      <span style='font-size: 16px; font-weight: 800;'>\r\n        {{score === -1 ? '暂无评分' : `${score}/5`}}\r\n      </span>\r\n    </div>\r\n    <router-link\r\n      class='right'\r\n      v-if='accountId !== -1 && Object.keys(teacherInformation).length'\r\n      :to='`/teacher/${accountId}`'\r\n    >\r\n      <img\r\n        style='width: 30px; height: 30px; border-radius: 50%;'\r\n        :src='teacherInformation.avatar'\r\n      />\r\n      <span style='color: #000; font-size: 16px;'>\r\n        {{teacherInformation.name || teacherInformation.nickname}}\r\n      </span>\r\n      <i\r\n        class='fa fa-angle-right'\r\n        style='color: #000; font-size: 20px;'\r\n      />\r\n    </router-link>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'Score',\r\n\r\n  props: {\r\n    accountId: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    score: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    teacherInformation: {\r\n      type: Object,\r\n      required: true,\r\n      default: function() {\r\n        return {}\r\n      }\r\n    },\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.score {\r\n  height: 40px;\r\n  padding: 0 10px;\r\n  border-bottom: 1px solid #EEE;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.right {\r\n  display: flex;\r\n  align-items: center;\r\n  text-decoration: none;\r\n}\r\n\r\n.right > * {\r\n  margin-left: 10px;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/containers/Player/Score/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"score\"},[_c('div',{staticClass:\"left\"},[_c('span',{staticStyle:{\"font-size\":\"16px\",\"font-weight\":\"800\",\"margin-right\":\"5px\"}},[_vm._v(\"\\n      评分:\\n    \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"font-size\":\"16px\",\"font-weight\":\"800\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.score === -1 ? '暂无评分' : (_vm.score + \"/5\"))+\"\\n    \")])]),_vm._v(\" \"),(_vm.accountId !== -1 && Object.keys(_vm.teacherInformation).length)?_c('router-link',{staticClass:\"right\",attrs:{\"to\":(\"/teacher/\" + _vm.accountId)}},[_c('img',{staticStyle:{\"width\":\"30px\",\"height\":\"30px\",\"border-radius\":\"50%\"},attrs:{\"src\":_vm.teacherInformation.avatar}}),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"#000\",\"font-size\":\"16px\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.teacherInformation.name || _vm.teacherInformation.nickname)+\"\\n    \")]),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-angle-right\",staticStyle:{\"color\":\"#000\",\"font-size\":\"20px\"}})]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-292d2f14\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/Player/Score/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-292d2f14\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-292d2f14\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-292d2f14\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/Player/Score/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div\r\n    class='subtitles'\r\n    :style='subtitleContainerMarginTop ? { marginTop: `${subtitleContainerMarginTop}px` } : undefined'\r\n  >\r\n    <div\r\n      class='subtitle'\r\n      v-for='(subtitle, index) in subtitles'\r\n      :class='{activeSubtitle: index === activeSubtitleIndex }'\r\n      :key='subtitle.beginTime'\r\n      :ref='index === activeSubtitleIndex ? \"activeSubtitle\" : undefined'\r\n    >\r\n      <span class='start'>{{formatDuring(subtitle.beginTime)}}</span>\r\n      <span class='wordstext'>{{subtitle.text}}</span>\r\n    </div>\r\n    <h3\r\n      style='color: gray; margin-top: 100px;'\r\n      v-if='!subtitles.length'\r\n    >\r\n      暂无字幕\r\n    </h3>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'Subtitles',\r\n\r\n  props: {\r\n    activeSubtitleIndex: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    subtitles: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    subtitleContainerMarginTop: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      count: 0,\r\n      scroll: '',\r\n      text: '',\r\n      time: '',\r\n    }\r\n  },\r\n\r\n  updated() {\r\n    if (this.$refs.activeSubtitle && this.$refs.activeSubtitle[0]) {\r\n      const offsetTop = this.$refs.activeSubtitle[0].offsetTop\r\n      const clientHeight = this.$refs.activeSubtitle[0].clientHeight\r\n      if (this.$browser.os === 'iOS') {\r\n        document.body.scrollTop = offsetTop - (window.innerHeight - this.subtitleContainerMarginTop - clientHeight) / 2\r\n      } else {\r\n        document.documentElement.scrollTop = offsetTop - (window.innerHeight - this.subtitleContainerMarginTop - clientHeight) / 2\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    formatDuring(mss) {\r\n      let minutes = parseInt((mss % (1000 * 60 * 60)) / (1000 * 60))\r\n      let seconds = parseInt((mss % (1000 * 60)) / 1000)\r\n      if (seconds < 10) {\r\n        seconds = `0${seconds}`\r\n      }\r\n      if (minutes < 10) {\r\n        minutes = `0${minutes}`\r\n      }\r\n      return `${minutes}:${seconds}`\r\n    },\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.subtitles {\r\n  position: relative;\r\n  border-top: solid 1px #EEE\r\n}\r\n\r\n.subtitle {\r\n  text-align: left;\r\n  font-size: 16px;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  color:gray;\r\n  display: flex;\r\n  align-items:center;\r\n  padding: 6px;\r\n  border-bottom: 1px solid lightgray;\r\n}\r\n\r\n.start {\r\n  display: inline-block;\r\n  width: 15%;\r\n  height: 18px;\r\n  margin-left: 1%;\r\n  margin-right: 3%;\r\n  font-size: 15px;\r\n}\r\n\r\n.wordstext {\r\n  width: 70%;\r\n  overflow: hidden;\r\n  display: inline-block;\r\n}\r\n\r\n.activeSubtitle {\r\n  color: black;\r\n  background-color: #DDD;\r\n  transition: background-color 0.1s;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/containers/Player/Subtitles/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"subtitles\",style:(_vm.subtitleContainerMarginTop ? { marginTop: (_vm.subtitleContainerMarginTop + \"px\") } : undefined)},[_vm._l((_vm.subtitles),function(subtitle,index){return _c('div',{key:subtitle.beginTime,ref:index === _vm.activeSubtitleIndex ? \"activeSubtitle\" : undefined,refInFor:true,staticClass:\"subtitle\",class:{activeSubtitle: index === _vm.activeSubtitleIndex }},[_c('span',{staticClass:\"start\"},[_vm._v(_vm._s(_vm.formatDuring(subtitle.beginTime)))]),_vm._v(\" \"),_c('span',{staticClass:\"wordstext\"},[_vm._v(_vm._s(subtitle.text))])])}),_vm._v(\" \"),(!_vm.subtitles.length)?_c('h3',{staticStyle:{\"color\":\"gray\",\"margin-top\":\"100px\"}},[_vm._v(\"\\n    暂无字幕\\n  \")]):_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5532351d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/Player/Subtitles/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5532351d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5532351d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5532351d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/Player/Subtitles/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class='container'>\r\n    <div\r\n      ref='playerWrapper'\r\n      :style='selected === \"subtitles\" ? {\r\n        position: \"fixed\",\r\n        left: \"0\",\r\n        top: \"0\",\r\n        zIndex: \"100\",\r\n        width: \"100%\",\r\n      } : undefined'\r\n    >\r\n      <MyHeader :title='title' />\r\n      <div\r\n        id=\"player\"\r\n        @actionsLoaded='handleOnSetSubtitleContainerMarginTop'\r\n        @subtitlechange='handleOnSubtitleChange'\r\n      />\r\n      <mt-navbar\r\n        class='selectToolBar'\r\n        v-model='selected'\r\n      >\r\n        <mt-tab-item\r\n          id='comment'\r\n          :style='selected === \"comment\" ? { borderBottom: \"3px solid #418642\" } : undefined'\r\n        >\r\n          <span\r\n            style='font-size: 18px; color: #666; font-weight: 800;'\r\n            :style='selected === \"comment\" ? { color: \"#418642\" } : undefined'\r\n          >\r\n            评论\r\n          </span>\r\n        </mt-tab-item>\r\n        <mt-tab-item\r\n          id='subtitles'\r\n          :style='selected === \"subtitles\" ? { borderBottom: \"3px solid #418642\" } : undefined'\r\n        >\r\n          <span\r\n            style='font-size: 18px; color: #666; font-weight: 800;'\r\n            :style='selected === \"subtitles\" ? { color: \"#418642\" } : undefined'\r\n          >\r\n            字幕\r\n          </span>\r\n        </mt-tab-item>\r\n      </mt-navbar>\r\n    </div>\r\n    <mt-tab-container v-model='selected'>\r\n      <mt-tab-container-item id='comment'>\r\n        <Score\r\n          :accountId='accountId'\r\n          :score='score'\r\n          :teacherInformation='teacherInformation'\r\n        />\r\n        <Comment\r\n          :docId='docId'\r\n          :comments='comments'\r\n          :userType='userType'\r\n          @addCommentSuccess='handleOnAddCommentSuccess'\r\n          @addReplySuccess='handleOnAddReplySuccess'\r\n          @handleOnDeleteComment='handleOnDeleteComment'\r\n          @handleOnDeleteReply='handleOnDeleteReply'\r\n        />\r\n      </mt-tab-container-item>\r\n      <mt-tab-container-item id='subtitles'>\r\n        <Subtitles\r\n          :subtitles='subtitles'\r\n          :activeSubtitleIndex='activeSubtitleIndex'\r\n          :subtitleContainerMarginTop='subtitleContainerMarginTop'\r\n        />\r\n      </mt-tab-container-item>\r\n    </mt-tab-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport '../Player/Player/src/Player.css'\r\n\r\nimport { Indicator } from 'mint-ui'\r\n\r\nimport MyHeader from '../MyHeader'\r\nimport Player from '../Player/Player/src/Player.js'\r\nimport Comment from './Comment'\r\nimport Score from './Score'\r\nimport Subtitles from './Subtitles'\r\nimport {\r\n  configWeiXinShare,\r\n  initWeiXinShareConfig,\r\n} from '../../utils/weixin'\r\n\r\nexport default {\r\n  name: 'Player',\r\n\r\n  data() {\r\n    return {\r\n      accountId: -1,\r\n      activeSubtitleIndex: -1,\r\n      comments: [],\r\n      docId: '',\r\n      myInformation: {},\r\n      pictures: [],\r\n      player: {},\r\n      score: -1,\r\n      selected: 'comment',\r\n      subtitleContainerMarginTop: 0,\r\n      subtitles: [],\r\n      teacherInformation: {},\r\n      title: '课程名称',\r\n      usersInformation: {},\r\n    }\r\n  },\r\n\r\n  components: {\r\n    MyHeader,\r\n    Comment,\r\n    Score,\r\n    Subtitles,\r\n  },\r\n\r\n  mounted() {\r\n    /* 获取当前页面显示所需要的数据 */\r\n    if (this.$route.params.id) {\r\n      this.docId = this.$route.params.id\r\n\r\n      this\r\n        .$http\r\n        .get(`/players/${this.docId}`)\r\n        .then((respones) => {\r\n          const {\r\n            data: {\r\n              accounts,\r\n              comments,\r\n              doc: {\r\n                accountId,\r\n                action: actions,\r\n                defaultAction,\r\n                name,\r\n                pictures,\r\n                ratingStatis: {\r\n                  star1,\r\n                  star2,\r\n                  star3,\r\n                  star4,\r\n                  star5,\r\n                },\r\n              },\r\n            },\r\n          } = respones\r\n\r\n          /* 保存当前所有用户的个人信息 */\r\n          this.usersInformation = accounts\r\n\r\n          /* 获取当前文档的作者信息 */\r\n          this.accountId = accountId\r\n          this.teacherInformation = this.usersInformation.find((user) => user.id === this.accountId)\r\n\r\n          /* 获取当前文档信息 */\r\n          this.title = name\r\n\r\n          /* 获取当前文档的评论和回复信息 */\r\n          this.comments = comments\r\n          this.comments.sort((prev, next) => Date.parse(next.createTime) - Date.parse(prev.createTime)).forEach((comment) => {\r\n            const userInformation = this.usersInformation.find((user) => user.id === comment.accountId)\r\n            comment.userName = userInformation.name || userInformation.nickname\r\n            comment.avatar = userInformation.avatar\r\n            comment.replies.sort((prev, next) => Date.parse(next.createTime) - Date.parse(prev.createTime)).forEach((reply) => {\r\n              const replyUserInformation = this.usersInformation.find((user) => user.id === reply.accountId)\r\n              const originUserInformation = this.usersInformation.find((user) => user.id === reply.sourceId)\r\n              reply.userName = replyUserInformation.name || replyUserInformation.nickname\r\n              reply.avatar = replyUserInformation.avatar\r\n              reply.originUserName = originUserInformation.name || originUserInformation.nickname\r\n              reply.originAvatar = originUserInformation.avatar\r\n            })\r\n          })\r\n\r\n          /* 获取应当播放的 action */\r\n          const action = actions.find((action) => action.id === defaultAction)\r\n\r\n          /* 获取对应的字幕数据 */\r\n          this.subtitles = action.subtitle\r\n\r\n          this.pictures = pictures\r\n\r\n          /* 计算当前文档的评分 */\r\n          this.score = (star1 + star2 * 2 + star3 * 3 + star4 * 4 + star5 * 5) / (star1 + star2 + star3 + star4 + star5)\r\n          this.score = window.isNaN(this.score) ? -1 : this.score\r\n\r\n          /* 实例化播放器 */\r\n          if (process.env.NODE_ENV === 'production') {\r\n            this.player = new Player({\r\n              actionUrl : action.json,\r\n              audioUrl  : action.recording,\r\n              duration  : action.duration,\r\n              element   : document.getElementById('player'),\r\n              imageUrls : this.pictures,\r\n              mode      : 'mobile',\r\n              size      : action.totalSize,\r\n              subtitles : action.subtitle,\r\n            })\r\n          }\r\n\r\n          /* 等到播放器完成初始化并确定了其尺寸的时候触发，用来给字幕组件设置上外边距，防止 */\r\n          /* 处于固定定位的播放器遮盖底部的字幕组件正常显示 */\r\n          this.handleOnSetSubtitleContainerMarginTop()\r\n\r\n          /* 只有处于生产环境才执行微信 JS-SDK 的初始化操作，并需要在 axios 配置好了以后再执行 */\r\n          if (process.env.NODE_ENV === 'production') {\r\n            const title = this.title\r\n            const coverURL = this.pictures[0]\r\n            const authorName = this.teacherInformation.name || this.teacherInformation.nickname\r\n            const authorIntroduction = this.teacherInformation.introduction\r\n\r\n            /* 初始化微信 JS-SDK 配置 */\r\n            initWeiXinShareConfig(window.encodeURIComponent(window.location.href))\r\n\r\n            /* 等待微信 JS-SDK 可以使用后自定义分享相关的操作 */\r\n            window.jWeixin.ready(function() {\r\n              configWeiXinShare({\r\n                title  : `${authorName}:《${title}》`,\r\n                desc   : `${authorIntroduction}`,\r\n                link   : window.location.href,\r\n                imgUrl : coverURL,\r\n              })\r\n            })\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          if (process.env.NODE_ENV === 'development') {\r\n            throw error\r\n          } else {\r\n            alert('获取数据错误，请检查访问地址')\r\n          }\r\n        })\r\n    }\r\n\r\n    /* 获取当前登录用户的个人信息 */\r\n    this\r\n      .$http\r\n      .get('/accounts')\r\n      .then(({\r\n        data: myInformation,\r\n      }) => {\r\n        this.myInformation = myInformation\r\n      })\r\n  },\r\n\r\n  computed: {\r\n    userType() {\r\n      if (\r\n        this.myInformation &&\r\n        Object.keys(this.myInformation).length\r\n      ) {\r\n        /* 当前登录用户是当前文档的上传者 */\r\n        if (this.myInformation.id === this.teacherInformation) {\r\n          return 'master'\r\n        }\r\n        /* 当前登录用户不是当前文档的上传者，返回当前登录用户的 ID */\r\n        return this.myInformation.id\r\n      }\r\n      return ''\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    handleOnSubtitleChange(event) {\r\n      this.activeSubtitleIndex = event.detail.subtitleIndex\r\n    },\r\n\r\n    handleOnSetSubtitleContainerMarginTop() {\r\n      this.subtitleContainerMarginTop = this.$refs.playerWrapper.offsetHeight\r\n    },\r\n\r\n    handleOnAddCommentSuccess(comment) {\r\n      /* 加入评论者的个人信息 */\r\n      comment.userName = this.myInformation.name || this.myInformation.nickname\r\n      comment.avatar = this.myInformation.avatar\r\n\r\n      this.comments.unshift(comment)\r\n    },\r\n\r\n    handleOnAddReplySuccess(comment) {\r\n      /* 加入评论者的个人信息 */\r\n      comment.userName = this.myInformation.name || this.myInformation.nickname\r\n      comment.avatar = this.myInformation.avatar\r\n\r\n      comment.replies.sort((prev, next) => Date.parse(next.createTime) - Date.parse(prev.createTime)).forEach((reply) => {\r\n        /* 加入回复者和被回复者的个人信息 */\r\n        const replyUserInformation = this.usersInformation.find((user) => user.id === reply.accountId)\r\n        const originUserInformation = this.usersInformation.find((user) => user.id === reply.sourceId)\r\n        reply.userName = replyUserInformation.name || replyUserInformation.nickname\r\n        reply.avatar = replyUserInformation.avatar\r\n        reply.originUserName = originUserInformation.name || originUserInformation.nickname\r\n        reply.originAvatar = originUserInformation.avatar\r\n      })\r\n\r\n      const commentIndex = this.comments.findIndex((_comment) => _comment.id === comment.id)\r\n      this.comments.splice(commentIndex, 1, comment)\r\n    },\r\n\r\n    handleOnDeleteComment(commentId) {\r\n      Indicator.open('删除评论中')\r\n\r\n      this\r\n        .$http\r\n        .delete(`/comments/${commentId}`)\r\n        .then(() => {\r\n          Indicator.close()\r\n          const commentIndex = this.comments.findIndex((_comment) => _comment.id === commentId)\r\n          this.comments.splice(commentIndex, 1)\r\n        })\r\n        .catch((error) => {\r\n          Indicator.close()\r\n\r\n          if (process.env.NODE_ENV === 'development') {\r\n            throw error\r\n          } else {\r\n            alert('删除评论失败，请稍后重试')\r\n          }\r\n        })\r\n    },\r\n\r\n    handleOnDeleteReply(commentId, replyId) {\r\n      Indicator.open('删除回复中')\r\n\r\n      this\r\n        .$http\r\n        .delete(`/comments/${commentId}/reply/${replyId}`)\r\n        .then(() => {\r\n          Indicator.close()\r\n\r\n          const comment = this.comments.find((_comment) => _comment.id === commentId)\r\n          const replyIndex = comment.replies.findIndex((reply) => reply.id === replyId)\r\n          comment.replies.splice(replyIndex, 1)\r\n        })\r\n        .catch((error) => {\r\n          Indicator.close()\r\n\r\n          if (process.env.NODE_ENV === 'development') {\r\n            throw error\r\n          } else {\r\n            alert('删除回复失败，请稍后重试')\r\n          }\r\n        })\r\n    },\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.container {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n#player {\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n\r\n.selectToolBar {\r\n  width: 100%;\r\n  border: solid 1px #EEE;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.selectToolBar > a {\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.selectToolBar > a:not(:first-child) {\r\n  border-left: solid 1px #EEE;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/containers/Player/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{ref:\"playerWrapper\",style:(_vm.selected === \"subtitles\" ? {\n      position: \"fixed\",\n      left: \"0\",\n      top: \"0\",\n      zIndex: \"100\",\n      width: \"100%\",\n    } : undefined)},[_c('MyHeader',{attrs:{\"title\":_vm.title}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"player\"},on:{\"actionsLoaded\":_vm.handleOnSetSubtitleContainerMarginTop,\"subtitlechange\":_vm.handleOnSubtitleChange}}),_vm._v(\" \"),_c('mt-navbar',{staticClass:\"selectToolBar\",model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},[_c('mt-tab-item',{style:(_vm.selected === \"comment\" ? { borderBottom: \"3px solid #418642\" } : undefined),attrs:{\"id\":\"comment\"}},[_c('span',{staticStyle:{\"font-size\":\"18px\",\"color\":\"#666\",\"font-weight\":\"800\"},style:(_vm.selected === \"comment\" ? { color: \"#418642\" } : undefined)},[_vm._v(\"\\n          评论\\n        \")])]),_vm._v(\" \"),_c('mt-tab-item',{style:(_vm.selected === \"subtitles\" ? { borderBottom: \"3px solid #418642\" } : undefined),attrs:{\"id\":\"subtitles\"}},[_c('span',{staticStyle:{\"font-size\":\"18px\",\"color\":\"#666\",\"font-weight\":\"800\"},style:(_vm.selected === \"subtitles\" ? { color: \"#418642\" } : undefined)},[_vm._v(\"\\n          字幕\\n        \")])])],1)],1),_vm._v(\" \"),_c('mt-tab-container',{model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},[_c('mt-tab-container-item',{attrs:{\"id\":\"comment\"}},[_c('Score',{attrs:{\"accountId\":_vm.accountId,\"score\":_vm.score,\"teacherInformation\":_vm.teacherInformation}}),_vm._v(\" \"),_c('Comment',{attrs:{\"docId\":_vm.docId,\"comments\":_vm.comments,\"userType\":_vm.userType},on:{\"addCommentSuccess\":_vm.handleOnAddCommentSuccess,\"addReplySuccess\":_vm.handleOnAddReplySuccess,\"handleOnDeleteComment\":_vm.handleOnDeleteComment,\"handleOnDeleteReply\":_vm.handleOnDeleteReply}})],1),_vm._v(\" \"),_c('mt-tab-container-item',{attrs:{\"id\":\"subtitles\"}},[_c('Subtitles',{attrs:{\"subtitles\":_vm.subtitles,\"activeSubtitleIndex\":_vm.activeSubtitleIndex,\"subtitleContainerMarginTop\":_vm.subtitleContainerMarginTop}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e71d589e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/Player/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e71d589e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e71d589e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e71d589e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/Player/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class='container'>\r\n    <MyHeader title='【个人主页】' />\r\n    <div class='information'>\r\n      <div class='message'>\r\n        <img class='photo' :src='teacherInformation.avatar' />\r\n        <h3 style='color:#FFFFFF;'>{{teacherInformation.name || teacherInformation.nickname}}</h3>\r\n        <h5 style='color:#C7C7C7;'>{{teacherInformation.introduction}}</h5>\r\n      </div>\r\n      <img class='backgroundImage' :src='teacherInformation.cover || defaultTeacherCover' />\r\n    </div>\r\n    <div class='courseList'>\r\n      <div\r\n        class='coursesCell'\r\n        v-for='library in libraries'\r\n      >\r\n        <router-link\r\n          class='link'\r\n          :to='`/course/${library.id}?accountId=${accountId}`'\r\n        >\r\n          <div class='imgcontainer'>\r\n            <div class='image'>\r\n              <img\r\n                class='image'\r\n                :src='library.isDefault ? defaultClassCoverPng : (library.cover || defaultClassCoverPng)'\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class='msgcontainer'>\r\n            <span class='courseName'>{{library.name}}</span>\r\n            <p class='alt'>{{documentNumberForEachLibrary[library.id]}}个文档</p>\r\n          </div>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport MyHeader from '../MyHeader'\r\nimport { Indicator } from 'mint-ui'\r\nimport { Toast } from 'mint-ui'\r\nimport {\r\n  configWeiXinShare,\r\n  initWeiXinShareConfig,\r\n} from '../../utils/weixin'\r\nimport defaultClassCoverPng from '../../assets/defaultClassCover.png'\r\nimport defaultTeacherCover from '../../assets/bigLogo.png'\r\n\r\nexport default {\r\n  name: 'Teacher',\r\n\r\n  data() {\r\n    return {\r\n      accountId: this.$route.params.id,\r\n      defaultClassCoverPng,\r\n      defaultTeacherCover,\r\n      documentNumberForEachLibrary: {},\r\n      libraries: [],\r\n      teacherInformation: {},\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    Indicator.open('获取用户数据中')\r\n\r\n    /* 获取用户数据，显示用户当前所拥有的的课堂 */\r\n    this\r\n      .$http\r\n      .get(`/players/accounts/${this.accountId}`)\r\n      .then(({\r\n        data: {\r\n          accounts,\r\n          coopLibraries,\r\n          libraries,\r\n        },\r\n      }) => {\r\n        this.teacherInformation = accounts.find((user) => String(user.id) === this.accountId)\r\n        this.libraries = libraries.concat(coopLibraries)\r\n\r\n        Indicator.close()\r\n\r\n        /* 只有处于生产环境才执行微信 JS-SDK 的初始化操作 */\r\n        if (process.env.NODE_ENV === 'production') {\r\n          const coverURL = this.teacherInformation.avatar\r\n          const authorName = this.teacherInformation.name || this.teacherInformation.nickname\r\n          const authorIntroduction = this.teacherInformation.introduction\r\n\r\n          /* 初始化微信 JS-SDK 配置 */\r\n          initWeiXinShareConfig(window.encodeURIComponent(window.location.href))\r\n\r\n          /* 等待微信 JS-SDK 可以使用后自定义分享相关的操作 */\r\n          window.jWeixin.ready(function() {\r\n            configWeiXinShare({\r\n              title  : `${authorName}的个人主页`,\r\n              desc   : authorIntroduction,\r\n              link   : window.location.href,\r\n              imgUrl : coverURL,\r\n            })\r\n          })\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        throw error\r\n\r\n        Indicator.close('获取用户数据失败，请稍后重试')\r\n      })\r\n  },\r\n\r\n  watch: {\r\n    libraries() {\r\n      this.libraries.forEach((library) => {\r\n        this.documentNumberForEachLibrary[library.id] = library.docs.length + library.chapters.reduce((result, chapter) => {\r\n          return result + chapter.docs.length\r\n        }, 0)\r\n      })\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    pop() {\r\n      Toast({\r\n        message: '该课程已关闭',\r\n        iconClass: 'icon',\r\n        position: 'bottom',\r\n      })\r\n    },\r\n  },\r\n\r\n  components: {\r\n    MyHeader,\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.container {\r\n  width: 100%;\r\n}\r\n\r\n.information {\r\n  width: 100%;\r\n  height: 200px;\r\n  position: relative;\r\n}\r\n\r\n.message {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color:rgba(0, 0, 0, 0.48);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.backgroundImage {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: -1;\r\n}\r\n\r\n.courseList {\r\n\r\n}\r\n\r\n.photo {\r\n  width: 70px;\r\n  height: 70px;\r\n  border-radius: 50%;\r\n  border: 1px solid lightgray;\r\n}\r\n\r\n.coursesCell {\r\n  width: 100%;\r\n  height: 80px;\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.link {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 100%;\r\n  padding-bottom: 10px;\r\n  border-bottom: solid 1px #DDD;\r\n  text-decoration: none;\r\n}\r\n\r\n.noclick {\r\n  pointer-events: none;\r\n}\r\n\r\n.imgcontainer {\r\n  width: 110px;\r\n  height: 100%;\r\n  border-radius: 5px;\r\n  background: gray;\r\n}\r\n\r\n.image {\r\n  display: inline-block;\r\n  width: 110px;\r\n  height: 100%;\r\n  border-radius: 5px;\r\n  overflow: hidden;\r\n}\r\n\r\n.msgcontainer {\r\n  height: 100%;\r\n  margin-left: 10px;\r\n}\r\n\r\n.courseName {\r\n  display: inline-block;\r\n  width: 180px;\r\n  text-overflow: ellipsis;\r\n  overflow:hidden;\r\n  white-space: nowrap;\r\n  font-size: 20px;\r\n  color: black;\r\n  text-decoration: none;\r\n}\r\n\r\n.alt {\r\n  color: gray;\r\n  font-size: 15px;\r\n  margin-top: 8px;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/containers/Teacher/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('MyHeader',{attrs:{\"title\":\"【个人主页】\"}}),_vm._v(\" \"),_c('div',{staticClass:\"information\"},[_c('div',{staticClass:\"message\"},[_c('img',{staticClass:\"photo\",attrs:{\"src\":_vm.teacherInformation.avatar}}),_vm._v(\" \"),_c('h3',{staticStyle:{\"color\":\"#FFFFFF\"}},[_vm._v(_vm._s(_vm.teacherInformation.name || _vm.teacherInformation.nickname))]),_vm._v(\" \"),_c('h5',{staticStyle:{\"color\":\"#C7C7C7\"}},[_vm._v(_vm._s(_vm.teacherInformation.introduction))])]),_vm._v(\" \"),_c('img',{staticClass:\"backgroundImage\",attrs:{\"src\":_vm.teacherInformation.cover || _vm.defaultTeacherCover}})]),_vm._v(\" \"),_c('div',{staticClass:\"courseList\"},_vm._l((_vm.libraries),function(library){return _c('div',{staticClass:\"coursesCell\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":(\"/course/\" + (library.id) + \"?accountId=\" + _vm.accountId)}},[_c('div',{staticClass:\"imgcontainer\"},[_c('div',{staticClass:\"image\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":library.isDefault ? _vm.defaultClassCoverPng : (library.cover || _vm.defaultClassCoverPng)}})])]),_vm._v(\" \"),_c('div',{staticClass:\"msgcontainer\"},[_c('span',{staticClass:\"courseName\"},[_vm._v(_vm._s(library.name))]),_vm._v(\" \"),_c('p',{staticClass:\"alt\"},[_vm._v(_vm._s(_vm.documentNumberForEachLibrary[library.id])+\"个文档\")])])])],1)}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e1b72fb0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/containers/Teacher/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e1b72fb0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e1b72fb0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e1b72fb0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/containers/Teacher/index.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Course from '../containers/Course'\r\nimport Player from '../containers/Player'\r\nimport Teacher from '../containers/Teacher'\r\n\r\nVue.use(Router)\r\n\r\nexport default new Router({\r\n  mode: 'history',\r\n  routes: [{\r\n    path: '/teacher/:id',\r\n    name: 'teacher',\r\n    component: Teacher,\r\n  }, {\r\n    path: '/course/:id',\r\n    name: 'course',\r\n    component: Course,\r\n  }, {\r\n    path: '/player/:id',\r\n    name: 'player',\r\n    component: Player,\r\n  }],\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import 'mint-ui/lib/style.css'\r\n\r\nimport MintUI from 'mint-ui'\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport copy from 'copy-to-clipboard'\r\nimport App from './App'\r\nimport router from './router'\r\nimport { wxOAuth2RedirectUrl } from './utils/constants'\r\n\r\n/* 检测当前页面所处的浏览器环境 */\r\nconst browser = require('./utils/browser')\r\nconst $browser = new browser.Browser(window.navigator.userAgent)\r\n\r\nlet token\r\n\r\n/* 从 cookie 中获取 token */\r\nconst result = document.cookie.match(/qingtoken=(QJWT [\\w\\.\\-]+)/) // eslint-disable-line\r\n\r\n/* 销毁 cookie 中的 token */\r\ndocument.cookie = `qingtoken=none; expires=${new Date(0)};`\r\n\r\n/* 如果当前 cookie 中存在 token 值，说明用户是通过扫描二维码进入的，此时 cookie 中的 */\r\n/* token 值是最新的，则将 token 值保存到 localStorage 中；如果 cookie 中没有 */\r\n/* token，则表示用户不是通过扫描二维码进入的，此时从 localStorage 中取出之前的 token */\r\nif (result) {\r\n  token = result[1]\r\n  window.localStorage.setItem('token', result[1])\r\n} else {\r\n  token = window.localStorage.getItem('token')\r\n}\r\n\r\n/* axios 配置 */\r\naxios.defaults.baseURL = '/api/v1'\r\naxios.defaults.headers.common.Authorization = token\r\n\r\n/* 设置请求拦截器，拦截所有的 401 请求，并在需要授权的时候跳转到微信授权跳转地址 */\r\naxios.interceptors.response.use(response => response, (error) => {\r\n  const {\r\n    config: {\r\n      method,\r\n      url,\r\n    },\r\n    response: {\r\n      status: statusCode,\r\n    } = {},\r\n  } = error\r\n\r\n  /* 用户目前尚未登录的情况 */\r\n  if (statusCode === 401) {\r\n    if (method.toUpperCase() === 'GET' && url.endsWith('/accounts')) {\r\n      console.log('获取用户个人信息失败')\r\n    } else if (window.location.pathname.startsWith('/player/')) {\r\n      /* 当用户处于播放页面时，跳转之前需要把现在的地址记录下来，等到用户登录以后再跳转回原来的播放页面 */\r\n      const originURL = window.encodeURIComponent(window.location.pathname)\r\n\r\n      /* 微信授权跳转地址 */\r\n      const redirectURL = wxOAuth2RedirectUrl.replace(/\\{\\{.*?\\}\\}/, originURL)\r\n\r\n      if ($browser.browser === 'Wechat') {\r\n        /* 如果当前浏览器是微信浏览器，那么就直接跳转到微信授权地址 */\r\n        window.location.assign(redirectURL)\r\n      } else {\r\n        if (copy(redirectURL, {\r\n          message: '请复制下面的链接地址到微信中打开'\r\n        })) {\r\n          alert('请在微信中打开，链接地址已经复制到剪贴板')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return Promise.reject(error)\r\n})\r\n\r\nVue.config.productionTip = process.env.NODE_ENV === 'development'\r\n\r\nVue.prototype.$http = axios\r\n\r\n/* 记录当前页面所处浏览器环境 */\r\nVue.prototype.$browser = $browser\r\n\r\nVue.use(MintUI)\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  components: { App },\r\n  router,\r\n  template: '<App />',\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/* 微信授权登录以后请求的服务器接口 */\r\nconst wxOAuth2RedirectUrl = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxa53771df5d04e3d3&redirect_uri=https%3A%2F%2Fmobile.mamasousuo.com%2Fapi%2Fv1%2Fauthentication%2Fmobile&response_type=code&scope=snsapi_userinfo&state={{}}#wechat_redirect'\r\n\r\n/* eslint-disable */\r\nexport {\r\n  wxOAuth2RedirectUrl,\r\n}\r\n/* eslint-disable */\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/constants.js","module.exports = __webpack_public_path__ + \"static/img/defaultClassCover.4b577a3.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/defaultClassCover.png\n// module id = OmDG\n// module chunks = 1","/**\r\n * 浏览器解析，浏览器、Node.js皆可\r\n * https://github.com/mumuy/browser\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && (define.amd||define.cmd)) {\r\n        // AMD&CMD\r\n        define(factory);\r\n    } else if (typeof exports === 'object') {\r\n        // Node, CommonJS-like\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals (root is window)\r\n        root.Browser = factory();\r\n    }\r\n}(this, function () {\r\n    var _window = this||{};\r\n    var _navigator = typeof navigator!='undefined'?navigator:{};\r\n    var _mime = function (option, value) {\r\n        var mimeTypes = navigator.mimeTypes;      \r\n        for (var mt in mimeTypes) {\r\n            if (mimeTypes[mt][option] == value) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    return function (userAgent) {\r\n        var u = userAgent || _navigator.userAgent||{};\r\n        var _this = this;\r\n\r\n        var match = {\r\n            //内核\r\n            'Trident': u.indexOf('Trident') > -1 || u.indexOf('NET CLR') > -1,\r\n            'Presto': u.indexOf('Presto') > -1,\r\n            'WebKit': u.indexOf('AppleWebKit') > -1,\r\n            'Gecko': u.indexOf('Gecko/') > -1,\r\n            //浏览器\r\n            'Safari': u.indexOf('Safari') > -1,\r\n            'Chrome': u.indexOf('Chrome') > -1 || u.indexOf('CriOS') > -1,\r\n            'IE': u.indexOf('MSIE') > -1 || u.indexOf('Trident') > -1,\r\n            'Edge': u.indexOf('Edge') > -1,\r\n            'Firefox': u.indexOf('Firefox') > -1 || u.indexOf('FxiOS') > -1,\r\n            'Firefox Focus': u.indexOf('Focus') > -1,\r\n            'Chromium': u.indexOf('Chromium') > -1,\r\n            'Opera': u.indexOf('Opera') > -1 || u.indexOf('OPR') > -1,\r\n            'Vivaldi': u.indexOf('Vivaldi') > -1,\r\n            'Yandex': u.indexOf('YaBrowser') > -1,\r\n            'Arora': u.indexOf('Arora') > -1,\r\n            'Lunascape': u.indexOf('Lunascape') > -1,\r\n            'QupZilla': u.indexOf('QupZilla') > -1,\r\n            'Coc Coc': u.indexOf('coc_coc_browser') > -1,\r\n            'Kindle': u.indexOf('Kindle') > -1 || u.indexOf('Silk/') > -1,\r\n            'Iceweasel': u.indexOf('Iceweasel') > -1,\r\n            'Konqueror': u.indexOf('Konqueror') > -1,\r\n            'Iceape': u.indexOf('Iceape') > -1,\r\n            'SeaMonkey': u.indexOf('SeaMonkey') > -1,\r\n            'Epiphany': u.indexOf('Epiphany') > -1,\r\n            '360': u.indexOf('QihooBrowser') > -1,\r\n            '360EE': u.indexOf('360EE') > -1,\r\n            '360SE': u.indexOf('360SE') > -1,\r\n            'UC': u.indexOf('UC') > -1 || u.indexOf(' UBrowser') > -1,\r\n            'QQBrowser': u.indexOf('QQBrowser') > -1,\r\n            'QQ': u.indexOf('QQ/') > -1,\r\n            'Baidu': u.indexOf('Baidu') > -1 || u.indexOf('BIDUBrowser') > -1,\r\n            'Maxthon': u.indexOf('Maxthon') > -1,\r\n            'Sogou': u.indexOf('MetaSr') > -1 || u.indexOf('Sogou') > -1,\r\n            'LBBROWSER': u.indexOf('LBBROWSER') > -1,\r\n            '2345Explorer': u.indexOf('2345Explorer') > -1,\r\n            'TheWorld': u.indexOf('TheWorld') > -1,\r\n            'XiaoMi': u.indexOf('MiuiBrowser') > -1,\r\n            'Quark': u.indexOf('Quark') > -1,\r\n            'Qiyu': u.indexOf('Qiyu') > -1,\r\n            'Wechat': u.indexOf('MicroMessenger') > -1,\r\n            'Taobao': u.indexOf('AliApp(TB') > -1,\r\n            'Alipay': u.indexOf('AliApp(AP') > -1,\r\n            'Weibo': u.indexOf('Weibo') > -1,\r\n            'Douban': u.indexOf('com.douban.frodo') > -1,\r\n            'Suning': u.indexOf('SNEBUY-APP') > -1,\r\n            'iQiYi': u.indexOf('IqiyiApp') > -1,\r\n            //系统或平台\r\n            'Windows': u.indexOf('Windows') > -1,\r\n            'Linux': u.indexOf('Linux') > -1 || u.indexOf('X11') > -1,\r\n            'Mac OS': u.indexOf('Macintosh') > -1,\r\n            'Android': u.indexOf('Android') > -1 || u.indexOf('Adr') > -1,\r\n            'Ubuntu': u.indexOf('Ubuntu') > -1,\r\n            'FreeBSD': u.indexOf('FreeBSD') > -1,\r\n            'Debian': u.indexOf('Debian') > -1,\r\n            'Windows Phone': u.indexOf('IEMobile') > -1 || u.indexOf('Windows Phone')>-1,\r\n            'BlackBerry': u.indexOf('BlackBerry') > -1 || u.indexOf('RIM') > -1,\r\n            'MeeGo': u.indexOf('MeeGo') > -1,\r\n            'Symbian': u.indexOf('Symbian') > -1,\r\n            'iOS': u.indexOf('like Mac OS X') > -1,\r\n            'Chrome OS': u.indexOf('CrOS') > -1,\r\n            'WebOS': u.indexOf('hpwOS') > -1,\r\n            //设备\r\n            'Mobile': u.indexOf('Mobi') > -1 || u.indexOf('iPh') > -1 || u.indexOf('480') > -1,\r\n            'Tablet': u.indexOf('Tablet') > -1 || u.indexOf('Pad') > -1 || u.indexOf('Nexus 7') > -1\r\n        };\r\n        var is360 = false;\r\n        if(_window.chrome){\r\n            var chrome_vision = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1');\r\n            if(chrome_vision>36&&_window.showModalDialog){\r\n                is360 = true;\r\n            }else if(chrome_vision>45){\r\n                is360 = _mime(\"type\", \"application/vnd.chromium.remoting-viewer\");\r\n            }\r\n        }\r\n        //修正\r\n        if (match['Mobile']) {\r\n            match['Mobile'] = !(u.indexOf('iPad') > -1);\r\n        } else if (is360) {\r\n            if(_mime(\"type\", \"application/gameplugin\")){\r\n                match['360SE'] = true;\r\n            }else{\r\n                match['360EE'] = true;\r\n            }\r\n        }\r\n        if(match['IE']||match['Edge']){\r\n            var navigator_top = window.screenTop-window.screenY;\r\n            switch(navigator_top){\r\n                case 71: //无收藏栏,贴边\r\n                case 74: //无收藏栏,非贴边\r\n                case 99: //有收藏栏,贴边\r\n                case 102: //有收藏栏,非贴边\r\n                    match['360EE'] = true;\r\n                    break;\r\n                case 75: //无收藏栏,贴边\r\n                case 74: //无收藏栏,非贴边\r\n                case 105: //有收藏栏,贴边\r\n                case 104: //有收藏栏,非贴边\r\n                    match['360SE'] = true;\r\n                    break;\r\n            }\r\n        }\r\n        //基本信息\r\n        var hash = {\r\n            engine: ['WebKit', 'Trident', 'Gecko', 'Presto'],\r\n            browser: ['Safari', 'Chrome', 'Edge', 'IE', 'Firefox', 'Firefox Focus', 'Chromium', 'Opera', 'Vivaldi', 'Yandex', 'Arora', 'Lunascape', 'QupZilla', 'Coc Coc', 'Kindle', 'Iceweasel', 'Konqueror', 'Iceape', 'SeaMonkey', 'Epiphany', '360', '360SE', '360EE', 'UC', 'QQBrowser', 'QQ', 'Baidu', 'Maxthon', 'Sogou', 'LBBROWSER', '2345Explorer', 'TheWorld', 'XiaoMi', 'Quark', 'Qiyu', 'Wechat', 'Taobao', 'Alipay', 'Weibo', 'Douban','Suning', 'iQiYi'],\r\n            os: ['Windows', 'Linux', 'Mac OS', 'Android', 'Ubuntu', 'FreeBSD', 'Debian', 'iOS', 'Windows Phone', 'BlackBerry', 'MeeGo', 'Symbian', 'Chrome OS', 'WebOS'],\r\n            device: ['Mobile', 'Tablet']\r\n        };\r\n        _this.device = 'PC';\r\n        _this.language = (function () {\r\n            var g = (_navigator.browserLanguage || _navigator.language);\r\n            var arr = g.split('-');\r\n            if (arr[1]) {\r\n                arr[1] = arr[1].toUpperCase();\r\n            }\r\n            return arr.join('_');\r\n        })();\r\n        for (var s in hash) {\r\n            for (var i = 0; i < hash[s].length; i++) {\r\n                var value = hash[s][i];\r\n                if (match[value]) {\r\n                    _this[s] = value;\r\n                }\r\n            }\r\n        }\r\n        //系统版本信息\r\n        var osVersion = {\r\n            'Windows': function () {\r\n                var v = u.replace(/^.*Windows NT ([\\d.]+);.*$/, '$1');\r\n                var hash = {\r\n                    '6.4': '10',\r\n                    '6.3': '8.1',\r\n                    '6.2': '8',\r\n                    '6.1': '7',\r\n                    '6.0': 'Vista',\r\n                    '5.2': 'XP',\r\n                    '5.1': 'XP',\r\n                    '5.0': '2000'\r\n                };\r\n                return hash[v] || v;\r\n            },\r\n            'Android': function () {\r\n                return u.replace(/^.*Android ([\\d.]+);.*$/, '$1');\r\n            },\r\n            'iOS': function () {\r\n                return u.replace(/^.*OS ([\\d_]+) like.*$/, '$1').replace(/_/g, '.');\r\n            },\r\n            'Debian': function () {\r\n                return u.replace(/^.*Debian\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Windows Phone': function () {\r\n                return u.replace(/^.*Windows Phone( OS)? ([\\d.]+);.*$/, '$2');\r\n            },\r\n            'Mac OS': function () {\r\n                return u.replace(/^.*Mac OS X ([\\d_]+).*$/, '$1').replace(/_/g, '.');\r\n            },\r\n            'WebOS': function () {\r\n                return u.replace(/^.*hpwOS\\/([\\d.]+);.*$/, '$1');\r\n            }\r\n        };\r\n        _this.osVersion = '';\r\n        if (osVersion[_this.os]) {\r\n            _this.osVersion = osVersion[_this.os]();\r\n            if (_this.osVersion == u) {\r\n                _this.osVersion = '';\r\n            }\r\n        }\r\n        //浏览器版本信息\r\n        var version = {\r\n            'Safari': function () {\r\n                return u.replace(/^.*Version\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Chrome': function () {\r\n                return u.replace(/^.*Chrome\\/([\\d.]+).*$/, '$1').replace(/^.*CriOS\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'IE': function () {\r\n                return u.replace(/^.*MSIE ([\\d.]+).*$/, '$1').replace(/^.*rv:([\\d.]+).*$/, '$1');\r\n            },\r\n            'Edge': function () {\r\n                return u.replace(/^.*Edge\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Firefox': function () {\r\n                return u.replace(/^.*Firefox\\/([\\d.]+).*$/, '$1').replace(/^.*FxiOS\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Firefox Focus': function () {\r\n                return u.replace(/^.*Focus\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Chromium': function () {\r\n                return u.replace(/^.*Chromium\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Opera': function () {\r\n                return u.replace(/^.*Opera\\/([\\d.]+).*$/, '$1').replace(/^.*OPR\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Vivaldi': function () {\r\n                return u.replace(/^.*Vivaldi\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Yandex': function () {\r\n                return u.replace(/^.*YaBrowser\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Arora': function () {\r\n                return u.replace(/^.*Arora\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Lunascape': function(){\r\n                return u.replace(/^.*Lunascape[\\/\\s]([\\d.]+).*$/, '$1');\r\n            },\r\n            'QupZilla': function(){\r\n                return u.replace(/^.*QupZilla[\\/\\s]([\\d.]+).*$/, '$1');\r\n            },\r\n            'Coc Coc': function(){\r\n                return u.replace(/^.*coc_coc_browser\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Kindle': function () {\r\n                return u.replace(/^.*Version\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Iceweasel': function () {\r\n                return u.replace(/^.*Iceweasel\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Konqueror': function () {\r\n                return u.replace(/^.*Konqueror\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Iceape': function () {\r\n                return u.replace(/^.*Iceape\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'SeaMonkey': function () {\r\n                return u.replace(/^.*SeaMonkey\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Epiphany': function () {\r\n                return u.replace(/^.*Epiphany\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            '360': function(){\r\n                return u.replace(/^.*QihooBrowser\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            '360SE': function(){\r\n                var hash = {'55':'9.1','45':'8.1','42':'8.0','31':'7.0','21':'6.3'};\r\n                var chrome_vision = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1');\r\n                return hash[chrome_vision]||'';\r\n            },\r\n            '360EE': function(){\r\n                var hash = {'63':'9.5','55':'9.0','50':'8.7','30':'7.5'};\r\n                var chrome_vision = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1');\r\n                return hash[chrome_vision]||'';\r\n            },\r\n            'Maxthon': function () {\r\n                return u.replace(/^.*Maxthon\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'QQBrowser': function () {\r\n                return u.replace(/^.*QQBrowser\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'QQ': function () {\r\n                return u.replace(/^.*QQ\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Baidu': function () {\r\n                return u.replace(/^.*BIDUBrowser[\\s\\/]([\\d.]+).*$/, '$1');\r\n            },\r\n            'UC': function () {\r\n                return u.replace(/^.*UC?Browser\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Sogou': function () {\r\n                return u.replace(/^.*SE ([\\d.X]+).*$/, '$1').replace(/^.*SogouMobileBrowser\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'LBBROWSER': function(){\r\n                var hash = {'57':'6.5','49':'6.0','46':'5.9','42':'5.3','39':'5.2','34':'5.0','29':'4.5','21':'4.0'};\r\n                var chrome_vision = navigator.userAgent.replace(/^.*Chrome\\/([\\d]+).*$/, '$1');\r\n                return hash[chrome_vision]||'';\r\n            },\r\n            '2345Explorer': function () {\r\n                return u.replace(/^.*2345Explorer\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'TheWorld': function () {\r\n                return u.replace(/^.*TheWorld ([\\d.]+).*$/, '$1');\r\n            },\r\n            'XiaoMi': function () {\r\n                return u.replace(/^.*MiuiBrowser\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Quark': function () {\r\n                return u.replace(/^.*Quark\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Qiyu': function () {\r\n                return u.replace(/^.*Qiyu\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Wechat': function () {\r\n                return u.replace(/^.*MicroMessenger\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Taobao': function () {\r\n                return u.replace(/^.*AliApp\\(TB\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Alipay': function () {\r\n                return u.replace(/^.*AliApp\\(AP\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Weibo': function () {\r\n                return u.replace(/^.*weibo__([\\d.]+).*$/, '$1');\r\n            },\r\n            'Douban': function () {\r\n                return u.replace(/^.*com.douban.frodo\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Suning': function () {\r\n                return u.replace(/^.*SNEBUY-APP([\\d.]+).*$/, '$1');\r\n            },\r\n            'iQiYi': function () {\r\n                return u.replace(/^.*IqiyiVersion\\/([\\d.]+).*$/, '$1');\r\n            }\r\n        };\r\n        _this.version = '';\r\n        if (version[_this.browser]) {\r\n            _this.version = version[_this.browser]();\r\n            if (_this.version == u) {\r\n                _this.version = '';\r\n            }\r\n        }\r\n        //修正\r\n        if (_this.browser == 'Edge') {\r\n            _this.engine = 'EdgeHTML';\r\n        } else if (_this.browser == 'Chrome' && parseInt(_this.version) > 27) {\r\n            _this.engine = 'Blink';\r\n        } else if (_this.browser == 'Opera' && parseInt(_this.version) > 12) {\r\n            _this.engine = 'Blink';\r\n        } else if (_this.browser == 'Yandex') {\r\n            _this.engine = 'Blink';\r\n        }\r\n    };\r\n}));\n\n\n// WEBPACK FOOTER //\n// ./src/utils/browser.js"],"sourceRoot":""}